2012-11-01  Kees Blom  <Kees.Blom@cwi.nl>

	* Made the nightlycrontab maintainer ready for real use

	* merge

	* Fixed broken ChangeLog

	* merge

	* merge

	* merge

	* Restored broken ChangeLog

	* Automated ChangeLog Update

	* Automated ChangeLog Update

	* Automated ChangeLog Update

	* Automated ChangeLog Update

	* added nightlychangelog.sh

2012-10-31  Kees Blom  <kees@cwi.nl>

	* Updated ChangeLog, using: 'hg --quiet log -M --style=changelog'

2011-01-25 16:22  jackjansen

	* Detail

2011-01-25 16:21  jackjansen

	* Fixed mouse-moved code

2011-01-25 15:58  jackjansen

	* Adding projects for the Safari plugin

2011-01-25 15:56  keesblom

	* Added code to protect transitions for clock values stepping back.

2011-01-25 15:11  jackjansen

	* Disable ns/cg conersion on iPhone

2011-01-25 15:07  jackjansen

	* More cg/ns conversion

2011-01-25 11:33  jackjansen

	* In 32bit mode NSSize and CGSize are not identical, so add
	  converters

2011-01-25 00:08  jackjansen

	* Attempting to get fixMouse/resetMouse to work again, for HUD and
	  mouse-over. No success so far

2011-01-24 23:42  jackjansen

	* enterFullScreen is brain-dead. Reverting to old manual fullscreen
	  method

2011-01-24 22:16  jackjansen

	* Merging recent chanegs to the trunk (sigh)

2011-01-24 17:10  jackjansen

	* Playing with fullscreen mode

2011-01-24 15:57  jackjansen

	* Desktop CG player view starts to behave again, somewhat

2011-01-24 00:04  jackjansen

	* Getting rid of more dead wood: - QUICKTIME_OVERLAY_WINDOW will
	  never work for CG. Removed.  - NSRect is nowadays typedeffed as
	  CGRect, so get rid of conversions.  - We always use a identity
	  transformation between ambulant and cg   coordinates, so no need
	  to have the conversion routine be a method   of the view.

2011-01-23 23:02  jackjansen

	* url panel lost its connection. fixed.

2011-01-23 22:43  jackjansen

	* Another pathname fix

2011-01-23 16:57  jackjansen

	* Fixed minor bug with libswscale detection

2011-01-23 12:39  jackjansen

	* Another fix to nightlybuild

2011-01-23 00:56  jackjansen

	* Tweak build script

2011-01-23 00:50  jackjansen

	* A bit more work on the CG player

2011-01-23 00:26  jackjansen

	* Moving to the trunk

2011-01-22 23:43  jackjansen

	* Getting rid of various WITH_UIKIT ifdefs

2011-01-21 14:13  jackjansen

	* Implemented short/long tap switching. Still not perfect

2011-01-21 13:48  jackjansen

	* Merged branch exp-jack-extra-view: there is now an extra view
	  between the toplevel view and the player. This handles all
	  pan/zoom/rotate. The effect is that the player will always have
	  its bounds be equal to the SMIL bounds, and its matrix the
	  identity matrix. This cleans up the code, and should greatly
	  facilitate reusing the libambulant code in the desktop and
	  browser plugin.

2011-01-19 17:34  jackjansen

	* Toying with new ffmpeg version, because it is supposed to have a
	  better libswscale.

2011-01-19 16:59  jackjansen

	* Got VC10 projects to work.

2011-01-19 16:45  keesblom

	* Fixed a bug causing the player to crash (without recovery) when
	  no title was present in smil metadata.

2011-01-19 15:43  jackjansen

	* Getting started with allowing Visual Studio 2010 builds.

2011-01-19 14:17  keesblom

	* Fixed a bug causing the HUD to show (single tap) when the resize
	  (double tap) was specified by making the former dependent on the
	  latter using 'requireGestureRecognizerToFail:'.

2011-01-19 14:13  keesblom

	* Fixed a bug causing the player to continue playing while is
	  should have paused.

2011-01-14 15:28  keesblom

	* Small changes for iPad. Changed logic to refer to 'isHistory'
	  rather than 'isFavorites' because the former behaves a bit
	  different from other playlists (e.g. no item rearangementss).

2011-01-14 14:28  keesblom

	* Adapted iPad MainWindow similar to iPhone changed to match the
	  code.

2011-01-14 13:39  keesblom

	* Changed a few settings to make the views a bit better in Ipad.

2011-01-13 18:27  keesblom

	* Fixed a bug due to new controllers arrangement causing
	  AddFavorites to crash.

2011-01-13 17:58  keesblom

	* Fixed problems w. TableViews and removed the FIRST_ITEM hack.

2011-01-13 15:36  keesblom

	* Fixed 'selectNextItem' s.t. it always does something 'reasonable'
	  and that a 'current Playlist' is always defined.

2011-01-13 13:47  keesblom

	* Repaired code s.t. Welcome can be played from the Settings pane.

2011-01-13 02:34  keesblom

	* Added settings/prefs for HUD autoHide/shortLongTap and
	  implemented the former.

2011-01-12 22:25  jackjansen

	* Added a class AmbulantContainerView for the container view

2011-01-12 17:33  keesblom

	* Some cleanup in recently modified code.

2011-01-12 15:39  keesblom

	* Image data for thumbnails is now loaded and stored as NSData, and
	  converted to CGImage at the moment it is shown. This makes the
	  tableViews as well as the saving/restoring preferences quite a
	  lot faster.

2011-01-12 11:57  keesblom

	* Added interactivly re-arranging Favorites in 'Edit' mode.

2011-01-11 16:48  keesblom

	* AVFoundation video now works. Does not work sometimes when
	  restarted from node (when iAmbulant was stopped).

2011-01-11 16:20  keesblom

	* Added AVFoundation video (does not work yet). Fixed crash
	  protection.

2011-01-11 15:55  jackjansen

	* Ambulant view doesn't show when not shown at startup

2011-01-11 14:29  jackjansen

	* Previous checkins on a branch, accidentally. Moved to trunk.

2011-01-11 00:05  jackjansen

	* Got started on HUD for fullscreen mode

2011-01-10 23:12  jackjansen

	* Fiddling with look and feel

2011-01-10 22:10  jackjansen

	* Added missing resource files from exp-jack-cg-topleft branch

2011-01-10 15:55  keesblom

	* Merged with exp-jack-cg-topleft-working. PanZoom now works
	  properly and its animation is much faster.

2011-01-10 11:23  keesblom

	* Added a method 'drawTestRect:(CGRect)rect'. Helpful when
	  debugging image drawing.

2011-01-06 21:51  jackjansen

	* Added the old crop code again, in ifdefs

2011-01-06 21:43  jackjansen

	* Fixes for Mac CG player

2011-01-03 23:57  jackjansen

	* Partial fix for non-rotation of player view: make sure the
	  AmbulantView is always the first view added to the UIWindow

2011-01-03 17:39  jackjansen

	* Debug code

2011-01-03 17:20  keesblom

	* Some settings changed by Jack on Kees' machine.

2011-01-03 16:10  jackjansen

	* Missed checkin: patch for SDL on iPhone

2011-01-03 00:09  jackjansen

	* Fixed strange glitch with project file (dylibs lost their
	  extension)

2011-01-02 00:07  jackjansen

	* Allow rotation of aux views on iPad, not on iPhone. Unfortunately
	  I seem to have broken player view rotation

2010-12-31 14:45  jackjansen

	* More iPad tweaks

2010-12-31 14:39  jackjansen

	* Fixed positioning and such so it looks good on both iPhone and
	  iPad

2010-12-31 00:38  jackjansen

	* Forgot to fix prefs view. Also moved three preference properties
	  to app delegate

2010-12-31 00:28  jackjansen

	* Baby steps for iPad port

2010-12-31 00:01  jackjansen

	* Got rid of dead code

2010-12-30 23:59  jackjansen

	* Got rid of most properties

2010-12-30 23:04  jackjansen

	* Next step in grand restructuring: most communication between the
	  views now goes via the AmbulantAppDelegate. This should enable
	  (later) to use completely different implementations of a view,
	  because the internals are no longer known to other views.

2010-12-29 18:02  jackjansen

	* Next step in modifying startup sequence. Lots of initializations
	  are done in awakeFromNib. Additionally, the document to play (or
	  view to show) is determined in applicationDidBecomeActive. This
	  has the advantage that any HandleOpenURL call has happened, so we
	  don't open multiple documents in this case.

	  What still remains to be done is have the view controllers
	  communicate through the app delegate.

2010-12-29 17:50  keesblom

	* Revised stopping/destruction of cg_avfoundation (removal of the
	  player_layer)

2010-12-29 00:15  jackjansen

	* When the player view comes forward we _always_ start playing

2010-12-29 00:10  jackjansen

	* Removed some dead wood, commented on some other methods

2010-12-28 23:47  jackjansen

	* Preparing for a better startup scheme (where we initialize only
	  the things we need).

	  Step 1 - get rid of most properties in favor of a method-based
	  scheme for the AmbulantViewController. May have broken some
	  things, to be fixed later.

	  Additionally, we record the fact that we have finished viewing
	  the whole presentation (so we don't restart on next application
	  launch at the very last beat of the app).

2010-12-28 23:45  jackjansen

	* Got rid of debug.

2010-12-27 12:02  jackjansen

	* Changed code for remembering the last node played (for restarting
	  on application restart) to something much simpler, but kept the
	  old code in there, for the time being.  Also, zero out the last
	  node played when the presentation ends.

2010-12-23 17:17  keesblom

	* Removed some junk code and fixed some leaks

2010-12-23 17:17  jackjansen

	* More bits and pieces to use cglayer for redrawing, to help
	  animation.  The good news: it is about 10 times faster.  The bad
	  news: it is incorrect.

	  :-)

2010-12-23 17:02  keesblom

	* Fixed a leak caused by moving code into awakeFromNib()

2010-12-23 16:48  jackjansen

	* Added missing retain calls, which caused various crashes in open
	  url dialog

2010-12-23 01:59  jackjansen

	* Getting started on using CGLayer to optimize animation.

2010-12-23 01:58  jackjansen

	* Allow ambulant: urls

2010-12-23 01:37  keesblom

	* Fixed a prblem w. native video renderer when restarted at the 2nd
	  or 3rd Birthday video.

2010-12-23 00:26  jackjansen

	* Made center/resize default

2010-12-22 23:34  jackjansen

	* Got rid of NSMutableString and added some comments to member vars

2010-12-22 17:25  jackjansen

	* Added some hooks for debugging startup sequence

2010-12-22 16:41  jackjansen

	* For debug uilds, there is now the option of doing all logging to
	  the system console (through syslog(3)). This enables some
	  debugging of the startup sequence through logger calls.

2010-12-22 16:40  jackjansen

	* Added _DEBUG and NDEBUG defines to the targets

2010-12-22 14:52  keesblom

	* Removed temporary links to smil demo's now that start from
	  website works.

2010-12-21 17:17  jackjansen

	* Version for 2.3.20101221 distribution

2010-12-21 17:14  keesblom

	* Added code to silently skip additions to Favorites that are
	  already there, based on comparing url's

2010-12-21 16:52  jackjansen

	* Added "doesn't run in background" flag to plistfile.	Added
	  startup image (which for the time being includes the version
	  number).

2010-12-21 15:01  jackjansen

	* - Don't switch to favorites view when adding a new favorite.	-
	  Created a document where we can collect the UI design questions
	  we want to ask.

2010-12-21 14:41  keesblom

	* Tables looked ugly after adding awakeFromNIB:..., because ther a
	  view property was set while probably the view was not yet
	  established.

2010-12-21 14:34  jackjansen

	* Auto-hide the hud control panel after 5 seconds

2010-12-21 14:18  jackjansen

	* Double-tap is now "auto-zoom". It will switch between zooming to
	  natural size and zoom to fullscreen. Zoom-to-region should be
	  added at a later stage.

2010-12-20 23:43  jackjansen

	* Attempting to fix zoom behaviour so the anchorpoint is in the
	  middle of the two fingers used for zooming. Based on Apple
	  example from
	  <http://developer.apple.com/library/ios/#samplecode/Touches/Listings/Touches_GestureRecognizers_Classes_MyView_m.html>
	  but with one change: at the end of the zoom we reset the
	  anchorpoint back to the center of the layer.

2010-12-20 23:16  keesblom

	* Added some refinements on cleanup. No leaks. No crashes, except
	  sometimes in ~critical_section, but this one will not happen in a
	  Release build.

2010-12-20 14:00  jackjansen

	* Moved some of the init code for PresentationViewController from
	  viewDidLoad: to awakeFromNib. This has the effect that "add to
	  favorites" now works even before the favorites view has loaded.

	  Need to check other initialization code too.

2010-12-20 13:39  jackjansen

	* Fiddling with the resize code

2010-12-20 13:05  jackjansen

	* Slightly tweaked for better viewability

2010-12-20 00:37  jackjansen

	* First iPhone ad-hoc distribution on ambulantplayer.org

2010-12-20 00:34  jackjansen

	* Adding itunes artwork and an icon that shows up correctly in
	  iTunes for ad-hoc distribution

2010-12-20 00:31  jackjansen

	* Changed default for scale/center

2010-12-18 15:58  keesblom

	* Completely revised native video impl. All video's in Birthday now
	  finanaly do play. Revision is halfway, video's do repeat i.o.
	  terminate on EOF, and lots of leaks.

2010-12-17 21:19  keesblom

	* ~Turned of crash protection in debugging mode

2010-12-17 14:54  jackjansen

	* Implemented ambulant: URL scheme for gtk and qt player, and
	  install the hook

2010-12-17 13:28  jackjansen

	* New xulrunner version

2010-12-17 11:13  jackjansen

	* Tweaking the 3pp build process so it doesn't rebuild if not
	  needed

2010-12-17 10:49  jackjansen

	* Check that essential commands (make, pkg-config, etc) are
	  available.

2010-12-17 00:12  jackjansen

	* Allow two schemes for ambulant: urls, either replacing http: or
	  augmenting any url scheme.

2010-12-16 23:18  jackjansen

	* Enable ambulant: URLs in player, and register them in the
	  installer.

2010-12-16 21:51  jackjansen

	* Implemented ambulant: uri scheme

2010-12-16 15:44  jackjansen

	* Adapted for the move of the config files

2010-12-15 17:32  jackjansen

	* Fixed poster image display in history

2010-12-15 17:08  keesblom

	* Implemented the 'Next' button

2010-12-15 17:05  jackjansen

	* Added poster images and descriptions for iPhone.

2010-12-15 14:33  keesblom

	* Removed ambulant::iOSpreferences from cg_gui.mm and expanded the
	  signature of adaptDisplayAfterRotation with 2 booleans instead.

2010-12-15 13:50  jackjansen

	* Added post and description (for iPhone, initially)

2010-12-15 12:11  jackjansen

	* Minor tweaks to get things to compile and build again

2010-12-15 00:12  jackjansen

	* Build-and-archive also seems to work

2010-12-14 23:51  jackjansen

	* Everything works, both for simulator and device

2010-12-14 23:50  jackjansen

	* Temporary script to merge iPhone and iPhone-Sim
	  third_party_packages into a fat 3pp directory

2010-12-14 21:59  jackjansen

	* iPhone app project starts to work (simulator only)

2010-12-14 17:37  jackjansen

	* Fixed a problem with DESTROOT being set

2010-12-14 17:06  keesblom

	* Made the 'Restart' button work.

2010-12-14 14:20  jackjansen

	* Minor fixes for builing libambulant for all platforms

2010-12-14 14:05  jackjansen

	* - Moving configfiles to a subdirectory - Making progress with
	  building for iOS.

2010-12-14 00:07  jackjansen

	* Fixed up building of iOS 3pps"

2010-12-13 23:53  jackjansen

	* Fixed armv6/armv7 confusion

2010-12-13 23:49  jackjansen

	* Changed pathnames for some files

2010-12-13 23:48  jackjansen

	* Building for iOS no longer requires version to be passsed in
	  argument: this is picked up from IPHONEOS_DEPLOYMENT_TARGET,
	  which has to be set anyway. Also done for the live patches.

2010-12-13 22:25  jackjansen

	* Unfinished third-party-packages xcode wrapper

2010-12-13 16:54  jackjansen

	* Creating wrapper project around building the third party packages

2010-12-13 16:46  keesblom

	* Added some missing/moved files

2010-12-13 13:52  jackjansen

	* Static library build works

2010-12-13 12:19  jackjansen

	* Getting started on static library target

2010-12-13 10:47  jackjansen

	* Fixed GC project dependency

2010-12-13 10:38  keesblom

	* Added a 'Play' button replacing the 'Pause' button in the Control
	  Panel whenever the playeris paused or stopped.

2010-12-13 00:04  jackjansen

	* Added targets for CG builds of ambulant

2010-12-12 22:48  jackjansen

	* Fixing project for current state of sources

2010-12-12 22:22  jackjansen

	* Fix (workaround?) for new SDL.

2010-12-12 22:21  jackjansen

	* Added get_xpath() method.

2010-12-12 21:42  keesblom

	* Changed the Gesture controllers s.t. tap (de)selects control
	  panel, double tap or longpress selects a smil element in the
	  player view. I prefer 'LongPress'.

2010-12-10 23:03  keesblom

	* Made launch by Safarie e.a. work again. Added GLOB_DBG to trace
	  this. Removed some retired code fragments. Native video now also
	  works with <param name=renderer .../>

2010-12-09 23:29  keesblom

	* Fixed some leaks, mainly in the new code for History/Favorites

2010-12-09 22:58  keesblom

	* Tweaked layout of HUD

2010-12-08 17:42  keesblom

	* Removed first implementation of Add Favorites.

2010-12-08 16:27  keesblom

	* Added 'Favorites' button to the HUD and made it work.

2010-12-08 12:08  keesblom

	* Added a line separator between table entries in History/Favorites

2010-12-07 15:15  keesblom

	* Patched the crash recovery code. Player now plays Welcome (from
	  bundle) after a crash, from there everything works as usual.

2010-12-07 01:03  keesblom

	* Added crash protectio. Fixed a bug in History display: when an
	  item from Favorites (or History) was selected this was not shown.

2010-12-06 17:23  keesblom

	* Renamed PlaylistViewController into SettingsViewController

2010-12-06 17:20  keesblom

	* Renamed PlaylistViewController into SettingsViewController

2010-12-06 17:16  keesblom

	* Functional complete player with InsertButtons in Favorites
	  selectable by 3-fold tap on Edit

2010-12-03 16:00  keesblom

	* Added AmbulantHelp-iOS.html. This is part of the 'Help' GUI and
	  an example how one could write 'html' for iOS.

2010-12-03 15:54  keesblom

	* Added 'Back' and'Done' buttons for 'Help' tabbar item. Maybe the
	  last visual GUI element to be added.

2010-12-03 14:53  keesblom

	* Invoke Safari to show weblinks from a .smil file.
	  AmbulantViewContoller is now re-used fror implementing help.

2010-12-03 14:41  keesblom

	* Added implementations for 'Favorites' and 'Help' tabbar items.
	  GUI is now almost complete, but there are a lot of bugs.

2010-12-01 23:29  keesblom

	* Added an "Edit" tab to enter an URL manually.

2010-11-30 15:12  keesblom

	* Started towards a 'final' GUI. When HUD appears and 'Lists...' is
	  selected,  AmbulantPlayer fades in favor of the last selected
	  TabbarItem. Only History and Setting work, less of more.

2010-11-26 14:40  keesblom

	* Adapted for 4.2. Added an initial HUD, with images from VLC

2010-11-23 15:11  jackjansen

	* Added /usr/X11/lib

2010-11-22 01:51  keesblom

	* Fixed leaks in demux_audio_datasource: all data buffers in
	  packets dropped by seek() were leaked

2010-11-21 00:21  keesblom

	* Got rid of some leaks

2010-11-19 21:46  keesblom

	* Fixed a bug in Delete from History (wrong item ws deleted).

2010-11-19 16:42  keesblom

	* Added a secret "Delete" button in the History, activates on
	  "swipe"

2010-11-19 15:11  keesblom

	* Some small bugs and files moving around

2010-11-18 10:19  jackjansen

	* Regenerated

2010-11-17 17:46  keesblom

	* Added a longPress gesture recognizer to hide/unhide the player
	  controls. Needs testing.

2010-11-17 12:55  keesblom

	* Poster image save/restore now works

2010-11-16 23:24  keesblom

	* Added code to display a custom icon (from <meta name="poster") in
	  the history list. Partly works.

2010-11-15 23:56  keesblom

	* Now using meta tags title, description and dur from the smil file
	  in PlayListItems

2010-11-15 15:35  jackjansen

	* Merging branch experimental-jack-win-rgba.

	  By default, Ambulant now builds with support for Direct2D
	  graphics, but there are separate targets to build a
	  DirectDraw-based ambulant.

	  D2D Ambulant is not feature-complete yet: trnasitions and parts
	  of smiltext still need to be implemented.

2010-11-15 11:40  jackjansen

	* Added "DX" versions of the projects (preparing for D2D merge)

2010-11-15 11:06  jackjansen

	* Fixed minor issues with win7 building and new code by Kees.

2010-11-14 22:24  keesblom

	* Added code to player save state when ApplicationWillTerminate is
	  called

2010-11-12 16:12  keesblom

	* Added a debug() line to support chasing #3107960

2010-11-12 11:33  keesblom

	* Fixed compile problem.

2010-11-11 17:06  keesblom

	* Changed node interface: get_path_display_desc() renamed to
	  get_xpath() producing an xpath string that can be used in
	  locate_node(). player_iphone now resumes where it was left

2010-11-09 13:31  keesblom

	* Added (superfluous) code to find all nodes still active on player
	  stop

2010-11-09 10:23  keesblom

	* Rationalized item selection from history to take actual values
	  from the history itself (which has all relevant info)  rather
	  than the presentation on screen.

2010-11-08 17:07  keesblom

	* Made Select from History crash-free and leak-proof

2010-11-05 16:33  keesblom

	* Select from history now sometimes works, but mostly crashes. Need
	  to completely seperate Preference Settings and Document
	  Selection.

2010-11-05 15:07  keesblom

	* History implementation is now leak proof.

2010-11-04 15:31  keesblom

	* Improved History list font settings (PresentationTableCell.xib)

2010-11-04 13:28  keesblom

	* Added the other files used for History

2010-11-03 23:04  keesblom

	* Added history. Works, but this checkin is incomplete.

2010-10-28 11:59  keesblom

	* set default to ffmpeg, for the time being

2010-10-28 11:03  keesblom

	* Modified iOS dist. note for the new beta distr. directly on the
	  device, without iTunes.

2010-10-28 11:00  keesblom

	* Fixed a bug s.t. only video's with a specified dur or clipEnd
	  spec. could be played

2010-10-22 17:09  keesblom

	* Added a new "Distribution" configuration for the Device for
	  beta-testing

2010-10-22 17:01  keesblom

	* Added a new "Distribution" configuration for the Device for
	  beta-testing

2010-10-22 11:41  keesblom

	* Removed Documents from the bundle to make it smaller and adapted
	  the temp. GUI

2010-10-19 16:00  keesblom

	* Renamed mainloop.cpp to mainloop.mm but forgot to do this in CVS
	  as well

2010-10-18 16:50  keesblom

	* Some final tweaks for mative video and made Safari launch work
	  again

2010-10-13 15:42  keesblom

	* Changed obsever management for avplayer details

2010-10-12 00:24  keesblom

	* Moved the cg_preferences from gui/cg to player_iphone

2010-10-12 00:20  keesblom

	* iPhone player now starts with the last file played, initially
	  Welcome.smil from the bundle.

2010-10-11 17:14  keesblom

	* Fixed a bug that caused the player to pla the previous item when
	  a new one was typed.	Made the native video implementation more
	  stable (less crashes/deadlocks) and added some documentation.

2010-10-08 13:50  keesblom

	* Lot of cleanup. Some GUI related actions moved to main dispatch
	  queue. No simultaneous video's error added. Now fairly stable
	  implementation.

2010-10-06 15:04  keesblom

	* Add persistent preferences in tnp. GUI. Native video now works
	  reasonably well.

2010-10-03 23:02  jackjansen

	* Implemented WICimage rendering for non-local URLs.

2010-10-01 17:40  jackjansen

	* WIC renderer works, for local images.

2010-10-01 14:00  keesblom

	* Attempt with static pool of AVPlayers; hangs w. 2 video's in
	  <par> on device. Going back to single static player, prohibiting
	  simultaneous video's

2010-10-01 00:54  jackjansen

	* Bits and pieces.

2010-10-01 00:29  jackjansen

	* Added boilerplate code for WIC image renderer. Currently
	  disabled.

2010-10-01 00:04  jackjansen

	* Added a note that DirectX SDK Feb 2010 is the last one to work.

2010-09-29 17:43  keesblom

	* Attempt to make cg_avfoundation_video work with self-managed
	  AVPlayerItem, alas ! did not work

2010-09-28 15:36  keesblom

	* Added the source of a test that is appended to #3077135

2010-09-23 16:03  keesblom

	* cg_avfoundation_video renderer now has clip_end, get_dur and EOM
	  detection, and can handle mulitple video's in par/seq. But alas!
	  it craches/hangs when played a second time, giving up why...

2010-09-14 15:09  keesblom

	*
	  cg_avfoundation_viedo_renederer now plays video at the correct
	  position.  Play, pause and stop work. Also clipBegin works.

2010-09-10 14:22  keesblom

	* First video fragment seen w. AVFoundation and sound too.

2010-09-09 17:33  keesblom

	* Started native video renderer (AVFoundation) on iPhone. Now video
	  doesn't work anymore

2010-09-08 16:19  keesblom

	* Added a check for animation in CG smiltext and tested for
	  attributeName="top"

2010-09-06 17:20  keesblom

	* Added a note aboout cases where an optimization is incorrect

2010-09-06 13:41  keesblom

	* Fixed cg_smiltext layout optimization and made cg_smiltext
	  leak-free.

2010-09-05 02:04  keesblom

	* Added optimization to layout a cg_smiltext frame once after
	  change

2010-09-05 02:00  keesblom

	* Avoiding some assert's that may happen on iPhone when player
	  stops

2010-09-04 21:48  keesblom

	* Added textFontSize="medium" as defined in SMIL 3.0 par.8.4.1

2010-09-02 23:43  keesblom

	* smiltext on iPhone now works properly with crawl and scroll

2010-08-30 21:45  keesblom

	* test if chechin msgs work

2010-08-30 17:32  keesblom

	* Implemented textRate='auto' for scroll (CG-iPhone)

2010-08-26 21:47  keesblom

	* cg_smiltext now also works on AmbulantPlayer-MAC

2010-08-26 14:14  keesblom

	* Adapted smiltext.cpp not to crash player in Release mode (assert
	  disabled)

2010-08-26 12:23  keesblom

	* Simplified cg_smiltext by eliminating some ugly code. It has no
	  leaks in NYC-Smiltext.smil

2010-08-24 14:59  keesblom

	* Added m_font_descr_cache. cg_smiltext_renderer on iPhone is now
	  free of leaks with NYC-Smiltext.smil

2010-08-23 15:14  keesblom

	* First quickly hacked implementation for scroll and crawl on
	  iPhone

2010-08-22 01:05  keesblom

	* Added smilText textStyle and textStyling on iphone

2010-08-20 23:10  keesblom

	* Font support added for iPhone smilText

2010-08-20 15:53  keesblom

	* Text foreground color attribute added for iPhone smilText

2010-08-19 14:43  keesblom

	* tev now also works

2010-08-18 17:23  jackjansen

	* Implemented a new type of plugins, statically linked plugins.
	  These aren't really plugins, but the structure is the same. They
	  are linked into the application, and register themselves through
	  a new call in the plugin engine. From here on, they function just
	  like normal plugins.

	  Used this mechanism to enable smil state in the iphone player.
	  Untested:-)

2010-08-18 14:49  keesblom

	* Added smiltext, for now without attrs, fonts, motion etc.

2010-08-18 11:36  jackjansen

	* xpath_state builds (but doesn't do anything yet)

2010-08-18 11:09  jackjansen

	* Bug fixes to environment-checking code and libxml2 build

2010-08-18 00:11  jackjansen

	* Check environment, based on what we are building

2010-08-17 23:35  jackjansen

	* Got Release builds to work for both iphone and simulator.

2010-08-17 16:38  jackjansen

	* Refer to new location for mainloop.{c,h}

2010-08-17 16:14  keesblom

	* Added some missing (tmp.) files to the repository

2010-08-17 14:59  keesblom

	* Removed -O4 flag

2010-08-16 21:59  keesblom

	* Rewrote/cleanup pan/zoom for iPhone

2010-08-10 13:27  keesblom

	* made compiler flags more equal to those used in the porject in an
	  attempt to get rid of crash in static initializers

2010-08-09 22:37  keesblom

	* Added -mcpu=arm1176jzf-s to match ffmpeg compile options. Got rid
	  of crash on Device in static initialization.

2010-08-09 17:50  keesblom

	* Added changes for iphone

2010-08-09 17:48  keesblom

	* Added player_iphone xcode project

2010-07-29 14:01  keesblom

	* Finishing touches for auto-centering

2010-07-28 17:48  keesblom

	* 3pp build now wordks automically for device and simulator.

2010-07-28 13:39  keesblom

	* Some comment changes

2010-07-28 11:58  keesblom

	* Added method adaptDisplayAfterRotation for iPhone

2010-07-27 17:13  keesblom

	* Added automatic frame size adaption on rotating. Almost works,
	  maybe only need call to redraw() somewhere

2010-07-26 15:19  keesblom

	* Improved cleanup with Instruments

2010-07-24 21:13  keesblom

	* Changed for iPhone, were tapping also starts to work.

2010-07-14 00:23  keesblom

	* Tweaks

2010-07-13 17:46  keesblom

	* Attempt to build 3pp for iPhone Device and iPhone Simulator using
	  the proper SDK's

2010-07-08 15:51  keesblom

	* Added some lines to make AmbulantPlayer start on iPhone, #ifdef'd
	  WITH_IPHONE

2010-07-06 16:37  keesblom

	* Use UIGraphicsGetCurrentContext() to get the proper context
	  (works on iPhone)

2010-07-05 10:49  jackjansen

	* Cater for nightly scripts not being executable

2010-07-05 03:19  jackjansen

	* Detail

2010-07-05 02:40  jackjansen

	* Typo

2010-07-05 00:11  jackjansen

	* More workarounds for Windows problems

2010-07-04 23:53  jackjansen

	* Work around bug in Visual Studio with too long pathnames

2010-07-04 03:35  jackjansen

	* Third fix to windows tpp builds

2010-07-04 03:21  jackjansen

	* Second fix to windows tpp builds

2010-07-04 03:10  jackjansen

	* Sigh, another microfix.

2010-07-04 03:10  jackjansen

	* First fix to windows tpp builds

2010-07-04 03:05  jackjansen

	* fixed build-third-party-packages call.

2010-07-04 02:49  jackjansen

	* Detail

2010-07-04 02:47  jackjansen

	* Temporary fix for unzip program

2010-07-04 02:21  jackjansen

	* vsnprintf fix was incorrect. fixed.

2010-07-04 02:17  jackjansen

	* Build in build-3264 subdir

2010-07-02 01:03  jackjansen

	* Getting started on 3pp build for Windows. Untested

2010-07-01 15:48  jackjansen

	* Use -P option for checkout

2010-07-01 13:10  jackjansen

	* Use ssh for cvs

2010-06-30 15:13  jackjansen

	* More changes to nightly scripts

2010-06-30 15:00  jackjansen

	* Donot close on error

2010-06-30 14:43  jackjansen

	* More tweaks to scripts

2010-06-30 13:43  jackjansen

	* More crontab debugging

2010-06-30 11:53  jackjansen

	* Debugging crontabs

2010-06-29 23:45  jackjansen

	* Add indication of where things are built

2010-06-29 23:36  jackjansen

	* send mail to the developers

2010-06-29 23:33  jackjansen

	* Adding crontab scripts

2010-06-29 23:25  jackjansen

	* Check availability of chrpath

2010-06-29 23:25  jackjansen

	* Got rid of old platforms

2010-06-29 22:47  jackjansen

	* Getting rid of some more wince references

2010-06-29 22:38  jackjansen

	* iDo source distribution first.

2010-06-28 15:41  jackjansen

	* More cleanup: unifying methods, getting rid of xxx comments

2010-06-28 14:24  jackjansen

	* 32-64 bit warnings squashed

2010-06-28 14:11  jackjansen

	* Fixed Linux warnings, mainly debug statements (removed) and
	  unused empty class declarations (removed).

2010-06-28 11:54  uid33605

	* Sigh. Manually define INT64_C, if needed

2010-06-28 11:52  jackjansen

	* Also need to define __STDC_CONSTANT_MACROS

2010-06-28 11:48  jackjansen

	* Added stdint.h include, to work around avformat.h issue

2010-06-25 12:40  jackjansen

	* Last batch of Windows warnings bites the dust.

2010-06-25 11:03  jackjansen

	* More warnings squashed, mainly warnings about const strings

2010-06-25 10:08  jackjansen

	* Getting rid of deprecated ffmpeg constructs

2010-06-25 01:26  jackjansen

	* Squashing more warnings.

2010-06-24 23:53  jackjansen

	* More compiler warnings squashed

2010-06-24 17:05  jackjansen

	* More integers converted to size_t

2010-06-24 17:02  jackjansen

	* More integers converted to size_t

2010-06-24 16:21  jackjansen

	* Made stuff cleaner for 64bit by using size_t in stead of int in
	  lots of places.  Also cleaned up bits of dead wood that this
	  exercise revealed.

2010-06-24 00:15  jackjansen

	* - Got rid of some very old ffmpeg workarounds - Started on
	  rationalizing the ifdefs.

2010-06-23 23:59  jackjansen

	* Getting rid of FFMPEG_SUPPORTS_ALPHA_LAST, which was used for
	  doing manual byteswaps: - ffmpeg now supports this, and - we
	  don't do any big-endian machines anymore.

2010-06-23 23:48  jackjansen

	* Fixed problem debugging statically-built Ambulant with XCode.
	  Issue was appname/plist mismatch

2010-06-23 15:54  jackjansen

	* Getting rid of Osso, Hildon and DBus references

2010-06-23 15:37  jackjansen

	* Get rid of GTK_NO_FILEDIALOG define

2010-06-23 15:24  jackjansen

	* Getting rid of old compat stuff

2010-06-22 23:24  jackjansen

	* Getting rid of WinCE/Windows Mobile

2010-06-22 22:40  jackjansen

	* Rationalized some include guards

2010-06-22 16:52  jackjansen

	* Getting rid of various #if 0 and #if 1

2010-06-21 15:07  jackjansen

	* Getting rid of vs2003 files

2010-06-21 15:03  jackjansen

	* Getting rid of Zaurus (sic) files

2010-06-21 14:56  jackjansen

	* Getting rid of WinCE files

2010-06-21 13:46  jackjansen

	* Getting rid of WinCE-specific files

2010-06-17 17:03  jackjansen

	* Fix to Kees' iPhone mods

2010-06-17 16:39  jackjansen

	* More spaces converted to tabs

2010-06-17 16:22  keesblom

	* Built all 3pp for iPhone using modified build script and
	  hand-crafted actions described in comment int the script. Not
	  tested.

2010-06-17 16:04  jackjansen

	* More spaces converted to tabs

2010-06-14 23:59  jackjansen

	* Tab/space fixing

2010-06-14 16:18  jackjansen

	* More tabs and spaces.

2010-06-14 08:16  jackjansen

	* More whitespace

2010-06-12 14:54  jackjansen

	* More space/tab fixes

2010-06-11 11:46  jackjansen

	* More tabs/space conflict resolution

2010-06-11 11:38  jackjansen

	* More tabs/space conflict resolution

2010-06-11 11:20  jackjansen

	* More tabs/space conflict resolution

2010-06-11 11:16  jackjansen

	* Added command line processing

2010-06-11 08:10  jackjansen

	* More space-to-tab conversion

2010-06-10 15:53  jackjansen

	* Getting rid of space-based indentation

2010-06-10 13:54  jackjansen

	* Got rid of trailing whitespace

2010-06-10 13:32  jackjansen

	* More fixing of bad indentation

2010-06-09 17:15  jackjansen

	* Getting started on indentation cleanup: all sources are now tab
	  or 4-space indented.

	  Also merged last microfix from 2.2 branch

2010-06-08 16:07  jackjansen

	* Getting started on a script to test/fix C++ indentation

2010-06-07 14:49  jackjansen

	* Merging 2.2 branch

2010-05-27 16:31  jackjansen

	* Updated.

2010-05-27 16:15  jackjansen

	* Merging 2.2 branch

2010-05-07 10:10  jackjansen

	* Merging recent changes from 2.2 branch

2010-04-01 21:53  jackjansen

	* Tweaks to enable building Debian packages

2010-04-01 21:53  jackjansen

	* Our xerces mirror has gone, replaced by another one

2010-04-01 21:51  jackjansen

	* Fixes to enable building of Debian packages: -
	  with_ambulant_shared_lib is now always true (for dynamic builds)
	  - live555 can be picked up from a system-wide install - expat can
	  be picked up from a system-wide install

2010-04-01 21:45  jackjansen

	* autogen.sh was missing from source distributions

2010-03-30 16:35  jackjansen

	* Fixed some issues, script now works

2010-03-30 11:41  jackjansen

	* Mass checkin: merging 2.2 release branch again

2010-03-29 17:19  jackjansen

	* First stab at build script for Linux. Unfinished.

2010-03-29 15:34  jackjansen

	* - xulrunner wasn't included (for Linux) - exit status wasn't
	  correct.

2010-03-29 11:32  jackjansen

	* - live patch was referred to by incorrect pathname - xerces now
	  needs 3.1.0.

2010-03-27 17:35  jackjansen

	* More stuff for nightly builds.

2010-03-27 17:34  jackjansen

	* Tweaks, to enable automatic nightly builds.

2010-03-24 23:45  jackjansen

	* Also build webkit plugin.  Also build and upload installers.

2010-03-24 22:25  jackjansen

	* After some serious hacking, creating the installer DMG now no
	  longer requires manual intervention.

2010-03-24 12:03  jackjansen

	* Minor changes

2010-03-24 11:59  jackjansen

	* Reverted bogus checkin.

2010-03-24 11:54  jackjansen

	* Getting started with nightly build scripts.

2010-03-23 13:16  jackjansen

	* - Add rtsp support to xcode project builds - Add rtsp factories
	  to Python interface

2010-03-22 15:32  jackjansen

	* New location of repr(), outside namespaces.

2010-03-22 14:59  jackjansen

	* Tweaks

2010-03-22 11:34  jackjansen

	* Fixed bug in the way recursive folders (welcome, dtdcache) were
	  handled.

2010-03-22 11:29  jackjansen

	* Dependencies on sub-projects were missing. Apparently adding the
	  "target" flag on the subproject product only isn't good enough:
	  you must also add it to the "direct dependencies" tab of the main
	  project.

2010-03-18 23:42  jackjansen

	* Getting started on complete XCode project structure for building
	  Ambulant, completely with dylibs, plugins, etc.

2010-03-18 21:40  jackjansen

	* Rationalizing some things to enable nested Mac projects and use
	  of precompiled headers (these should help with iPhone
	  development, among other things):

	  - repr() is always defined at the outer scope, so overloading
	  works - some headers included by "" in stead of <> - binary name
	  of Mac framework changed

2010-03-15 16:54  jackjansen

	* If WITHOUT_DIALOGS is defined (which it is for Ta2): - Don't show
	  messagebox dialogs - Go to fullscreen on startup.

2010-03-12 12:22  stevents

	* Remove compiler warning under Windows VS2008.

2010-03-11 16:12  jackjansen

	* Fixed the way the directx surface is created, so we can have
	  documents larger than the screen size.  Give only one error
	  dialog for invalid rect coords.  Be a bit more forgiving if
	  things have disappeared while shutting down.

2010-03-05 14:02  jackjansen

	* Adding support for ostream, so we can grab logger output in
	  Python.

2010-02-24 16:27  jackjansen

	* The log-level preference was completely ignored on windows,
	  fixed.

	  Backport candidate.

2010-02-03 15:37  jackjansen

	* Added a trace log if a SMIL State string expression refers to
	  anything other than 1 XML node. Should stop some pulling of
	  hairs...

2010-02-03 13:09  jackjansen

	* Python interface changes for previous checkin.

2010-02-03 10:47  jackjansen

	* - AVT fixes were incomplete for windows: there the runtime
	  (rightfully) complains   if you return the c_str() of an auto
	  std::string. Had to adapt a few interfaces for this.	- Added a
	  few AMBULANTAPIs

2010-02-02 17:18  jackjansen

	* Merging the branch again: I also need the pyambulant changes.

2010-02-02 17:00  jackjansen

	* Implemented dynamic notification of updates to AVT-based
	  attributes, at least for layout-related attributes.  This has the
	  effect that SMIL State updates to things like panZoom and layout
	  can be done dynamically (while a media object is being rendered).

2010-02-02 16:56  jackjansen

	* Merging 2.2 branch to the trunk (again, because I stupidly made
	  some changes on the branch that I need on the trunk).

2010-01-31 01:23  jackjansen

	* Modified fullscreen view to be true fullscreen: without any
	  border or taskbar.

2010-01-31 00:31  jackjansen

	* Merging changes from release-ambulant-22-branch: I need some of
	  them for Ta2.

2010-01-12 16:33  keesblom

	* Found bug in npp_gate.cpp after 3 weeks causing firefox to crash.

2009-12-14 23:39  jackjansen

	* Upped version number to 2.3.

2009-12-14 23:25  jackjansen

	* Changed pathnames.

2009-12-14 23:18  jackjansen

	* Updated translations.

2009-12-14 23:00  jackjansen

	* - Updated version numbers to 2.2.  - Updated year to 2009.  -
	  Updated various readme files and such.

2009-12-14 22:13  jackjansen

	* Getting rid of debug output.

2009-12-14 16:34  keesblom

	* Removed an assertion that has been turned on/off repeatedly. The
	  condition appears to be triggered when get_data() is called from
	  sdl_callback() while the object has been deleted in another
	  thread.

2009-12-11 11:56  jackjansen

	* iUpdated to current versions.

2009-12-10 15:39  jackjansen

	* Line ending mixup: there are text files, but they had windows
	  line endings.

2009-12-10 15:37  jackjansen

	* Line endings were mixed up: these are text files (according to
	  CVS) but they had Windows crlf line endings on Unix.

2009-12-10 15:33  jackjansen

	* smil_player termination code (from the mainloop) was
	  inconsistent.  Fixed.

2009-12-10 14:55  jackjansen

	* Partial fix for #2908167: Allow finding cache entries by publicId
	  as well as systemId.	The public IDs are globally unique, so this
	  also works for modules that have the same systemId in SMIL 2.0
	  and SMIL 3.0.

2009-12-09 23:01  jackjansen

	* Removed debug.

2009-12-09 13:28  keesblom

	* Added protection and a check for m_player != NULL in restart().
	  This can happen if first parsing fails, and after modification
	  and File-Reload the parsing succeeds, then there is no active
	  player.

2009-12-09 12:27  keesblom

	* Removed the DTD specification as this is incompatable with
	  SmilState

2009-12-07 14:43  jackjansen

	* We need at least Windows XP, and IE 6.

2009-12-06 23:45  jackjansen

	* Class params is part of the official API.

2009-12-06 23:25  jackjansen

	* Added missing delete of params.

2009-12-06 22:10  jackjansen

	* Added get_long() methods to smil2::params.

2009-12-03 15:21  jackjansen

	* stateChange(ref) implementation was incorrect (raising
	  marker_seen:-)

	  Fixed.

2009-12-03 14:21  keesblom

	* Fixed a leak in ffmpeg_video

2009-12-03 12:48  keesblom

	* Added a check in player_pygtk/player_pyqt to check a file exists
	  before trying to open it, to avoid a crash

2009-12-03 12:26  keesblom

	* player_pygtk.py now displays a new opened file correctly after
	  playing another

2009-12-03 12:19  bogao

	* Turn off some debug output in rtsp_demux.

2009-12-03 11:53  keesblom

	* Need to reset the document before playables are deleted

2009-12-02 17:34  jackjansen

	* Do redraws more efficiently when animating region bounds. Let the
	  parent handle it only if the new area does not completely contain
	  the old area, otherwise let the region itself handle it.

	  Fixes #2907376.

2009-12-02 15:47  keesblom

	* When opening a new file, the current smil_player is now properly
	  terminate()'d end release()'d in the glue (equiv. of mainloop)

2009-12-01 22:23  jackjansen

	* Added a get_state_engine() call to player, which obtains the
	  state component for the current document (if any).

	  Mainly for Ta2, but generally useful.

2009-12-01 22:03  jackjansen

	* libltdl was inadvertantly moved from SUBDIRS to EXTRA_DIST, which
	  caused it to not be built automatically anymore. And we never
	  noticed this because we hardly ever build from scratch.

2009-12-01 15:25  keesblom

	* set fields NULL after deletetion, should not be needed though.

2009-12-01 15:24  keesblom

	* Typo (CPP has not the same langage as bash)

2009-11-30 16:06  jackjansen

	* Export the logger interface to Python.

	  Mainly for Ta2, but generally useful too.

2009-11-30 15:58  jackjansen

	* Quick fix to make this compile on 64-bits machines.  Not sure the
	  fix is always correct, though...

2009-11-30 10:52  jackjansen

	* showBackground=whenActive fix was incomplete: if region active
	  status is changed this should also be propagated to the parent
	  region (because it could also have showbackground=whenActive, so
	  it may also need to redraw).

	  Fixes #2819571.

2009-11-30 01:16  jackjansen

	* Project didn't build anymore on 64bit. Fixed.

2009-11-30 00:05  jackjansen

	* When destroying the webkit plugin, also dealloc the mainloop.
	  Note that I'm not 100% sure which of the 3 methods called upon
	  unload is the best place to put this code...

	  Fixes #2891237.

2009-11-27 16:05  bogao

	* Fixed m4a over rtsp not work.  need to call
	  "hasBeenSynchronizedUsingRTSP()" first to make sure the
	  presentation times from live555 are accurate.  Please refer to
	  http://lists.live555.com/pipermail/live-devel/2008-July/009224.html

2009-11-27 14:31  jackjansen

	* More fixes to smil_player cleanup code: - Delete event processor
	  before timer - Delete renderers before event processor

2009-11-27 11:12  jackjansen

	* - QTDIR isn't always defined anymore. For now, assume that on
	  Linux we   always have QT.  - Fixed names for video renderer
	  factory factories.

2009-11-27 11:05  jackjansen

	* gtk_video is apparently optional.

2009-11-27 10:35  jackjansen

	* Removed superfluous "-lbz2" from ffmpeg compile flags.

2009-11-27 01:20  jackjansen

	* Fixed player_pyqt as well.

2009-11-27 01:10  jackjansen

	* create_qt_html_widget is only available depending on
	  WITH_QT_HTML_WIDGET.

2009-11-27 00:51  jackjansen

	* Working on a fix for #2900547: - Moved the declarations of the
	  gtk playable factory factory functions   to gtk_factory.h - Ditto
	  for qt factory factory functions - Adapted pyambulant generation
	  to cope with this - Adapted pygtk_player main program

	  Unfinished.

2009-11-26 12:21  keesblom

	* Added configure option --disable-assert for release builds
	  through yhe configure macro AC_HEADER_ASSERT. The add -DNDEBUG=1
	  as compiler flag.  Also adapted unix_mtsync.cpp and
	  unix_thread.cpp to use the NDEBUG for fatal error conditions.

2009-11-24 15:20  jackjansen

	* - Comment fix for ffmpeg cleanup - Micro-fix for ffmpeg-for-=rtsp
	  which may or may not be a good idea.

2009-11-24 13:47  jackjansen

	* - Made dx_player::open() more robust against missing files.  -
	  Added a few asserts.	- Generate pdb files even for release
	  binaries. This allows at least some debugging.

2009-11-24 12:35  keesblom

	* Fixed a destructor order problem causing a mutex deadlock avoided
	  assertion failure.

2009-11-24 10:32  jackjansen

	* Old checkins still sitting on my disk.

2009-11-18 15:29  keesblom

	* Made pyambulant compile and link on 64 bit linux installation

2009-11-17 11:55  keesblom

	* Free all queue'd data blocks in demux_audio_data_source.
	  Partially fixes #2883203.

2009-11-16 18:41  stevents

	* Jack here: mods to make VCE work with RTP video viewer. Should
	  (hopefully) not break anything else.

2009-11-15 15:28  jackjansen

	* Added an ifdef WITH_LTDL_PLUGINS

2009-11-12 14:01  keesblom

	* Added cleanup of plugin_engine (ingui_player) and lt_dl (in
	  plugin_engine)

2009-11-12 11:40  keesblom

	* Use memmove() instead of memcpy() because memory area overlap

2009-11-12 10:52  jackjansen

	* Fixed a deadlock: bug #2895982.

2009-11-11 16:09  jackjansen

	* Ignore import library.

2009-11-10 12:12  jackjansen

	* Deleting the event processor while holding the smil_player lock
	  can lead to a deadlock.

2009-11-09 23:28  jackjansen

	* DX continuous media player classes were (erronuously) subclasses
	  of playable. This showed up, now that playable is refcounted.
	  Removed the useless superclass.

2009-11-09 14:38  jackjansen

	* Progress! We are now including vcredist_x86 in the cab, and that
	  installs fine.

	  Still crashes on execution, though...

2009-11-09 12:29  jackjansen

	* Progress: we now get as far as a WinSxS error on installation.

2009-11-09 11:06  jackjansen

	* Use command line tool to generate index, in stead of tickling the
	  gui tool.

2009-11-09 10:45  jackjansen

	* Things are now more-or-less back at where they were for Kees'
	  efforts.

2009-11-09 00:09  jackjansen

	* Sigh. Variables are not exported to sub-scripts, so copy the
	  whole script into the project.

	  Hacked around quoting and such too. About 90% of the steps are
	  now happening.

2009-11-08 23:26  jackjansen

	* - typo in vsprops - zlib copy line fixed in copy_tpp_win32.bat -
	  if there's no id use the src attribute in node::get_sig().

2009-11-07 23:26  jackjansen

	* Getting started on IEAmbulant installer integration.

2009-11-07 23:23  jackjansen

	* Tweaks.

2009-11-07 23:16  jackjansen

	* Attempting to get IEAmbulant installer into the common build
	  process too.

2009-11-06 15:34  keesblom

	* Added the output of "arch" to the .xpi name, to avoid any
	  confusion.  The file name itself will eventually be hiden befind
	  a beautiful webpage.

2009-11-06 12:17  keesblom

	* Modified mainloops for smil_player mods to fix #2848557.  Added
	  libtool-2.2.6 in TPP to facitate building on older platforms.

2009-11-06 00:50  jackjansen

	* Obtain absolute pathname for ffmpeg source dir.  Fixes #2686036.

2009-11-06 00:43  jackjansen

	* - Updated build instructions - Revived XCode project, and added
	  ppc debug target.

2009-11-05 22:44  keesblom

	* Fixed a malloc bug

2009-11-05 17:12  jackjansen

	* Call player->terminate().

2009-11-05 16:52  keesblom

	* Firefox installer now works on 64 bit. Must configure
	  --without-xerces,

2009-11-05 14:48  jackjansen

	* A couple more little fixes were needed to get the ref_counted
	  smil_player to work.

2009-11-05 11:57  jackjansen

	* Turning smil_player and player into refcounted objects, to try
	  and fix the problem with late callbacks being made after the
	  object has been deleted.

	  Only partially tested, and needs support on qt/gtk as well.

2009-11-05 10:24  keesblom

	* Added os.path.relpath when not available.  Hopefully it works OK.
	  Fixes #2883340

2009-11-04 17:50  jackjansen

	* If WITH_SPLASH_SCREEN is defined it should be the URL of a splash
	  screen document. This is then used in stead of Welcome.smil, with
	  the difference that the document is always opened when you open
	  the player.

	  Used for embedding Ambulant in another product (the Ta2 VCE,
	  specifically).

2009-11-04 17:21  jackjansen

	* Fixes to get everything to build for 10.4 as well as 10.5,
	  ppc/intel.

2009-11-04 17:09  keesblom

	* "assert" commented because it always crashes gtk w.
	  NYC-StateTest.smil

2009-11-04 15:58  keesblom

	* Added import decl. for getopt

2009-11-03 17:26  keesblom

	* Adapted readme.txt to use ffmpeg-05 for fixing #2873715.
	  Committed on the Free edition of March Hare Software CVSNT
	  Server.  Upgrade to CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-11-03 17:25  keesblom

	* Adapted projects files to use ffmpeg-05 for fixing #2873715.
	  Committed on the Free edition of March Hare Software CVSNT
	  Server.  Upgrade to CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-11-03 16:06  jackjansen

	* Building WebKit plugin for 10.4/10.5 works again.

2009-11-03 14:27  jackjansen

	* Updated WebKit plugin build instructions and a few other things.

2009-11-03 13:48  jackjansen

	* WebKit plugin works again, at least for 10.6.

2009-11-03 13:19  keesblom

	* ffmpeg when configured without gpl/swcale now works with
	  ambulant. Fixes #2863377.

2009-11-03 11:19  jackjansen

	* WebKit plugin is starting to work.

2009-11-02 17:36  jackjansen

	* Updated instructions for 10.4 and 10.6 installers.  Got started
	  on WebKit plugin.

2009-11-02 17:18  jackjansen

	* Starting to revive the WebKit plugin.

2009-11-02 16:44  jackjansen

	* Dependencies between ambulant shared libs should now be correct.
	  MacOSX bundle is now creating during build (used to be during
	  install).

2009-11-02 15:32  keesblom

	*
	  Fix for a cryptic bug occurring on exiting AmbulantPlayer: ***
	  glibc detected *** /home/kees/bin/AmbulantPlayer_qt: double free
	  or corruption (!prev): 0x083942e0 *** ======= Backtrace:
	  ========= /lib/libc.so.6[0x5c32a1]
	  /usr/lib/libstdc++.so.6(_ZdlPv+0x21)[0xc8d681]
	  /usr/lib/libstdc++.so.6(_ZNSs4_Rep10_M_destroyERKSaIcE+0x1d)[0xc6aa9d]
	  /usr/lib/libstdc++.so.6(_ZNSsD1Ev+0x4c)[0xc6c4fc]
	  /lib/libc.so.6(exit+0xdf)[0x581e0f]
	  /lib/libc.so.6(__libc_start_main+0xee)[0x569a6e]

	  Cause appeared to be that AmbulantPlayer was statically linked,
	  whereas the plugins were linked with dynamically with
	  libambulant.

2009-10-30 23:22  jackjansen

	* Enumerated the platforms on which we should test.

2009-10-30 14:17  keesblom

	* Updated checklists for distribution.

2009-10-30 12:33  keesblom

	* Implemented mediaOpacity inside <region> tag. Fixes #2822372.

2009-10-28 11:17  keesblom

	* Make gstreamer for .wav, .mp3 work again. Fixes #2886364.

2009-10-27 17:05  jackjansen

	* These files are long dead.

2009-10-26 21:32  keesblom

	* Added more detail in the logger error message in case SDL cannot
	  initialize.

2009-10-26 13:21  jackjansen

	* Tweak for vc9.

2009-10-26 13:20  keesblom

	* Changed LD_LIBRARY_PATH s.t. our TPP libraries are preferred to
	  any otherwise installed versions

2009-10-25 23:26  jackjansen

	* Mac desktop application now also built with full shared libs.
	  This needed work in internalize_dylibs too, as the libraries
	  aren't installed yet and need to be picked up from the staging
	  area.

2009-10-23 14:12  keesblom

	* Fixed DTD mapping, s.t. xerces now uses the cached DTD files.
	  Fixes #2798091.

2009-10-23 13:42  keesblom

	* Changed some "id" tags ibto "xmil:id", otherwise xerces detects
	  errors

2009-10-23 12:01  keesblom

	* Turned off some debugging, that caused AmbulantPlayer_gtk to
	  crash, randonly.  Cause not traceable using gdb, valgrind,
	  GTK_DEBUG, GDK_DEBUG. Often in a stack trace some pango related
	  functions in a smil application only using video.

2009-10-22 16:54  keesblom

	* Implemented gtk video scaling. Fixes #2777319.

2009-10-22 16:50  keesblom

	* Initialized m_eom_flag after valgrind complaining

2009-10-21 14:11  keesblom

	* Added in-code comment which arguments are parsed by the toolkit.
	  Applies to: #2880765.

2009-10-21 12:08  keesblom

	* initialization m_volcount added

2009-10-21 11:14  keesblom

	* Moved static factory* from state.h to state.cpp. Fixes #2846127

2009-10-20 16:31  keesblom

	* Made "Use plugins" default, when they are selected at compile
	  time.

2009-10-20 15:30  keesblom

	* For all files, executed 'unifdef -UQT_NO_FILEDIALOG <file>. Fixed
	  #2868773

2009-10-20 14:57  keesblom

	* Added library search path s.t. make make works again on FC9
	  x86_64 Needed to remove libSDL from TPP and add -fPIC flag
	  everywhere.  internalize_shlibs.py did not work, no idea why not.

2009-10-19 17:00  keesblom

	* Little bit of cleanup

2009-10-19 16:52  keesblom

	* Implemented rate="auto" for gtk. Fixes #2777292.

2009-10-17 13:15  jackjansen

	* Internal library use is now strictly static or shared. Static
	  means plugins link against nothing, all main code (desktop apps,
	  npambulant) link against static libs. Shared means everything
	  links against shared libs, and the shared libs link against each
	  other (as needed).

	  Shared is used if both plugins and npambulant are enabled, static
	  otherwise.

2009-10-17 00:56  jackjansen

	* - If AMBULANT_DEBUG is defined when running the npambulant plugin
	  it   will set ambulant log level to debug and show log output on
	  stderr.  - xulrunner-api 1.9.1 now links, but I'm not sure
	  whether it works.  - experimenting with an idea to get
	  plugins-in-plugins working on Linux,	 but not complete yet.

2009-10-16 16:14  keesblom

	* Partial implementation of rate="auto" for gtk_smiltext to fix
	  #2777292.

2009-10-16 14:13  keesblom

	* 1. Turend off use_lugins in npambulant because firefox crashes on
	  loading them.  2. Factored out compute_rate() in
	  smiltext_layout_engine for use in renderers that    need it, but
	  do not need smiltext_layout_engine (cocoa, gtk).

2009-10-16 00:29  jackjansen

	* Fixed typo, and always print error messsage if we can't find our
	  dir.

2009-10-15 17:08  jackjansen

	* Tweaks.

2009-10-15 16:59  jackjansen

	* Modified location of installer.rdf source.

2009-10-14 17:19  keesblom

	* Many hacks to get ambulant plugins working from npambulant. Does
	  not work yet.

2009-10-14 16:18  jackjansen

	* - directory structure was still incorrect, fixed.  - Ubuntu wants
	  "linux-gnu" as Firefox platform, Fedora "Linux". Go figger...

2009-10-14 15:13  jackjansen

	* iMore bits and pieces of building an npambulant installer.

2009-10-14 12:06  jackjansen

	* Starting to work.

2009-10-14 00:09  jackjansen

	* Unfinished script to copy shared libraries to plugin dir.

2009-10-13 23:10  jackjansen

	* Now conforms to the new way configure works.

2009-10-13 13:36  jackjansen

	* Firefox plugin installer for Windows works! Two things neeed
	  fixing: - uuid in install.rdf needs to refer to Firefox - zipfile
	  cannot have another level of folders, need to have content at
	  toplevel.

	  install.rdf still needs some work: uninstall doesn't actually
	  remove things, and icon, etc need work.

2009-10-12 23:55  jackjansen

	* - Documented the variables in the vsprops file, and added two for
	  Firefox installers.  - Added a project npambulant-installer
	  that creates the XPI file that   should install the plugin
	  (untested).

2009-10-10 01:10  jackjansen

	* Fixed nasty bug in project: the MIDL output files were deposited
	  in the wrong place.

2009-10-09 17:06  jackjansen

	* Tweaked various projects. This makes release build of ieambulant
	  work, and reduces clutter in projects/vc9 directory.

2009-10-09 16:53  jackjansen

	* Getting ieambulant to build from within the normal solution.
	  Works for debug, not yet for release.

2009-10-09 10:57  jackjansen

	* Got npambulant to build  and run in vc9.

2009-10-09 10:15  jackjansen

	* Fix for #2869232: smilText node with textMode=crawl and no
	  dureation causes crash.

2009-10-08 22:53  jackjansen

	* <a> anchors didn't work (and probably haven't worked since we
	  implemented event sensitivity) because they are "obscured" by the
	  media item they incorporate.

	  In smil_player::clicked(), test for an <a> parent and forward it
	  the event, if needed.

	  Fixes #2873157.

2009-10-08 17:30  keesblom

	* Added code to extend ACLOCAL_FLAGS, when needed, so that the
	  script works with libtool-2.2.6 installed in a non-standard
	  place.

2009-10-08 16:31  keesblom

	* Fixed bug in modified function require_m4macro

2009-10-08 16:22  jackjansen

	* Builds again with ffmpeg 0.5.

2009-10-08 15:55  keesblom

	* Turned off redundant AM_DBG

2009-10-08 14:18  jackjansen

	* avcodec_decode_audio2() output buffer must be 16-byte aligned.

2009-10-08 14:09  keesblom

	* Added a test in require_m4macro to see if a needed file.m4 exists
	  in a path relative to the corresponding command

2009-10-08 12:25  keesblom

	* Dynmically find AMBULANT_DIR

2009-10-07 15:50  keesblom

	* Added fix provided for Fedora 12 in #2860949

2009-10-06 22:16  jackjansen

	* Fixes for building with gcc 4.4 on FC11.

2009-10-06 00:17  jackjansen

	* Building third party packages with VC9 was in a very sorry state.
	  Partially fixed.

2009-10-05 00:01  jackjansen

	* Various tweaks to exp-jack-easy-configure merge.

2009-10-04 23:15  jackjansen

	* Merging branch exp-jack-easy-configure: rationalize the
	  configuration process.

	  - m4 and libltdl are gone from the repository, to be re-created
	  by autogen.sh - configure.in and Makefiles now use uniform naming
	  convention XXX_LIBS	and XXX_CFLAGS for all packages.  - all
	  third party packages (except live) are expected to be found
	  through   pkg_config.  -
	  third_party_packages/installed/{bin,lib/pkgconfig} are added to
	  the	respective paths in configure.	- there's a script
	  third_party_packages/build-third-packages.py which   downloads
	  and builds all needed packages. All packages are built   for both
	  dynamic and static use.  - Mac player build now includes phase
	  where non-Apple dylibs are   copied into the bundle.

2009-10-02 16:58  keesblom

	* Fixed a bug s.t. combined object/embed tag html tags (like
	  ieambulantWeb3.html) can be played with both Internet Explorer
	  and Firefox/Safari/Opera/Google Chrome Removed some weird stuff
	  that was added for Visyal Studio 7.1 Committed on the Free
	  edition of March Hare Software CVSNT Server.	Upgrade to CVS
	  Suite for more features and support: http://march-hare.com/cvsnt/

2009-09-28 17:44  jackjansen

	* Getting started on rationalizing the way we use the third party
	  packages.

2009-09-28 14:21  keesblom

	* Ignore, for now, alpha channel in png images by stripping the
	  alpha channel information.  Committed on the Free edition of
	  March Hare Software CVSNT Server.  Upgrade to CVS Suite for more
	  features and support: http://march-hare.com/cvsnt/

2009-09-28 13:14  bogao

	* Removed an assertion which caused npambulant crashing sometimes

2009-09-28 00:05  jackjansen

	* More bits and pieces for universal 32/64 bit builds.

2009-09-27 23:29  jackjansen

	* All third party packages can now be built on MacOSX 10.6 for
	  universal 32 and 64 bit binaries (Intel only).

2009-09-26 00:47  jackjansen

	* Got the script to work with ffmpeg 0.5.

	  Also added code to build for any selection of the 4 architectures
	  (ppc, i386, ppc64, x86_64) but this is currently untested.

2009-09-24 23:30  jackjansen

	* Fgot to add project file to CVS.

2009-09-24 16:47  jackjansen

	* Python plugin builds and loads again.

2009-09-24 16:24  jackjansen

	* - Moved global cpp defines (basically any define that changes the
	  API) to a vsprops variable $(global_ambulant_defines), which is
	  used by all projects under Ambulant-win32.sln. No more editing 14
	  property sheets to enable a single define!

	  - Got a bit further with python-plugin, but still doesn't link.

2009-09-24 15:36  jackjansen

	* One more method that needs a return value.

2009-09-24 15:32  jackjansen

	* Regenrated (and added missing namespace)

2009-09-24 15:29  jackjansen

	* VC9 is more picky about return values, fix the dummy placeholder
	  methods to return something.

2009-09-24 14:51  jackjansen

	* Getting started on reviving Python plugins (using Python 2.6 and
	  vc9).

2009-09-24 14:19  jackjansen

	* - Catered for WM_AMBULANT_MESSAGE rename - Don't modify std::map
	  in a for loop iterating over it (use a while).

2009-09-24 13:42  jackjansen

	* - Adapted npambulant code to work with newer Firefox 3.5 API as
	  well.  - Adapted CoreGraphics code to work on 64 bits mac.

2009-09-23 23:45  jackjansen

	* We now seem to get the correct CoreGraphics context.

2009-09-23 01:04  jackjansen

	* Mac firefox plugin starts to work. Plays audio, but no visuals
	  yet.

2009-09-23 00:48  jackjansen

	* Getting a bit further with building npambulant for Mac.  It now
	  crashes in NPInitialize.

2009-09-22 23:37  jackjansen

	* Getting started again on building npambulant for mac.  Currently
	  it loads, and crashes firefox:-)

2009-09-22 22:01  jackjansen

	* Fixed erronuous warning about missing front end.

2009-09-22 17:51  keesblom

	* rewrote image debugging code not to use #ifdef

2009-09-22 17:16  keesblom

	* Changed explicit reference to personal home directory into $HOME

2009-09-22 17:03  jackjansen

	* Updated test results.

2009-09-22 16:23  jackjansen

	* Added autorelease pool to cocoa_dsvideo to forestall wasting
	  memory.

2009-09-22 16:16  keesblom

	* Small edits,

2009-09-22 16:14  keesblom

	* Updated README-linux howto contruct a self-contained plugin

2009-09-22 16:14  jackjansen

	* Getting rid of "cvs merge" turds.

2009-09-22 16:03  jackjansen

	* If the ffmpeg demux thread communicated end-of-file to the demux
	  datasource while the demux datasource buffer was full the
	  end-of-file condition would be lost.

	  Fixed.

2009-09-22 15:57  jackjansen

	* Locking of m_playables_cs was incorrect. Fixed.

2009-09-21 17:45  keesblom

	* Made libambulant compile again after introduction of get_sig()

2009-09-21 17:07  jackjansen

	* More bits and pieces for (a) 64-bit Mac buid and (b) ffmpeg 0.5.

2009-09-20 23:53  jackjansen

	* Removed debug.

2009-09-20 23:52  jackjansen

	* Some essential code was lost from
	  renderer_impl::init_with_node(), node re-use could never have
	  worked (after merging back to the trunk).

	  How did I miss this??!?

2009-09-20 23:30  jackjansen

	* Added a get_sig() method to all renderers, which gives a
	  (somewhat) user-readable string describing the object.  TODO:
	  should do something similar for datasources, surfaces, etc.

2009-09-20 00:04  jackjansen

	* For the time being, enable the DirectX simple video on the
	  desktop as well (for Ta2 testing).

2009-09-18 16:48  keesblom

	* Adapt npambulant/Makefile.am to libtool 2.2.6 (I think this
	  required the change) Removed a duplicate entry from
	  include/ambulant/gui/qt/Makefile.am Don't know why libltdl was
	  checked in, perhaps because I locally installed libtool 2.2.6,
	  otherwise I cannot wotk anymore on Fedora 10.

2009-09-16 17:28  jackjansen

	* More bits and pieces for ffmpeg-0.5.	Should still work with
	  older ffmpeg versions.

2009-09-16 17:13  jackjansen

	* More cleanup: getting rid of lots of debug stuff.

2009-09-16 17:11  jackjansen

	* More changes for new ffmpeg.

2009-09-11 13:49  jackjansen

	* Getting started with 64bit ambulant on Mac.

2009-09-11 10:09  jackjansen

	* Getting ready for 10.6 64-bit builds.

2009-09-10 12:57  jackjansen

	* Got rid of unix_event_processor.

2009-09-09 23:05  jackjansen

	* - renderer_playable now cleans up m_dest, if needed - cg_renderer
	  overrides fewer methods from RP_Base - unix_event_processor is
	  gone - Mac CG player uses WITH_CLOCK_SYNC,
	  WITH_SEAMLESS_PLAYBACK.

2009-09-08 23:10  jackjansen

	* Fixed to work under vs2005.

2009-09-08 22:14  jackjansen

	* Merging branch exp-jack-fix-race-conditions: - lib::condition is
	  gone. Replaced by critical_section_cv, which is   a subclass of
	  critical_section with added condition variable   and accompanying
	  wait() and signal() methods.	- event_processor_impl is now a
	  fully machine-independent   implementation, replacing the
	  mac/win32 implementations.

2009-09-07 14:14  keesblom

	* Re-added locks in qt_smiltext.cpp. Should fix #2849057, at least
	  for now.

2009-09-04 16:41  keesblom

	* Fixed a few locking issues reported by valgrind.

2009-09-04 12:33  keesblom

	* Added protection in operator long() of basic_atomic_count with
	  #define USE_REF_COUNT_SEMAPHORE

2009-09-03 21:33  jackjansen

	* Runs on WM5. Well... Crawls, really:-)

2009-09-03 15:23  keesblom

	* Removed //JNK lines for abandonned lock/unlock lines Re-enabled
	  m_dest_rect, used by qt and dx renderers

2009-09-03 13:38  jackjansen

	* WinCE builds again.

2009-09-02 17:17  jackjansen

	* Next step in the great cleanup: getting rid of defines that have
	  been on (or off) for years, and serve no documentation purpose
	  either.

	  There go AMBULANT_HAS_LONG_LONG, WITHOUT_DELAYED_REDRAW,
	  WITH_SMALL_BUFFERS, JACK_IS_NOT_CONVINCED_YET,
	  WITH_SCHEDULER_EXEC, WITH_OVERLAY_WINDOW_IN_VIEW,
	  WITH_FFMPEG_VIDEO .

2009-09-02 15:34  jackjansen

	* Great cleanup: getting rid of old compilers (gcc < 4.0) and
	  platforms (WinCE < 5.0).

	  This get rid of the following ifdefs:
	  AMBULANT_PLATFORM_WIN32_WCE_3, AMBULANT_NO_IOSTREAMS,
	  AMBULANT_NO_OSTREAM, AMBULANT_NO_STRINGSTREAM,
	  AMBULANT_NO_IOSTREAMS_HEADERS, AMBULANT_NO_ABORT,
	  AMBULANT_NO_OPERATORS_IN_NAMESPACE, AMBULANT_NO_MEMBER_TEMPLATES.

2009-09-02 14:56  jackjansen

	* Great cleanup: getting rid of more JNK, RANDOM_BYTES,
	  OLD_SUBREGIONS and WITH_SMIL30_RELAXED_SEQ.

2009-09-02 14:42  jackjansen

	* Great cleanup, step 1 - Getting rid of #if 0/#if 1 and ifdefs
	  triggering on JUNK, JNK, IGNORE_ZERO_DURATION,
	  DX_DRAW_BOX_AROUND_TEXT, USE_COCOA_BOTLEFT, NO_CLICK_THRU

2009-09-01 17:45  keesblom

	* Changed plugin destruction code s.t. npambulant does not crash os
	  hangs anymore when the user selects the Back button when multiple
	  npambulant players are active (but one hasnt played yet, so its
	  state is idle).

2009-09-01 13:40  jackjansen

	* Added get_elapsed() to the various audio_datasource
	  implementations that were missing it.

2009-08-31 16:35  keesblom

	* Adapted to new autogen.sh

2009-08-31 16:10  jackjansen

	* Tweaks to get things to build correctly.

2009-08-30 01:44  keesblom

	* Added autostart attribute to embed tag, as in ieambulant

2009-08-29 22:45  keesblom

	* Corrected the test that the nanosecond part of struct timespec is
	  always less than 1 sec. This could result in EINVALID and a fatal
	  error.  May fix #2799980 and #2799980

2009-08-28 14:09  jackjansen

	* Got running under vc9.

2009-08-28 12:21  jackjansen

	* - Fix to restart video datasource only when needed was
	  incomplete,	causing some videos to freeze. Fixed.  - Got rid of
	  some debug output.

2009-08-28 11:22  jackjansen

	* Merging branch exp-jack-keep-renderers. Main features:

	  WITH_CLOCK_SYNC enables continuous media renderers with an
	  autonomous clock to re-synchronise the scheduler playback clock.
	  This leads to improved timing.

	  WITH_SEAMLESS_PLAYBACK leads to improved performance of
	  back-to-back playback of the same media item, by not destroying a
	  renderer immedeately on stop(), but in stead caching it for a
	  short while ad reviving it if it happens to be reused.
	  Additionally, media elements can specify fill="ambulant:continue"
	  to enable the renderer to continue playback during this caching
	  period. Finally, a limited form of <prefetch> is supported.

2009-08-25 23:12  jackjansen

	* byte_buffer is gone.

2009-08-24 17:33  keesblom

	* Removed all Visual Studio 2005 and aal refrences to it. Stil
	  doesn't work on empty XP.  Committed on the Free edition of March
	  Hare Software CVSNT Server.  Upgrade to CVS Suite for more
	  features and support: http://march-hare.com/cvsnt/

2009-08-21 17:31  keesblom

	* Final commit, at least for now of ieambulant. Status: - ie
	  crashes on my development machine, and on Jacks'.  - plugin runs
	  on my (empty) Vista machine, but not on Pablo's, - plugin does
	  not run on my (empty) CP machine See comment in nakeCabinet.cmd
	  how to create a signed Cabinet file.	Committed on the Free
	  edition of March Hare Software CVSNT Server.	Upgrade to CVS
	  Suite for more features and support: http://march-hare.com/cvsnt/

2009-08-12 17:35  keesblom

	* This version produces a .cab file that works in Virgin WinXP, but
	  crashes on Vista, maybe the added redistributable files are
	  invalid there., need VC90 versions ? Committed on the Free
	  edition of March Hare Software CVSNT Server.	Upgrade to CVS
	  Suite for more features and support: http://march-hare.com/cvsnt/

2009-08-06 12:26  keesblom

	*
	  Committed on the Free edition of March Hare Software CVSNT
	  Server.  Upgrade to CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-07-29 13:47  keesblom

	* Attempt to make ambulant plugin work on Google-Chrome.  Sound is
	  now working, but graphics not yet on Linux.

2009-07-25 23:37  keesblom

	* Completely getting rid of byte_buffer.

2009-07-23 15:45  keesblom

	* Adapted the Cursor to change in HAND when in an acive are of the
	  SMIL presentation Committed on the Free edition of March Hare
	  Software CVSNT Server.  Upgrade to CVS Suite for more features
	  and support: http://march-hare.com/cvsnt/

2009-07-23 14:40  keesblom

	* Added preferences. Streamlined code signing in "makecab.cmd"
	  Committed on the Free edition of March Hare Software CVSNT
	  Server.  Upgrade to CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-07-23 11:15  keesblom

	* Added a lock in dx_player::pause() because ieambulant plugin got
	  into a deadlock when a video was resumed Committed on the Free
	  edition of March Hare Software CVSNT Server.	Upgrade to CVS
	  Suite for more features and support: http://march-hare.com/cvsnt/

2009-07-22 14:19  keesblom

	* Fixed mouse click in for smil navigation Committed on the Free
	  edition of March Hare Software CVSNT Server.	Upgrade to CVS
	  Suite for more features and support: http://march-hare.com/cvsnt/

2009-07-20 16:22  keesblom

	* Small tweaks, upload to sourceforge, closing #2654659

2009-07-20 10:54  keesblom

	* tweaks in comment

2009-07-06 11:17  keesblom

	* Added a comment how ambulant was configured to solve #2812967,

2009-07-01 15:27  keesblom

	* Updated README-linux for the xulrunner version.

2009-07-01 15:15  keesblom

	* Finally made it: npambulant.so linked as a dynamic library that
	  contains everything it needs. Had to construct a hand-coded link
	  line and some manual tweaks, documented as comment in "linkit"

2009-07-01 10:40  jackjansen

	* Oldish mods that were still sitting on my disk.

2009-06-25 14:49  keesblom

	* Added 2 more html files with 2 and 3 independent players

2009-06-23 15:42  keesblom

	* Fixed wrong "src" value for embed tag

2009-06-19 14:24  keesblom

	* Modified code s.t. module that need singletons will reset these
	  to NULL on cleanup. This is necessary for browser plugins.
	  Committed on the Free edition of March Hare Software CVSNT
	  Server.  Upgrade to CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-06-18 16:13  keesblom

	* 1. Some cleanup.  2. Created a .cab (cabinet) file and put this
	  on the web 3. Created a webpage to show this cabinet at work.
	  Needs code signing or IE security turned off.  Committed on the
	  Free edition of March Hare Software CVSNT Server.  Upgrade to CVS
	  Suite for more features and support: http://march-hare.com/cvsnt/

2009-06-15 16:25  jackjansen

	* CoreGraphics renderers (and accompanying XCode project) seem to
	  work again. Only very little testing done, though.

2009-06-15 13:03  keesblom

	* Little bit of cleanup, factoring out Committed on the Free
	  edition of March Hare Software CVSNT Server.	Upgrade to CVS
	  Suite for more features and support: http://march-hare.com/cvsnt/

2009-06-15 00:04  jackjansen

	* Getting started on reviving the CoreGraphics build, and porting
	  the CG renderers to the new API.  Unfinished.

2009-06-14 23:20  jackjansen

	* Fixed bug #2805248: Log window cannot be resized.

	  Fix graciously donated by Cocia Lin, with an added resource mod
	  by Jack.

2009-06-12 17:44  keesblom

	* Added  <parama name="autostart"  value="true"/> and a test
	  application: when "watchdone" is enabled for a player, the other
	  player starts when the first is done.  Committed on the Free
	  edition of March Hare Software CVSNT Server.	Upgrade to CVS
	  Suite for more features and support: http://march-hare.com/cvsnt/

2009-06-12 16:53  keesblom

	* Little bit of cleanup Committed on the Free edition of March Hare
	  Software CVSNT Server.  Upgrade to CVS Suite for more features
	  and support: http://march-hare.com/cvsnt/

2009-06-12 16:37  keesblom

	* WatchDone now works properly w. 2 players on 1 page. Ugly
	  javascript code, alas! Committed on the Free edition of March
	  Hare Software CVSNT Server.  Upgrade to CVS Suite for more
	  features and support: http://march-hare.com/cvsnt/

2009-06-12 15:36  keesblom

	* buttins (except WatchDone) now also work correctly Committed on
	  the Free edition of March Hare Software CVSNT Server.  Upgrade to
	  CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-06-12 15:03  keesblom

	* ieambulant now works with 2 independent players on 1 page, as in
	  iemabulant2Buttons.htm. Control buttons do not work yet as
	  desired.  Committed on the Free edition of March Hare Software
	  CVSNT Server.  Upgrade to CVS Suite for more features and
	  support: http://march-hare.com/cvsnt/

2009-06-11 14:19  keesblom

	* Works on reload and multiple tabs.  Added ref_counter for static
	  cleanup.  libambulant still needs works on static cleanup.
	  Committed on the Free edition of March Hare Software CVSNT
	  Server.  Upgrade to CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-06-10 17:23  keesblom

	* writing error message to the status bar now works, but reload is
	  broken Committed on the Free edition of March Hare Software CVSNT
	  Server.  Upgrade to CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-06-10 14:05  keesblom

	* ieplugin doesn't crash anymore, but now has a little more leaks.
	  Committed on the Free edition of March Hare Software CVSNT
	  Server.  Upgrade to CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-06-09 15:17  keesblom

	* Watch done added to ie plugin. STStill crashes on exit.
	  Committed on the Free edition of March Hare Software CVSNT
	  Server.  Upgrade to CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-06-04 16:39  keesblom

	* changed GUID's to new ones instead those borrowd by some example
	  project Committed on the Free edition of March Hare Software
	  CVSNT Server.  Upgrade to CVS Suite for more features and
	  support: http://march-hare.com/cvsnt/

2009-06-04 16:08  keesblom

	* ieambulant now also works with 2 instances are simultaneously
	  active Committed on the Free edition of March Hare Software CVSNT
	  Server.  Upgrade to CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-06-04 15:00  keesblom

	* 2nd attempt to commit ieambualnt after re-installing tortoise
	  Committed on the Free edition of March Hare Software CVSNT
	  Server.  Upgrade to CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-06-04 14:29  keesblom

	* 2nd attempt to commit ieambualnt after re-installing tortoise
	  Committed on the Free edition of March Hare Software CVSNT
	  Server.  Upgrade to CVS Suite for more features and support:
	  http://march-hare.com/cvsnt/

2009-06-03 18:10  keesblom

	* 1st version of Ambulant as an Internet Explorer plugin.
	  ieambulantButtons.htm has working buttons both with
	  Explorer/Firefox, Safari/Opera untested but should work.
	  ieambulant2.htm attempts to start 2 simultaneous instances, but
	  does not work.

2009-05-20 14:03  jackjansen

	* Getting started on putting all pathnames for third party packages
	  in a single place: Ambulant-win32.vsprops.

	  Not completely done yet for third party packages.

2009-05-18 12:52  stevents

	* Fix Win32 build: pick up DXSDK via %DXSDK_DIR% env variable.

2009-05-15 15:09  jackjansen

	* Added a couple of "echo on" statements during the build, to debug
	  what goes wrong on Tims machine.

2009-05-15 14:03  jackjansen

	* Fixed issues with building Xerces plugin under VS 2008.

2009-05-12 12:41  keesblom

	* Removed some junk files

2009-04-24 16:12  keesblom

	* More work on the npruntime plugin: libambulant and npambulant
	  need to be build without WITH_HTML_WIDGET Made libambulant work
	  without that option set Turned of deprecated printf warnings

2009-04-24 13:17  jackjansen

	* Fix for #2778676: document cannot be played twice.

	  Problem was that if we found a cached playable factory for a node
	  we forgot to actually call it:-)

2009-04-23 17:02  jackjansen

	* Fix for #2779548: showBackground=whenActive does not work.

	  Backport candidate.

2009-04-23 15:24  jackjansen

	* Removed merge turd.

2009-04-22 17:43  keesblom

	* Made the Debug version of npruntime version of the plugin work
	  again after being wrecked due to the merge of 2.0.2 branch and
	  trunk

2009-04-21 14:19  keesblom

	* Mass merge changes from release 2.0.2 into trunk.

2009-04-15 11:00  keesblom

	* Fixed some compile errors.  Added information about
	  nspluginwrapper and 64 bit in README-linux.
	  ----------------------------------------------------------------------

2009-04-01 15:57  keesblom

	* Restored INSTALL to original version, with some enhancements)

2009-03-19 11:53  keesblom

	* Linux merge of branch exp-kees-npruntime-plugin with trunk

2009-03-17 15:43  keesblom

	* Got rid of some leftover conflicts after merge with branch
	  exp-kees-npruntime-plugin

2009-03-17 15:30  keesblom

	* Merged branch exp-kees-npruntime-plugin with trunk.

2009-03-13 14:50  bogao

	* clarifying the process of building MacOSX universal installer for
	  live555

2009-03-13 11:18  bogao

	* appended some information for building faad2 for a MacOSX
	  universal build

2009-03-10 15:13  jackjansen

	* More vestiges of byte_buffer.h removed.

2009-03-10 14:38  jackjansen

	* Completely getting rid of byte_buffer.

2009-03-10 14:08  jackjansen

	* It seems byte_buffer is not used. About to get rid of it.

2009-01-30 17:16  jackjansen

	* - Getting rid of some dead wood in the projects.  - Moving xerces
	  to a plugin.

2009-01-30 15:45  jackjansen

	* Disabled Xerces for debug builds under VS2008. This works around
	  the issue that there's something wrong with the Manifest in the
	  Xerces debug dll that causes Ambulant to refuse to run. To be
	  fixed later.

2009-01-30 14:11  jackjansen

	* Everything builds under visual studio 2008. It doesn't run yet.

2009-01-30 13:54  jackjansen

	* Visual Studio projects for live555.

2009-01-30 12:06  jackjansen

	* Started on vs2008 port.

2009-01-30 09:56  jackjansen

	* Copied vc8-smil3 projects. No changes for vc9 yet.

2009-01-21 11:31  jackjansen

	* Adapted for XCode 3.1 and gcc 4.2.

2009-01-19 16:19  keesblom

	* Adapted old plugin s.t. the does not crash Firefox anymore by
	  symbol lookup errors due to recent factories reorgranization.

2009-01-15 13:43  jackjansen

	* Bug (and fix) spotted by Daniel Weck: change_global_rate()
	  argument is an increment, not a factor.

	  Ned to backport to release branch and amis branch.

2009-01-14 23:29  jackjansen

	* Merging exp-jack-unified-factories-2 branch.	Two big changes: 1.
	  All renderer factories now have the same signature. Renderers
	  also have an identifier, and can be selected with <param
	  name="renderer">.  ffmpeg/native preference makes use of
	  identifiers and moves a whole group of renderers forward in the
	  priority list. There are hooks (not implemented yet) for
	  selecting renderers by mimetype.

	  2. systemComponent now actually allows you to test for things
	  like available renderer, but also for whether we're running on
	  the desktop or in the browser plugin. The mechanism is
	  extensible, and things like the Annotator are expected to make
	  use of it too, eventually.

2009-01-07 14:17  jackjansen

	* Cleaned up a few things.

2009-01-07 11:34  jackjansen

	* Moved mods from exp-jack-unified-factories over to a new branch
	  to start working on it again.

2008-12-19 01:20  jackjansen

	* Merging 2.0.1 changes back into the trunk.

2008-12-02 00:20  jackjansen

	* Post-distribution updating of version numbers.

2008-12-01 23:51  jackjansen

	* iSome final mods for 2.0 distribution.

2008-12-01 15:44  keesblom

	* Repaired crawl/scroll for Qt/Windows XP

2008-12-01 13:55  keesblom

	* Re-enabled 1st section of the presentation, which was commented
	  out for debugging purposes

2008-12-01 11:09  jackjansen

	* Turns out our icons were butt-ugly on Windows because Visual
	  Studio doesn't support XP icons (full 32-bit images). I think I
	  worked around the problem by using a third-party icon editor.

2008-11-30 22:59  jackjansen

	* smilText on Windows (and probably gtk or qt too) was unhappy with
	  empty runs.  Hence, an initial <tev begin="3s"/> would cause a
	  crash. Fixed.

2008-11-30 22:47  jackjansen

	* <clear> at the end of a smilText now also works on windows.

2008-11-30 22:24  jackjansen

	* A final <clear> in a smilText was ignored if no data follows it.
	  Fixed (worked-around) by adding an empty text if this case is
	  detected.

	  Discovered by Dick in the Fruits-4s.smil presentation. Fix
	  currently only texted on the Mac.

2008-11-29 00:42  jackjansen

	* smiltext_layout_engine tried to keep its own idea of when
	  smilText had finished rendering, but this was only updated in
	  case of auto-scrolling/crawling, so simple smiltext without
	  explicit duration never finished. Fixed, by forwarding calls to
	  is_finished() to the smiltext_engine.

	  Also removed all references to m_finished: as the smiltext
	  renderer will end when all data has been consumed there's no need
	  to stop updating the rendering position as we'll be blown out of
	  existence anyway.

2008-11-28 10:27  jackjansen

	* More animation fixes: - On reset() clear the callback event, so a
	  next run will create a new one. This may lead to double events,
	  but that shouldn't be too much of a problem.	- Protected the
	  animation engine with locks.

	  These should fix #2338625 and #1740405.

2008-11-27 16:07  jackjansen

	* Got rid of more debug output.

2008-11-27 16:03  jackjansen

	* If a document stopped becuase it reached its end the scheduler
	  wasn't reset.  This caused trouble with, among other things,
	  animations (bug #2338625).

2008-11-27 15:04  jackjansen

	* Removed reference to defunct pyamplugin_scripting.

2008-11-27 14:31  jackjansen

	* Fractional clipBegin/clipEnd values didn't work, the parsing was
	  way off.  Fixed.

	  Discovered through amis.

2008-11-24 17:05  jackjansen

	* - Added News to installer - Added uninstaller - Fixed build for
	  libxml2 debug

2008-11-23 17:50  jackjansen

	* Reflowed to fit in 80 columns.

2008-11-20 12:29  keesblom

	* Updated the link for ffmpeg building instructions. The old link
	  did not exist anymore, but the new one looks valid and complete.

2008-11-20 12:07  keesblom

	* Some refinements based on Ishan's comments.

2008-11-19 23:48  jackjansen

	* Ambulant builds and installs on WinCE5.

2008-11-19 11:11  keesblom

	* Changed 'int' constant into 'double' when calling pow() to avoid
	  duplicates in name resolution on Windows VC7.1

2008-11-18 16:40  jackjansen

	* Updated year in help.

2008-11-18 13:42  jackjansen

	* Changed default defaults: enable plugins, enable ffmpeg, log
	  level=show.

2008-11-18 13:21  keesblom

	* Changed s.t. compilation without ffmpeg works.

2008-11-18 13:18  keesblom

	* Added a file to be distributed for use on 64-bit Linux.

2008-11-18 10:54  keesblom

	* For some reason (autogen.sh?), our package specific instructions
	  were replaced by a symbolic link to the generic instructions in
	  the 'automake' package, which was then checked in. Restored our
	  original package specific instructions.

2008-11-17 17:13  jackjansen

	* Build tpp was missing build of live555, copy of libxml2.

2008-11-17 16:48  jackjansen

	* ase error in directory names.

2008-11-17 16:39  jackjansen

	* Added some files that were missing from the source disrtribution.

2008-11-17 16:31  keesblom

	* Jack repaired DTD pathnames

2008-11-17 16:02  jackjansen

	* make install was messy. Cleaned up.

2008-11-17 14:22  jackjansen

	* For some reason Makefile.in is checked in. And it needed a small
	  fix to forestall it trying to create the distidir twice.

2008-11-17 14:09  jackjansen

	* First set of changes to Makefile.am's and translation files to
	  get "make dist" to work again.

2008-11-17 14:07  jackjansen

	* Removed outdated file.

2008-11-17 13:53  bogao

	* Jack and Bo got two things working: - Chinese text in smilText
	  nodes (should be encoded UTF-8 in the document) - Chinese
	  filenames

2008-11-17 13:17  keesblom

	* Removed generated files

2008-11-17 13:15  keesblom

	* Merged (again) branch kees-npambulant-merge with trunk.  On
	  Windows, this branch was still active.

2008-11-17 11:27  jackjansen

	* Getting started on version numbers and such.

2008-11-17 11:15  jackjansen

	* Started on 2.0 version numbers Gettting rid of dead installers

2008-11-17 10:54  jackjansen

	* Adapted to new files.

2008-11-17 00:07  jackjansen

	* The textptr fix was a bit too simple: length() is used after all.
	  Because we cannot count on it being correct we've changed the
	  places where it was used to use _tcslen() on the string returned.

	  This might also fix the smilText rendering problem (keeping
	  fingers crossed).

2008-11-16 23:20  jackjansen

	* Fixes for filename URLs on multibyte platforms: - multibyte
	  characters are not representable officially in a URL:   %-escapes
	  are Latin-1 only. We now use the workaround that browsers   also
	  seem to use: if we create a file: url for a local filename we
	  don't do %-esacpes at all.  - the \ escaping and lowercasing
	  failed on Windows, because isascii()	 appears to be broken for
	  multibyte. Fixed by roundtripping to wide (unicode).	  Marisa
	  will investigate whether this is really needed, I'd like to
	  get rid of the double conversion only to do escapes.

2008-11-16 22:59  jackjansen

	* Textptr incorrectly assumed that wide strtings and multibyte
	  strings are the same size, whereas wide strings can be twice as
	  wide.  Cater for this fact.

	  This attempts to fix the same problem as fixed on branch
	  amis-ambulant-30, but without a second call to
	  WideCharToMultiByte.

2008-11-16 00:21  jackjansen

	* The ffmpeg demux thread releases the lock while calling
	  data_avail() to forestall a deadlock, but therefore another
	  thread could remove it's sink during that period, leading to a
	  crash. This happened most often when stopping the player while
	  audio was active. This scenario is very common in Amis, when the
	  user navigates through the Daisy book.

	  Fix ported over from amis-ambulant-30 branch, with modifications.

2008-11-16 00:16  jackjansen

	* Removed reference to deleted directory xcode23.

2008-11-14 23:12  jackjansen

	* Added a note that QT/DX renderers don't adhere as close to the
	  SMIL spec as ffmpeg.

2008-11-14 16:25  keesblom

	* Changed the check in layout manager when everyting is visible to
	  be executed only when textRate != "auto". Fixes # 2229698.

2008-11-14 15:48  keesblom

	* Added another patch for libtool as generated on 64 bit fc8.  The
	  '--export-dynamic' flag was not propagated by libtool from the
	  spec.  in src/player_*/Makefile.am to the final link command.
	  This caused dynamic linkage runtime failures.Fixes #2229555.

2008-11-14 14:25  jackjansen

	* Qt video was never scaled or pan/zoomed. Fixed, but need to
	  confirm that the fix is complete.

2008-11-14 13:34  jackjansen

	* redraw_now() is unsafe for Qt: it can result in a deadlock on
	  some Qt lock (or a region lock). Disabling, for now.

	  May also fix #1963869.

2008-11-14 11:16  jackjansen

	* Fixed #1699636 (incorrect video alignment with
	  regPoint/regAlign/fit) for ffmpeg video on the Mac.

2008-11-14 11:15  jackjansen

	* Basline test (with image) for video alignment.

2008-11-14 00:01  jackjansen

	* Script to generate SMIL presentations for various combinations of
	  big/small videos in big/small windows, with regPoint/regAlign and
	  fit values.

2008-11-13 23:10  jackjansen

	* Updated for the next release.

2008-11-13 22:36  jackjansen

	* Removed turd.

2008-11-13 22:15  jackjansen

	* Updated installation instructions. Need to be debugged.

2008-11-13 22:03  jackjansen

	* Three more to go.

2008-11-13 22:00  jackjansen

	* Renamed "simple" project names like "vc8" to "vc8-smil21", so
	  people don't inadvertantly think that these are the normal
	  projects. Will explain in INSTALL.

2008-11-13 21:34  jackjansen

	* Kees' checkin of r1.24 zapped INSTALL again. Fixed, again.

2008-11-13 21:29  jackjansen

	* Minor fix to message when DTD is not in the cache.

2008-11-13 21:28  jackjansen

	* Fixed minor bugs in "make uninstall".

2008-11-13 16:30  jackjansen

	* Fix for bug#1640765: nodes with begin="indefinite" cannot be
	  started through a hyperlink.

	  If we detect this situation we do a dom-like start() operation to
	  get things going.

2008-11-13 15:01  jackjansen

	* Fix for #2233356 (ffmpeg version check) was incomplete. Fixed.

2008-11-13 14:54  jackjansen

	* Don't write to the logger window from a secondary thread, but in
	  stead use PostMessage to have the actual write be done in the
	  main thread. There are locking problems if the main threads holds
	  an MFC lock and waits for the secondary thread trying to write to
	  the log.

	  Should fix #1306990.

2008-11-13 14:52  jackjansen

	* dx_wmuser.h was missing from the project. Added.

2008-11-12 17:00  jackjansen

	* Mixing absolute and relative values in animation caused a crash.
	  Fixed by printing a message in stead, and doing nothing.

2008-11-12 15:01  jackjansen

	* Updated Windows help.

2008-11-12 14:51  jackjansen

	* More help fixes.

2008-11-12 14:01  jackjansen

	* Updated.

2008-11-11 23:01  keesblom

	* Added a check for Qt4. Currently, this will not compile on Fedora
	  9.

2008-11-11 22:57  keesblom

	* Added extra  #include for the disabled print_node() function

2008-11-11 17:28  keesblom

	* Implemented "dB" values for soundLevel attribute. According to
	  spec, a number without trailing "dB" is to be interpreted as a
	  percentage value (par.7.5.3).

2008-11-11 17:24  keesblom

	* Corrected the wrong implementation of printing a Trace message
	  when no cached DTD was used

2008-11-11 16:12  jackjansen

	* Two ffmpeg-related changes: - configure now detects that ffmpeg
	  is too new, and complains if it is.  - building fat osx ffmpeg
	  has correct .pc files again

2008-11-11 16:02  keesblom

	* Added a trace when the cached DTD is	not used

2008-11-11 15:53  keesblom

	* Updated DTDCache to latest version

2008-11-11 11:36  keesblom

	* Made initial size of both players equal to size of menubar. Fixes
	  #2231499.

2008-11-10 17:18  jackjansen

	* Fixed slow DirectX video playback (bug 2050330) with a
	  two-pronged approach: - There's a throttle on the number of
	  events (in win32_event_processor.h) that was set to 50ms. Lowered
	  to 10ms.  - We schedule our video update events at half a frame
	  time (not 1 frame time), this will ensure we're on time (we
	  hope).

	  The code neeeds a bit of cleanup.

2008-11-10 15:19  keesblom

	* Added information where to obtain xulrunner-sdk

2008-11-10 14:28  jackjansen

	* Played with frame rates, trying to fix #20503330. No success, but
	  the current code is better than the old code (it actually picks
	  up frame rate from the movie).

2008-11-10 13:56  jackjansen

	* Newer gcc wants include of <typeinfo> before using typeid().

	  Should fix #2255022.

2008-11-10 13:55  jackjansen

	* For get_screenshot(), ambulant->python bridge code was wrong.
	  Temporarily disabled the method until we find a fix.

	  This may fix #2219142.

2008-11-10 11:33  jackjansen

	* The automatic update utility for automake/autoconf also
	  completely obliterated our INSTALL file. Sigh. Revived.

2008-11-10 11:25  jackjansen

	* Minor fixes to MacOSX install and uninstall procedure.

2008-11-10 10:57  jackjansen

	* Updated configure.in and Makefile.am files to current versions of
	  autoconf/automake. Squashed most warnings from --warnings=all,
	  added AM_PROG_CXX, got rid of mkinstalldirs in favor of mkdir_p.

	  May fix #2016106 and #2242323.

2008-11-10 10:55  jackjansen

	* Fix pto problem introduced by support for multiple font families.

2008-11-07 16:34  jackjansen

	* Animation with an indefinite simple duration would cause a stack
	  overflow. These can happen in case of hyperlinking, apparently,
	  as demonstrated by bug #1763572.  Fixed (or masked) by clamping
	  simple duration to active duration.

2008-11-07 14:30  jackjansen

	* Added const.

2008-11-07 14:14  jackjansen

	* textFontFamily accepted only a single family name, in stead of a
	  comma-separated list.

	  Implemented fully on the mac, and boilerplate for linux/win.

2008-11-07 12:04  jackjansen

	* Removed a couple of spurious #if 0.

2008-11-07 11:25  jackjansen

	* Removed various scheduler lock/unlock pairs inside the
	  xxxx_async() event handlers. I'm not sure why these locks were
	  needed, need to ask Kees.

2008-11-07 10:56  jackjansen

	* Check for the Python installartion being writable (if
	  --with-python is included), and warn if it isn't (install will
	  fail).

2008-11-07 10:03  jackjansen

	* Attempting to fix the mkinstalldirs problem.

2008-11-07 00:06  jackjansen

	* Added a note about correct naming of SMIL releases.

2008-11-06 23:48  jackjansen

	* Looked carefully at some of the started() and stopped() calls. I
	  think I have squashed another of the hanging bugs.

2008-11-06 16:38  jackjansen

	* Converting Welcome to smilText. Does not work yet.

2008-11-06 16:33  keesblom

	* Fix for #2229711: smilText textBackgroundColor default now
	  transparent.	Commented out AM_DBG lines which sometimes causes
	  dealock on Windows when Loglevel is set to Debug (seen when
	  playing NYC-Smiltext.smil).

2008-11-06 16:22  jackjansen

	* Added debug prints for when multiple started() callbacks,
	  stopped() callbacks or started() after stopped() are emitted by a
	  renderer. These can potentially confuse the scheduler, and should
	  be fixed.

2008-11-06 16:21  jackjansen

	* smilText with no duration would emit started() after stopped(),
	  confusing the scheduler. Fixed.

2008-11-06 14:12  keesblom

	* Removed unused functions from our interface with xerces

2008-11-06 11:27  keesblom

	* Found a fix for frequently occuring assertions in Xlib, such as:
	  xcb_lock.c:77: _XGetXCBBuffer: Assertion `((int) ((xcb_req) -
	  (dpy->request)) >= 0)' failed.

2008-11-05 13:41  keesblom

	* Changed obsolete xerces function to its succesor, Now also works
	  w. xerces-3.0.0

2008-11-03 17:11  keesblom

	* Removed outdated not working file from distribution

2008-11-03 16:28  keesblom

	* Generated files removed.

2008-11-03 16:26  keesblom

	* Created a somewhat working installer on N800. Ambulant plays
	  Welcome and Birthday, but sometimes it crashes, alas !

2008-10-29 17:43  keesblom

	* Adapted npambulant to xulrunner-sdk v. 1.9.0.1 (instead of
	  gecko-sdk) Further, user/root (un)install now refer to the
	  correct destination plugin directory.

2008-10-28 12:46  keesblom

	* Made the revised npambulant Firefox plugin also work on Linux
	  Fedora 8.  As on Windows, AM_DBG messages are now shown on status
	  bar.	Deleted obsolete versions of the plugin.  Merged branch
	  kees-npambulant-merge with trunk.

2008-10-10 17:04  jackjansen

	* Got started on implementing stateChange() events, which hadn't
	  been done yet. It's also needed for syncing state between nodes,
	  so...

2008-10-09 23:48  jackjansen

	* Most of server infrastructure implemented: main loop, locking
	  (also with multiple clients), sending out some blurb on
	  modifications.

2008-10-09 21:52  jackjansen

	* Getting started with state server.

2008-10-09 15:03  jackjansen

	* - Make warnings/logging mesages dependent on
	  AMBULANT_PLUGIN_DEBUG   environment variable.  - Don't initialize
	  n a partial page (happens with FormFaces) - Reverse Bonjour
	  client/server attempt.

2008-10-08 23:53  jackjansen

	* Added registering and querying Bonjour for shared-state service.
	  No sharing done yet, but Bonjour plumbing seems to work.

	  Uses Open Source (permissive license) pybonjour code by
	  Christopher J. Stawarz.

2008-10-07 16:16  jackjansen

	* Generating REX.

2008-10-06 16:49  jackjansen

	* Factored out DOM tree modifications into a separate mixin class.

2008-10-06 15:04  jackjansen

	* Revamped the way we make sure WekKit calls are only done in the
	  main thread: we now use a proxy object (found in an ActiveState
	  python recipe and modified for our needs) to forward all calls to
	  the main thread using PerformSelectorOnMainThread. This cleans up
	  the code quite a bit.

2008-10-03 23:27  marisademeglio

	* commented out a logger call that hangs sometimes.  this was from
	  a recent chat with jack, and i'm guessing that i should commit
	  it.

2008-10-03 23:08  marisademeglio

	* cast added to prevent overflow when calculating clip begin/end
	  times.  code coming from jack, not me.

2008-10-03 23:04  marisademeglio

	* small change to time_node::kill_blockers() function, actually
	  coming from jack, not me

2008-10-03 14:07  jackjansen

	* The scheduler would sometimes inadvertantly  kill an ancestor
	  node while seeking to a descendant, fixed.

	  This should fix amis bug
	  http://daisy-trac.cvsdude.com/amis/ticket/139

2008-09-17 14:16  keesblom

	* Sept.17 Version for BT.  Turned off  AM_DBG.

2008-09-17 12:37  keesblom

	* Sept.17 Version for BT.  Added compatability with Firefox
	  2.0.0.16 by commenting out a test that only succeds on Firefox
	  3.0.1.

2008-09-17 12:01  keesblom

	* Sept.17 Version for BT. A "ReleaseNoShLibNoXerces" project was
	  added. Other projects were updated to have compatible
	  Preprocessor flags (WITH_SMIL30)

2008-09-11 14:38  keesblom

	* Adapted to Gecko-SDK 1.9 (xulrunner-sdk). Version for BT. Last
	  version before merge.

2008-09-05 17:09  keesblom

	* Added a few files needed  to compile firefox lugin fro windows
	  (old version) with xulrunner-sdk.

2008-09-05 17:03  keesblom

	* Moved to branch "kees-ffpluginWin32" The old plugin (without
	  IsDone) now works with lateste geck-sdk (xulrunner)). Some ugly
	  hacks where needed because Vc7 is aging.

2008-09-05 11:47  keesblom

	* Made the old version (without IsDone)  compile, link and run
	  again with WelcomeButtons.html.  Compiled using GeckSDKsamples
	  with its moztools installed in C:\moztools .

2008-09-01 13:49  jackjansen

	* Continued with work suspended last November: got Python interface
	  to Ambulant/Gtk working again.

2008-09-01 12:15  jackjansen

	* Continuing with work Rodrigo and me started with in November 2007
	  but for some reason stopped before we were done: getting rid of
	  GMainLoop object in gtk widget (and constructors).

2008-08-27 22:09  jackjansen

	* Datasinks can now be cleaned up by demux thread, so removed an
	  invalid assert.

2008-08-26 17:08  jackjansen

	* Getting started on creating systemComponent names for various
	  optional features of Ambulant.

2008-08-26 16:17  jackjansen

	* Datasinks need to be refcounted (bug encountered on Windows).
	  Fixed, but must still check for leaks.

2008-08-26 15:24  jackjansen

	* Put the config data for AAC audio in extra_data, where ffmpeg
	  will pick it up. This is needed since the new ffmpeg aac decoder.

	  Fixes #2073761.

2008-08-25 23:49  jackjansen

	* Played around with some debug output for rtsp playback, but
	  didn't find the bug yet.

2008-08-25 22:26  jackjansen

	* Added mutex debugging.  Fixed a minor bug that mutex debugging
	  brought to light.

2008-08-25 13:15  jackjansen

	* Fix for bug reported to the mailing list, in thread
	  <http://www.ambulantplayer.org/pipermail/ambulant-users/2008-August/000035.html>.

	  Repeating a seq or par with indefinite duration didn't work. The
	  code mixed up ending the simple duration with ending the active
	  duration. Fixed by setting the last simple duration in this case,
	  and checking whether we need to repeat.

2008-08-25 11:18  jackjansen

	* Did something I should have done a looooooooooong time ago: added
	  two methods that make debugging scheduler problems a lot easier.

	  node and time_node now both have a method has_debug(). This
	  returns true if the given node has the attribute _debug="xxx"
	  specified in the smil document.  The methods have an optional
	  string parameter that allow you to check for thevalue of the
	  attribute too.

	  This 10-line modification allows us to selectively print debug
	  output for specific nodes, set breakpoints, etc.

2008-08-25 10:16  jackjansen

	* Fixed a leak when stopping playback of video.  Fixed/documented
	  some other minor leaks.

2008-08-22 10:42  jackjansen

	* Video_renderer and its subclasses must share a lock, as they
	  share datastructures. Removed the locks from the subclasses, and
	  turned push_frame() into a protected method _push_frame().

	  This fix may well cause deadlocks in the near future.

2008-08-21 17:06  jackjansen

	* If we don't have the audio format information available when it
	  is needed, at least print something.

2008-08-21 13:49  jackjansen

	* More details.

2008-08-20 16:35  keesblom

	* Added 'selinux_patch.sh' set the appropriate linux security
	  context for the shared library to be used by firefox. Turned off
	  some debugging.

2008-08-20 16:32  jackjansen

	* Attempting to play back Ogg/Theora/Vorbis with 5.1 audio resulted
	  in a crash. Fixed.

2008-08-20 15:28  keesblom

	* Got rid of race-conditions in scheduler. To circumvent deadlocks,
	  some parts of smil_player memeber functions were moved into
	  callbacks to be executed by the event processor.

2008-08-20 14:22  jackjansen

	* Fix for #2051134, ogg/vorbis skips audio at the beginning.  The
	  real reason seems to be a bug in ffmpeg (reported there), we now
	  work around it by not seeking unless we really have to.

2008-08-20 00:11  jackjansen

	* ffmpeg audio input buffers also need padding, added.

	  Unfortunately this doesn't solve the ogg/vorbis playback problem
	  yet.

2008-08-19 23:14  jackjansen

	* Fix (workaround?) for bug 2046564: ffmpeg a/v out of sync.

	  It turns out ffmpeg can return timestamps that are not zero-based
	  (I've seen 0.5 seconds). Audio timestamps used to be ignored, but
	  now we use the very first audio timestamp seen to modify all
	  subsequent audio and video timestamps.

	  This seems to fix the issue.

2008-08-19 22:40  jackjansen

	* Some more details.

2008-08-18 11:18  jackjansen

	* Replaced an assert with a log print. This solves a problem with
	  Amis bug #63.

2008-08-18 00:12  jackjansen

	* If you jump to a node that has an ancestor that is disabled due
	  to a dynamic system test (or smil state test) this would result
	  in an assertion failure. We now continue playback after that
	  node, with a message in the log file.

	  Fixes a problem Amis ran in to.

2008-08-15 17:53  jackjansen

	* - Switched to new version of Xerces (2.8.0) - Switched to
	  building without "treat wchar_t as builtin"

	  These two make Amis integration work again.

2008-08-15 13:23  jackjansen

	* Workaround for yet another problem in hyperjumping: if you jump
	  to a child of a <par>, what may happen is that that child goes
	  from ts_active (got there while fastforwarding) to ts_postactive
	  (fastforwarding complete) to ts_active (start playback). This may
	  re-use the renderer, if the node had fill=freeze. Most renderers
	  seem not to care, but the html renderer got very upset. Applied a
	  workaround by detecting this transition sequence and calling
	  remove() before going to ts_active again.

	  Reported by Marisa.

2008-08-14 12:27  jackjansen

	* More bits of information.

2008-08-14 11:51  keesblom

	* Modified the IsDone() javascript interface function to return a
	  boolean rather than using an object as a parameter.

2008-08-14 00:14  jackjansen

	* Added tests of current Ambulant with DX renderer, which uncovered
	  more bugs.

2008-08-13 17:34  keesblom

	* Added ambulant_player's "is_done()" function to the JavaScript
	  interface of the Firefox plugin, and an application
	  "WelcomeIsDone.html", that uses a repeated timer to display an
	  alert() as soon as ambulant_player->is_done() returns true,

2008-08-12 15:54  keesblom

	* Added a function print_node(node*) callable from gdb that spits
	  out the to_string() representation of its argument

2008-08-12 00:07  jackjansen

	* Entered values for 1.8 on Windows.

2008-08-11 17:18  jackjansen

	* Started taking inventory of things that don't work on 1.8

2008-08-11 16:14  jackjansen

	* Fixed some things to make quicktime rtsp playback work a bit
	  better.

2008-08-11 16:07  jackjansen

	* - Added ability to referrence ambulane bug reports in footnotes.
	  - Added such a bug report for quicktime rtsp playback.

2008-08-11 14:27  jackjansen

	* I think we finally have all important media types, but there may
	  still be some problems with the way we create ogg/vorbis.

2008-08-11 10:57  jackjansen

	* Create smil for each media item.

2008-08-08 16:56  jackjansen

	* Tweaked markup to allow case-preserving tags.  Fixed smil
	  generation.

2008-08-08 16:39  jackjansen

	* Added generic quicktime and avi.  Added a couple of audio
	  formats.

2008-08-08 15:39  jackjansen

	* - Added 3gpp/amr.  - Added current (I think) RealVideo.  - Added
	  current (I think) Windows Media Video.

2008-08-07 17:18  jackjansen

	* - Removed 3gp a/v file: turned out to have aac audio in stead of
	  amr-wb.  - Added ogg/vorbis/theora - Added video-only 3gpp -
	  Added readme

2008-08-07 16:48  keesblom

	* Added a new configuration DebugNoShLibNoXerces with static
	  linkage to make the Firefox plugin work agian.

2008-08-07 16:28  jackjansen

	* Created first two media samples.

2008-08-07 14:13  jackjansen

	* Revived the old Frere Jacques song, and added a video track.
	  This will be used as the source material for the various audio
	  and video files for testing media compatibility.

2008-08-07 12:55  jackjansen

	* Started on generating form.

2008-08-05 16:31  jackjansen

	* - Extended database with formats for which we already have media
	  samples,   and some important ones.  - After loading database
	  test that we actuaqlly use everything we've defined.

2008-08-05 15:35  jackjansen

	* Added smilgen (preliminary) and detabbed markup.py.

2008-08-05 15:01  jackjansen

	* Split into modules.

2008-08-04 17:10  jackjansen

	* Details.

2008-08-04 17:01  jackjansen

	* Added a few more bits and pieces.

2008-08-04 15:23  jackjansen

	* - added markup module (3rd party PD module for html generation) -
	  generate html

2008-08-04 14:10  jackjansen

	* Starting to go somewhere.

2008-08-03 23:33  jackjansen

	* Getting started with some ideas on a media support database.	But
	  I've already noticed these are wrong:-)

2008-07-30 17:48  keesblom

	* Made "Use plugins" default, when they are selected at compile
	  time. Fixes #2873711.

2008-07-29 17:26  jackjansen

	* Added get_trransparent().

2008-07-29 16:17  jackjansen

	* The ffmpeg pkg-config files don't work on the Mac (at least: the
	  uninstalled.pc ones): they contain absolute pathnames to
	  libraries which then later libtool chokes on.

	  Added a crude workaround of using a sed command to turn the
	  pathnames into -L/-l combos.

2008-07-18 15:51  keesblom

	* Added/changed some AM_DBG lines for usec timing

2008-07-17 18:54  keesblom

	* Ambulant ported to Fedora 9.	gcc 4.3.0 reorganized some header
	  files qt doesn't work, since fedora moved to Qt 4 (incompatible
	  w. Qt 3) Will check tomorrow whether I've broken things on
	  Windows or Fedora 8.

2008-07-16 17:21  keesblom

	* Implemented 1st problem of #2015890 for gtk.	by implementing a
	  faster pan/zoom method.  Instead of first zooming the whole
	  picture to become a very big internal image and subsequently
	  copying only a very small part of it to the screen, first a small
	  local copy is made of that part of the image which will be
	  ultimately shown on screen, and only that is entirely zoomed.
	  This makes Fons' animations much faster.

	  In addition, added an error message in gtk_smiltext when an area
	  is referred to (from a.smil file) extending screen limits.

2008-07-15 16:01  keesblom

	* Implemented a faster pan/zoom method on qt, solving #2015890
	  problem 1 for qt.  Instead of first zooming the whole picture and
	  then copying only a very small part of a very big internal image
	  to the screen, first a local (small) copy is made of the part of
	  the image that will be ultimately shown on screen, and only that
	  is entirely zoomed. This makes Fons' animations much faster.
	  Also implemented some code for WITH_MICROSECOND_LOGTIMES (fine
	  grain timing).

2008-07-14 16:33  keesblom

	* Fixed 2nd problem of #2015890: gtk now pans correctly. Dunno why
	  so slow.

2008-07-11 17:01  keesblom

	* Added some rules to Makefile.am to make the installed libraries
	  work with firefox when selinux is enabled

2008-07-08 06:38  marisademeglio

	* minor bugfix to logger message in plugin_engine; NULL check for
	  get_info() in region.cpp -- it was making AMIS crash

2008-07-08 04:11  marisademeglio

	* fractional second addition was wrong for a timestamp of the form
	  0:00:02.440. because the function fraction_to_ms expects an int,
	  it must have assumed that the parameter is already in
	  milliseconds.  therefore, no conversion is required (and, in my
	  case, it gave a huge incorrect value).  this fixed a problem
	  related to AMIS.

2008-07-08 04:05  marisademeglio

	* url characters do not get converted tolower if they are not ascii
	  characters -- this is suspected to be causing trouble with
	  non-western characters in folder names

2008-07-07 13:33  keesblom

	* Make sure that bith typelib and include file are generated from
	  nsIAmbulantPlugin.idl

2008-07-01 16:44  keesblom

	* Apperently on some 64 bit systems (Suse) arch spits out X86_64
	  i.o. x86_64.

2008-06-30 16:41  keesblom

	* Added DTD's for SMIL 3.0 written by Sjoerd Mullender.  Modified
	  background transparency implementation, which proved not to have
	  been implemented correctly when the new DTD's were used.

2008-06-26 22:37  jackjansen

	* Added note about ffmpeg pkgconfig problems on osx.

2008-06-26 22:32  jackjansen

	* Reverted ffmpeg library change: the problem is not with our
	  Makefile but with the pkg-config files of ffmpeg. Need to fix
	  these.

2008-06-23 15:48  jackjansen

	* Got rid of hard-coded id for smil state in formfaces.

2008-06-23 15:48  keesblom

	* Merged branch keees-configure-100608 with trunk. ffmpeg is now
	  ounf through pkg-config.  aVg
	  include/ambulant/net/ffmpeg_common.h

2008-06-23 11:01  keesblom

	* Added a comment where the  -Xlinker -Bsymbolic added flag was
	  found

2008-06-19 15:31  keesblom

	* Revised 64 bit problems handling. You may need to compile
	  third_party_packages with extra flags for the C compiler. For
	  example, in ffmpeg-cvs: ./configure --extra-cflags=-fPIC.  Also,
	  you may need to add (for the time being) LIBS=-lbz2 to your
	  ./autogen.sh ...  line.

2008-06-16 11:30  jackjansen

	* Don't call formfaces rebuild() and friends directly, but raise
	  the xforms-rebuild event. This ensures auxiliary actions are also
	  triggered.

2008-06-10 16:38  jackjansen

	* Adapted for changes in timer code (timer_events no longer exists)
	  and plugin code (WITH_PYTHON_PLUGIN now needs to be set by
	  configure).

2008-06-10 13:56  keesblom

	* Revert to previous state, because the changes were not pkg-config
	  based, and therefore not suitable for inclusion in the trunk

2008-06-09 17:27  keesblom

	* Temp. changes for ffmpeg to work wirh libfaad. configure script
	  needs to be rewritten properly using pkg-config.  WelcomeRTSP now
	  plays AmbulantTune.mp4 (aac over RTSP) frome media2.cwi.nl

2008-06-05 15:34  keesblom

	* Changed packet_avail into push_data. When called from
	  rtsp_datasource.cpp, it is now always done w. wait and retry if
	  the packet cannot be deliverd.  EOF calls always return true
	  (data delivered). Only problem now is that mp3 over RTSP using
	  liveMediaServer generates lots of "incorrect frame size" warnings
	  on the console, but Bo's code handles this correctly and no data
	  is lost. It is caused by liveMediaServer (differing from
	  HelixServer) often generating packets wcontaining 2 or 3
	  frames,while ffmpeg only wants one frame for each call to
	  av_decode_audio2(...). Latest ffmeg was used from svn.

2008-06-02 17:14  keesblom

	* Addapted rtsp_datasource ro new API where data_avail(3 args) and
	  buffer_full are replaced by bool packet_avail(3 args). Seems to
	  work, but RTSP code needs more tests and fixes. Used local
	  liveMediaServer for audio, since media.cwi.nl is broken w.r.t
	  rtsp after severe crash.

2008-05-29 14:24  keesblom

	* Merge brancn kees-datasource-260508 with trunk

2008-05-23 16:04  keesblom

	* Changed error handling of the pthread functions: they all return
	  an errorcode > 0, while we tested like if (pthread_function() <
	  0) handle_error().  Added locking in the smil_player
	  (start(),stio(),pause(), resume() etc).  Made the inclusion on
	  the python plugin not absolute, but depending on the configure
	  setting.

2008-05-21 14:30  keesblom

	* Added a permanent helgrind suppression for virtual destructors
	  (vtable).

2008-05-21 11:50  keesblom

	* last timer_control_impl problem solved in smilt_player.cpp r.
	  1.115

2008-05-21 11:26  jackjansen

	* Changed cleanup order for smil_player items: event processor and
	  timer should be deleted later. Hope this fixes helgrind
	  complaint.

2008-05-20 17:30  keesblom

	* Reset 'const' keyword where it was deleted because of the usage
	  of semaphores and added
	  const_cast<lib::timer_control_impl*>(this)-> where the 'const'
	  member function needs access to the semaphore

2008-05-19 16:43  keesblom

	* [no log message]

2008-05-19 16:27  keesblom

	* Added semaphore protection to the timer. This cleared some
	  helgrind suppressions.

2008-05-19 11:41  jackjansen

	* Added a few comments.

2008-05-15 15:19  keesblom

	* Used valgrind from svn with a working helgrind on gtk and qt.
	  Welcome.smil was played to the end, theb File->Quit was pressed.
	  When using valgrind
	  --suppressions=./Documentation/misc/valgrind.supp ...  then I
	  didn't see valgrind errors, for race conditions, memory access or
	  leaks.  This implies, that the remaining problems (for
	  Welcome.smil) are now documented by the valgrind suppressions
	  file.

2008-05-14 16:47  keesblom

	* Fixed the bug in News demo s.t. click didn't work anymore
	  (#1948935)

2008-05-08 16:24  keesblom

	* Changed size_t to std::string::size_type to match the book

2008-04-26 21:50  marisademeglio

	* added #ifdef WITH_SMIL30 around calls to add_language and
	  clear_langauges because it wouldn't compile with the vc8 project
	  otherwise

2008-04-26 21:47  marisademeglio

	* added #ifdef WITH_SMIL30 around on_state_change(...) because it
	  wouldn't compile with the vc8 project otherwise

2008-04-24 16:15  keesblom

	* Refined space handing for smiltext word mode (qt, windows), s.t.
	  the erroneous space in smiltext-begin-sync.smil has now
	  disappeared.

2008-04-24 14:35  keesblom

	* Attempt to fix #1948594 by removing calls to m_scheduler->exec()
	  in clicked(), on_char() ans on_state_change().

2008-04-22 15:54  jackjansen

	* Disabled relaxed seq begin conditions, which didn't make it into
	  SMIL 3.  There were also still some bugs in the implementation.

2008-04-22 14:31  jackjansen

	* Microsoft's isspace() doesn't like non-ascii characters.

2008-04-22 14:12  jackjansen

	* Adapted for changes in ffmpeg (sigh)

2008-04-22 14:12  jackjansen

	* Adapted for API change (locking smiltext engine).

2008-04-22 12:26  keesblom

	* Adapted smiltext_layout_engine to the new smiltext API (and
	  qt_smiltext too), s.t. qt owrks (but sometimes X-errors, some
	  cleanup may be needed).

2008-04-21 17:17  keesblom

	* *********** smiltext_engine API has been modified ***********

	  Added locking in smiltext_engine. All renderers (mac, qt, windows
	  etc.) need to be adapted: they now must call smiltext::lock()
	  before calling any of the following smiltext_engine members:
	  begin(), newbegin(), end(), done(),  is_finished(), is_changed()
	  or  is_cleared() and they must call smiltext::unlock()
	  appropriately. gtk seems to work.

2008-04-17 17:45  keesblom

	* Joined branch kees-bugfix-010408 on ambulant-dev machine with
	  trunk

2008-04-17 17:11  keesblom

	* Turned off debug image dump

2008-04-17 16:44  keesblom

	* Moved all pango calls from player thread to main thread because
	  pango is not thread-safe.

2008-04-15 17:30  keesblom

	* Some tweaks s.t. Configuration ReleasShlib also works w.
	  plugin_ffmpeg in VC7.

2008-04-15 16:18  keesblom

	* Added plugin_ffmeg.vcproj for VC7.  Works, except h264.

2008-04-15 13:47  jackjansen

	* Revived building live with VC7.

2008-04-14 17:02  jackjansen

	* Negative begin times on smiltext elements works, at least on the
	  mac.

2008-04-10 07:49  jackjansen

	* Use TevEvent as the event raised by <tev>, in stead of
	  BeginEvent.

2008-04-09 14:13  keesblom

	* Merged branch 'kees-bugfix-010408'(during Venice meeting) with
	  trunk

2008-03-31 13:59  keesblom

	* Added code to delete m_player and m_doc in the right order. Fixes
	  #1843229.

2008-03-28 12:52  keesblom

	* Accidently set systemLanguage="fr" (testing only)

2008-03-28 12:50  keesblom

	* Changed "systemLanguage" settings s.t. resetting the language
	  works by clearing the active language map.

2008-03-28 11:59  keesblom

	* Added code s.t. systemLanguage setting works (repaires Tests 8.8)

2008-03-27 22:16  jackjansen

	* Found the problem with stateChange events not always being
	  raised: you can reuse xmlXPathContext objects (that's indeed what
	  they're for) but you must reset the node every time, because some
	  operations modify it.

2008-03-27 17:26  jackjansen

	* Defulating to inline state when accessing src url failed wasn't
	  implemented. Fixed.

2008-03-27 17:19  jackjansen

	* - Handling of an empty <state> section wasn't implemented yet.  -
	  Modifying the document could make the context node invalid, so
	  re-initialize it after adding or deleting nodes.  - Code still
	  thought it should handle "post" in stead of "put".

2008-03-27 14:20  jackjansen

	* textMode=crawl works for starting at center, right edge.

2008-03-26 17:26  jackjansen

	* Fixed some bugs with SMILText crawl support on the Mac.

2008-03-26 12:29  keesblom

	* update  AmbulantFFplugin for windows. DOES NOT WORK, crashes FF.
	  Needs to be named: c:\program files\mozilla
	  firefox\plugins\npambulant.dll

2008-03-21 00:41  jackjansen

	* Glue for communicating Firefox window to other Ambulant plugins.

2008-03-20 23:37  jackjansen

	* Get the HTML document location without using Javascript.  The
	  final trick was that we want document.location.href.

2008-03-20 17:04  jackjansen

	* started on getting document.location directly. Doesn't work yet
	  because it's an object, not a string. Temporarily disabled.

2008-03-20 13:40  keesblom

	* [no log message]

2008-03-20 13:36  keesblom

	* [no log message]

2008-03-18 16:48  bogao

	* Fixed a bug which caused Ambulant crash on windows mobile when
	  rendering mp4 including aac audio. For some reasons, somtimes,
	  m_frames.size is 0 in
	  ffmpeg_video_decoder_datasource::get_frame(); we should not
	  access m_frames any more when this is happening.

2008-03-18 16:42  bogao

	* Fixed a bug which caused Ambulant crash on windows mobile when
	  rendering mp4 including aac audio. For some reasons, somtimes,
	  m_frame in dx_dsvideo_renderer::redraw is NULL; we should not
	  access m_frame any more when this is happening.

2008-03-14 11:49  jackjansen

	* Got stuck: CG drawing in NPAPI plugin is scheduled to be included
	  shortly, but it isn't in the current Firefox yet. There is a
	  workaround, but it is so ugly I'll try to postpone it.

2008-03-14 10:27  jackjansen

	* Getting started on firefox plugin using CG rendering. It plays
	  audio, no idea how much further I'll get:-)

2008-03-13 14:52  jackjansen

	* stateChange() events work, with any XPath path expression as
	  argument.

2008-03-12 17:29  jackjansen

	* Existing stateChange() event implementation was still a quick
	  stopgap.  Started on implementing the real thing.

2008-03-12 15:53  keesblom

	* Got rid of 2 double free's

2008-03-11 17:25  keesblom

	* valgrind found leaks playing mpg-h264-file-noclip.smil, I fixed a
	  few of them.	The biggest leak (in ffmpeg_video.cpp) is still
	  there; so the fix there, while seeming necessary, is not enough;

2008-03-11 17:08  keesblom

	* Modifications of libtool as generated on 64 bit Fedora 8
	  installation to handle 322 bit objects generate 32 bit libraries

2008-03-10 16:06  jackjansen

	* Suddenly remembered the ffmpeg requirement that every packet
	  passed to avcodec_decode_video() needs
	  FF_INPUT_BUFFER_PADDING_SIZE extra zero bytes at the end.

	  It is hoped this will solve the occasional crashes and extraneous
	  error messages during video decode.

2008-03-07 16:40  jackjansen

	* Python hashes are longs, not ints.

2008-03-07 15:34  jackjansen

	* Partial cleanup: got rid of one layer of indirection, normalized
	  debug output to AM_DBG style.

2008-03-07 14:09  jackjansen

	* Merging exp-jack-firefox-plugin-mac.

2008-03-07 11:19  jackjansen

	* Select fonts only in the main thread, not in a secondary thread.
	  Not sure whether this is the actual problem, but it does seem to
	  solve the issue at hand (the annotator crashing with an overlay
	  document).

2008-03-06 23:39  jackjansen

	* Updated for newer ffmpeg.

2008-03-06 23:10  jackjansen

	* The handling of pts/dts values in ffmpeg has changed (at least:
	  otherwise I don't understand how our code ever worked). We now
	  need to use dts as the timestamp of the frame, apparently
	  avcodec_decode_video() does internal buffering.

	  Fixes the shaky video problem.

2008-03-06 14:53  jackjansen

	* On 10.4 (and earlier) initWithCGImage: doesn't exist, so work
	  around it using the old memcpy() code.

2008-03-06 14:52  jackjansen

	* MMS document icon no longer exists.

2008-03-04 23:30  jackjansen

	* Building the player failed if both --with-cocoa and --with-cg
	  were specified to configure. Fixed, but I'm not sure the result
	  is exactly what we want.

2008-03-03 15:48  jackjansen

	* Parse the command line arguments, so we get rid of double quotes
	  (and possible other junk) before sedning the filename to the
	  other Ambulant instance.

2008-03-03 12:07  jackjansen

	* On WM5, when starting a second copy of Ambulant communicate the
	  file name opened to the first copy.  This follows an idea from
	  <http://www.pocketpcdn.com/forum/viewtopic.php?t=4524>.

2008-03-02 22:12  jackjansen

	* Plugins weren't always loaded into the webkit plugin. Fixed.

2008-03-02 22:09  jackjansen

	* Squash a warning.

2008-02-29 17:14  jackjansen

	* Getting started on making a second copy of Ambulant communicate
	  the filename passed to a previously running copy.

	  Does not work yet.

2008-02-29 14:54  jackjansen

	* Builds and installs now also work for separate build/source
	  trees.

2008-02-29 12:34  jackjansen

	* For video, after need_redraw() we call redraw_now(). We don't
	  want to wait for the scheduler to become quiet when we're
	  rendering video.

2008-02-28 23:41  jackjansen

	* Quick patches for new methods.

2008-02-28 17:06  keesblom

	* Some cleanup: changed (mime)type to x-ambulant-smil;disabled
	  DEBUG

2008-02-28 17:00  jackjansen

	* Attempting to get the Webkit plugin working on another machine
	  than Jack's laptop.

2008-02-28 15:07  keesblom

	* Automated generation of nsIAmbulantPlugin.[h|xpt] from .idl with
	  xpidl.

2008-02-28 12:46  jackjansen

	* Two patches to make building firefox plugins work for me: -
	  patch_libtool.sh is located in the $srcdir, not the current
	  directory - get include files from gecko_sdk, not a full Mozilla
	  source distribution

2008-02-26 16:30  keesblom

	* Improved firefox plugin. When the html page doesn't contain a
	  javascript function "GetDocumentLocation(), some javascript code
	  is dynamically evaluated to get the information.

2008-02-25 17:29  keesblom

	* Cleanup ff plugin: new npn_gate (from npruntime), Calls script
	  functions as well. Started to join url with base, works, but not
	  finished.

2008-02-22 23:01  keesblom

	* I just did it ! Calling javascript's alert() function from the
	  firefox plugin ! The code itself is completely experimental (one
	  bag of garbage) but it works, now only cleanup and expanding
	  needed.

2008-02-22 18:30  marisademeglio

	* removed old references from the vc71 project

2008-02-15 17:06  jackjansen

	* Fixed a bug where we could inadvertantly still pass a
	  non-terminated string to NSString sintrgWithUTF8String:.

2008-02-15 11:15  jackjansen

	* Merging windows redraw optimization branch: While the
	  event_processor has events outstanding for "now" redraws are not
	  done but in stead queued (and coalesced). At the end one redraw
	  is done. This makes the player a lot snappier.

2008-02-14 15:36  jackjansen

	* Last reference to mms player (I hope) bites the dust.

2008-02-14 15:05  jackjansen

	* Getting rid of dead wood: - dg renderers - arts audio renderer -
	  mms player

2008-02-14 14:26  jackjansen

	* Getting rid of dead wood: - dg renderers - arts audio renderer -
	  mms player

2008-02-13 16:33  keesblom

	* Addendum to Jack's change. But plugin not tested w. live.

2008-02-13 11:40  jackjansen

	* Merging exp-jack-less-video-copying branch: - frame dropping only
	  happens at beginning of the pipeline, once a	 frame has been
	  decoded it will be displayed (possibly at the expense   of later
	  frames). This gives better performance on handhelds, at the
	  expense of lipsync (but that wasn't there anyway).  - copying
	  frame data is minimized, when possible (i.e. not on	windows
	  mobile, unfortunately).  - byte-swapping of videoframes is done
	  in the datasource, renderers	 should now specify how they want
	  their data.  All this has changed the API, I've tried to make
	  sure that this will be flagged by the compiler.

2008-02-13 11:31  jackjansen

	* Quick patch to make autogen run again. Kees should look at this.

2008-02-12 13:27  keesblom

	* made the plugin work in 64bit mode. TBD: cleanup (a.o. ugly
	  libtool patch), npapi compatability. Don't know if it still works
	  in 32bit mode.

2008-02-06 22:20  jackjansen

	* Various issues that were uncovered at the Seattle F2F.

2008-02-06 15:50  keesblom

	* Added m_dest->get_global_topleft() to final destination of the
	  simlText run.

2008-02-06 11:42  keesblom

	* Updated how to build ambulant on Fedora 8 in 64 bit mode

2008-02-06 11:41  keesblom

	* Changed a cast to (int) into (void*) in a debug() call to satisfy
	  g++ on Fedora 8 in 64 bit mode

2008-02-05 14:18  keesblom

	* Found a way to configure for 32 bit mode on 64 bit Fedora 8.

2008-02-01 23:45  jackjansen

	* Monday's video change (only drop frames beofre current timestamp,
	  not upto and including) was a mistake. Reverted.

2008-02-01 15:38  jackjansen

	* Got partial redraws to work. But it is really a bit of a hack:
	  apparently I have no idea when to use topleft and when to use
	  botleft coordinates.	Still, the current code seems to work.

2008-02-01 11:59  jackjansen

	* Regenerated for change in signature of user_event().

2008-01-30 11:49  keesblom

	* removed void qt_smiltext::user_event()

2008-01-29 14:04  jackjansen

	* Tweaks to make video more palatable on the iPhone. Unfinished.

2008-01-29 14:03  jackjansen

	* Threw away one frame too many. Fixed.

2008-01-28 17:22  jackjansen

	* Mainly adding some comments on optimization findings.

2008-01-28 16:21  keesblom

	* Some changes for Nokia 800/810.  Changed GTK_TRANSPARENT_COLOR to
	  "fix" #1879834. Nokia 800 has 16 bit color Changed pref. for "use
	  plugins" depending whether plugin support is available

2008-01-28 15:42  jackjansen

	* Redraws always resulted in complete regions being redrawn,
	  apparantly as a workaround for some problem years ago.

	  Disabled this, so only the relevant area is redrawn. We should be
	  on the lookout for any redraw problems this may result in.

2008-01-28 11:38  jackjansen

	* Fixed text color and look.

2008-01-28 11:15  jackjansen

	* Handle CR and LF, somewhat.

2008-01-22 19:55  jackjansen

	* More bits and pieces for the changes wrt. event sensitivity.

2008-01-22 03:02  jackjansen

	* Implemented z-ordering of clicks. Up to now clicks always fired
	  on all nodes being displayed on top of each other.  Also
	  partially implemented sensitivity attribute.

2008-01-22 03:01  jackjansen

	* Better reporting of statistics.

2008-01-22 03:00  jackjansen

	* Fixed error that text was shown above top-of-region.	Fixed error
	  with too much bytes begin dislayed for data: urls.

2008-01-20 23:42  jackjansen

	* The file COPYING is missed by the automatic license update
	  procedure. Fixed, and noted this fact in the readme.

2008-01-20 23:29  jackjansen

	* smilText on Windows always crashed in a VC8 build. This seems to
	  be due to VC8 crashing on the dereference of an iterator::end(),
	  and through some roundabout way this happens with last_word_seen.
	  Moved a bit of the logic around, and it seems to work.

2008-01-18 23:43  jackjansen

	* Enabled mouse in desktop-CoreGraphics player, and rationalized
	  some CoreGraphics/UIKit/Cocoa ifdefs.

2008-01-18 16:42  keesblom

	* Implemented textRate="auto" for textMode="crawl"

2008-01-18 10:29  jackjansen

	* Merging exp-jack-uikit branch.

2008-01-17 22:19  bogao

	* Solved problem with rendering audio (aac) included in a video
	  (h263) mp4 streamed by QuickTime Streaming Server.

2008-01-17 16:24  keesblom

	* Solved problem with extra black space after a <span
	  textBackgroundColor="black:>

2008-01-16 22:16  jackjansen

	* Julien discovered that "values" animation wasn't implemented for
	  panZoom. Fixed.

2008-01-16 17:45  keesblom

	* Chnaged the smiltext_layout_providerr to the new space handling
	  strategy involving explicit spaces as text data added by the
	  smiltext_layout_engine

2008-01-16 17:18  keesblom

	* Chnaged the smiltext_layout_providerr to the new space handling
	  strategy involving explicit spaces as text data added by the
	  smiltext_layout_engine

2008-01-16 14:25  keesblom

	* Fixed the bug in <smiltext> where an additional black space was
	  produced immediately after a <span textBackgroundColor="black">.
	  Initially, now conditional spaces are placed between words.
	  Later, they are either converted into data or ignored, the latter
	  only when appearing immediately before a newline, or at the end
	  of a run.

2008-01-15 18:17  keesblom

	* Tried in vain to fix the problem with black blanks just before a
	  <span textBackgroundColor="black">, only partly succesful:
	  Instead of a black space before the span, there is now one just
	  after it.  Will finish later.

2008-01-15 15:31  jackjansen

	* data: url text is not nul-terminated. Copy it.

2008-01-15 13:31  jackjansen

	* Updated for SYMM group distribution.

2008-01-15 11:55  jackjansen

	* Added 2008 to the license text.

2008-01-15 11:52  jackjansen

	* Added 2008 to the license text.

2008-01-14 16:36  jackjansen

	* Applied scrolling fixes to machine-independet code too.  Removed
	  debug.

2008-01-14 16:33  jackjansen

	* textConceal=initial mixed up region and text height. Fixed.

2008-01-14 16:21  jackjansen

	* Added missing break. This makes textConceal=final work.

2008-01-14 14:28  jackjansen

	* Fixed a problem with textConceal=initial

2008-01-14 14:03  keesblom

	* Repaired mediaOpacity bug on Windows

2008-01-14 11:23  jackjansen

	* Added get_rect() method.

2008-01-14 10:32  jackjansen

	* Implemented textDirection overrides for Mac.

2008-01-14 00:06  jackjansen

	* Getting started on implementing textDirection. Also make sure
	  that textWritingMode is only supplied on a paragraph basis (and
	  textDirection only on a span basis).

2008-01-13 23:14  jackjansen

	* Fixed utf8 support for smilText nodes.  Enabled both utf8 and
	  utf16 for external text nodes.

2008-01-13 22:29  jackjansen

	* - Fixed problem with documents not playing a second time (the
	  body	 node didn't reset).  - Removed debug.

2008-01-13 21:39  jackjansen

	* More changes to relaxed seq child begin conditions. Still does
	  not work.

2008-01-11 22:54  jackjansen

	* Changes to make things compatible with 10.4 again.

2008-01-11 17:54  keesblom

	* Some refinements implemented

2008-01-11 16:02  keesblom

	* Revised textRate="auto" code for scroll: each single case is now
	  treated explictily.  Still TBD: get simple duration, get proper
	  rectangle, crawl, refactorizatin, tests.

2008-01-11 13:21  jackjansen

	* Implemented chromaKey.

	  But: - Only on 10.5 - Only for bitmap images - Only opacity 0.0
	  and 1.0.

2008-01-11 11:37  jackjansen

	* Implemented auto-rate for Mac.

	  Code still needs to be refactored, but I'm waiting for Kees with
	  that.

2008-01-10 17:22  jackjansen

	* Fixed code that ignores tev/clear for autorate scrolling.  Did a
	  half-assed implementation of textPlace for MacOSX.

2008-01-10 16:38  jackjansen

	* Implemented numeric values for textFontSize.

2008-01-10 15:34  jackjansen

	* Implemented allowReorder on switch.

2008-01-10 15:04  keesblom

	* Implemented default textRate. Still full of bugs, but the interop
	  test works.

2008-01-10 14:54  jackjansen

	* Added support for multiple preferred languages, with preferences
	  being a float in stead of a boolean.

	  Implemented filling this table for MacOS.

2008-01-10 13:40  keesblom

	* Initial checkin of default rate for "crawl"/"scroll".  It doesn't
	  work yet, but hopefully nothing is broken.

2008-01-10 13:35  keesblom

	* Changed "next" to "begin" in <tev/>'s to match the timing with
	  the specs.

2008-01-09 17:13  jackjansen

	* Temporarily disabling relaxed seq begin conditions: things broke.

2008-01-09 15:46  jackjansen

	* chromaKeyOpacity had incorrrect default (100% in stead of 0%).
	  Fixed.

2008-01-09 14:10  jackjansen

	* Fixed another bug in the relaxed seq begin condition code: if a
	  seq child ends it must do a reset() on it's next sibling (before
	  moving it to ts_proactive).

	  I'm not 100% sure this is without bad side-effects, I've asked
	  Sjoerd for comments.

2008-01-09 14:09  jackjansen

	* When building a 10.4 compatible player under 10.5 we must supply
	  the MACOSX_DEPLOYMENT_TARGET environment variable.

	  For now this must be enabled manually.

2008-01-09 14:08  jackjansen

	* This file doesn't belong under cvs, it's generated.

2008-01-08 17:02  jackjansen

	* Cocoa image coordinates are in DPI-based units, not pixels, by
	  default.  It turned out there were bits of code that worked
	  around this, but the workaround started failing for Julien's
	  images, which had no DPI setting.

	  We now always force modify the DPI setting to match the unit
	  width/height match the pixel width/height, and work in pixels.

	  May need to look at the CG image renderer too.

2008-01-08 14:45  jackjansen

	* Our drawing area missed two pixels at the top, and has probably
	  missed these since day one, until Julien spotted it today
	  (thanks!).

	  Fixed, and added an assert to make sure this doesn't happen again
	  in the future: the problem is an interdependency between the NIB
	  and the code.

2008-01-07 23:05  jackjansen

	* I think panZoom now works for pixel values.

2008-01-07 17:19  jackjansen

	* Built the first installer that has both DirectShow and ffmpeg
	  rendering.

2008-01-04 17:37  jackjansen

	* Selecting out of bounds pixels didn't work. It still doesn't:-)

2008-01-04 17:04  bogao

	* Corrected the DirectDrawSourface::GetDC() failed when playback a
	  long video(at least four minutes).

2008-01-04 16:23  jackjansen

	* panZoom only worked correcrly if mediaAlign/regAlign/regPoint
	  were specified. Made it work for at least some cases where these
	  aren't specified, but I'm not convinced it is a full fix.

2008-01-04 15:42  jackjansen

	* Got rid of some unnecesary redraws.

2008-01-03 16:35  keesblom

	* Revised clearing to default background (white) first thing in
	  redraw (ala qt).

2008-01-03 15:40  keesblom

	* Revised clearing to default background (white) first thing in
	  redraw.

2008-01-03 14:20  jackjansen

	* - Always draw the background color before calling the toplevel
	  redraw() method.  - Don't redraw in the background_renderer if
	  the color is transparent.  - Use GetSysColor() to obtain default
	  background and text color.

2008-01-03 13:04  jackjansen

	* Added missing files.

2008-01-02 14:32  jackjansen

	* Upodated for new textPlace values (start/center/end).

2007-12-27 00:31  jackjansen

	* Attempting to fix bug revealed by SMIL3 interop test
	  timingandsync-test1.smil, so far without success.

	  The problem is that a single event activated all children of the
	  seq, because they were all in ts_proactive. Fixed that, by
	  changing the activation code of a seq to only move the first
	  child to proactive, and have each seq child move the next sibling
	  to proactive.

	  Unfortunately the children still all react to the single event.
	  My guess is that when a child is moved to proactive (because its
	  previous sibling ended) the next exec() somehow thinks the first
	  interval is already elegible, but I still need to check (a)
	  whether this is the case indeed, and (b) why.

2007-12-20 16:46  keesblom

	* Added firefox_plugin_gtk. See INSTALL.txt for current unfinished
	  state.  I nevertheless commit it because it works and we are
	  close to Christmas.

2007-12-11 17:17  jackjansen

	* Cleanup.

2007-12-11 16:52  jackjansen

	* H264 over rtsp from quicktime server works! But: there's still a
	  lot of cleanup to be done, and special-case code to be removed.

2007-12-11 15:38  jackjansen

	* Added a bit of debug around thread cleanup.

2007-12-10 16:42  jackjansen

	* Added the other two methods that Daniel Weck requested.

2007-12-10 16:41  jackjansen

	* Now that we sometimes use a borrowed reference to the
	  AVCondecContext we should record this fact, and not free it.

2007-12-10 15:57  jackjansen

	* When opening an audio stream we should not allocate a new
	  AVCodecContext, but use the one provided to us. Some fields in
	  there have alrady been initialised and they won't get
	  re-initialised if we recreate the AVCodecContext anew.

	  Note: should investigate whether this is also needed for video.

2007-12-10 11:46  jackjansen

	* Implemented rtsp-over-tcp preference for windows mobile.

2007-12-10 10:33  jackjansen

	* Implemented rtsp-over-tcp preference.

2007-12-09 23:25  jackjansen

	* - added preference setting for RTSP-over-TCP (as opposed to
	  default RTSP-over-UDP). Need to add UI for other platforms too.
	  - worked around race condition between rtsp_demux and
	  demux_datasource by removing one lock. Needs to be fixed at some
	  point.

2007-12-07 17:49  jackjansen

	* We now do (as far as I can see) exactly the same as VLC.  Except
	  that our code doesn't work:-(

2007-12-07 16:07  jackjansen

	* More refactoring: moved all per-subsession initializations into
	  one method, and call that from supported().  Also rationalized
	  initialization/cleanup of context.

2007-12-07 13:04  jackjansen

	* Mods to make things work on windows again.

2007-12-06 11:38  jackjansen

	* extra_data pointers from plugins should be static, otherwise all
	  plugins share a single variable, not what we want:-)

2007-12-04 17:15  jackjansen

	* More cleanup, and we're now following the lead of VLC more than
	  that of Mplayer. VLC can actually play our H264 streams. We still
	  can't, but getting closer.

2007-12-04 17:14  jackjansen

	* Change requested by Daniel Weck: let rate adjustment be additive,
	  not multiplicative.

2007-12-03 17:37  jackjansen

	* Re-eneabled the vbuffer stuff: it is indeed needed, because
	  live555 support for H264 is minimal, it does not recombine
	  packets into frames, we have to do that ourselves.

	  Timing is now correct (also for clipBegin) but the data is still
	  pretty messed up. Will play with thhe magic 3-byte fillers
	  tomorrow.

2007-12-03 15:50  jackjansen

	* Reorganized a lot of the rtsp code. Tentatively got rid of the
	  stuff I don't understand, and tried to rationalize the rest.

	  mp4v plays (both with and with clipBegin), h264 not yet.

2007-12-03 11:18  jackjansen

	* Finally found the nasty bug that sometimes crashes the player on
	  close: in the ~mainloop() destructor we first delete m_doc and
	  later (through our base class destructor) gui_player. However,
	  the latter does reset on the time_node graph, which has
	  references to the node graph.  But that one got zapped when we
	  deleted m_doc.

	  Fixed by manually deleting gui_player::m_player before m_doc.

	  Also need to check this for other platforms.

2007-12-03 00:07  jackjansen

	* Reorganized some code to get rid of lots of indenting.

2007-12-02 23:24  jackjansen

	* In the video decoder, first do the timestamp calculations and
	  then do the image conversion. This way we can skip the conversion
	  if we know we are going to drop the frame anyway.

2007-12-02 22:52  jackjansen

	* Replaced incorrect seek() call with read_ahead() (which was the
	  intention originally).  Rationalized timestamp handling.

2007-12-02 22:08  jackjansen

	* Got rid of support for ancient ffmpeg versions. Oldest allowed is
	  now 51.12.2 (the version we have on the website for Windows
	  builds).  Also removed some dead wood.

2007-12-02 21:26  jackjansen

	* Partial fixes for clipBegin. Incomplete.

2007-11-30 12:24  jackjansen

	* Refactored: changed after_reading_{audio,video} into stubs that
	  call out to methods in rtsp_demux. These methods can now do
	  proper locking and have access to all instance variables.

2007-11-30 10:44  jackjansen

	* - rtsp crashed if you stopped playback before the stream was
	  exhausted   (attempting to feed data to a deleted datasink).
	  Fixed.  - ffmpeg timestamp scaling should only be done when there
	  is a videostream.  - don't try to build gtk support for Python
	  unless on Linux.

2007-11-30 10:26  bogao

	* fixed ambulant (on windows mobile 5 with ffmpeg and live555)
	  crash when rendering mp4 over rtsp

2007-11-30 00:48  jackjansen

	* Fixed clip-begin problems for ffmpeg-only (i.e. without live555):
	  added a call to av_rescale_q() to convert our microsecond-based
	  timing to the timescale the video uses. This makes you wonder how
	  it ever worked...

	  Still need to check whether live555 has a similar problem.

2007-11-28 14:56  jackjansen

	* Minor tweaks for building on 10.5

2007-11-28 12:21  bogao

	* In after_reading_video: Sleep 10 msec when the databuffer of sink
	  is full. Otherwise, on windows mobile, continuely feeding data to
	  sink will eat up all of memory of windows mobile and make
	  ambulant freeze because ffmpeg cannot consume the data in the
	  sink fastly enough with its low power cpu and limited memory.

2007-11-23 16:29  rlaiola

	* Some modifications to include GTK.

2007-11-23 16:28  rlaiola

	* We (Jack) figured out that the main loop is not more necessary in
	  Ambulant Player implementation using GTK.

2007-11-23 16:24  rlaiola

	* We (Jack) figured out that the main loop is not necessary in our
	  GTK implementation of Ambulant Player.

2007-11-23 16:19  rlaiola

	* Modification that enables the Ambulant Player to present video
	  files (also containing audio).

2007-11-23 16:14  rlaiola

	* This is an example of a GTK application embedding Ambulant Player
	  in a Python program.

2007-11-21 12:30  bogao

	* Begin to render mp4(h264) streamed from Feng media server. It
	  works now but need refine.

2007-11-20 14:47  jackjansen

	* Added some debug output to try and find redraw problem in
	  embedded gtk player.

2007-11-20 14:36  jackjansen

	* - Plugins were copied too late. Fixed.  - Removed various
	  /*AM_DBG*/.

2007-11-19 17:04  jackjansen

	* Disable deletion of datasource factories when deleting the global
	  factory holder. This leaks, but unfortunagtely some datasource
	  factories are singletons (and some are not).

2007-11-16 14:05  jackjansen

	* Quick hacks to try and get gtk bridging to work. Hand-edited the
	  generated code, to be fixed once it actually works.

2007-11-15 00:01  jackjansen

	* Copy the Ambulant shared libraries into the plugin bundle, and
	  modify the main binary to refer to these copies with the
	  @loader_path magic.

	  These changes make the plugin completely self-contained, and no
	  more environment variables are needed. Yeah!

2007-11-14 22:34  jackjansen

	* If we are running in a plugin, also add the plugin bundle's
	  PlugIn directory to our plugin search list.

2007-11-14 22:17  jackjansen

	* Merging branch exp-jack-webkit-web20: - New webkit_plugin that
	  communicates the webkit hook to Python plugins   and to the
	  optional wkdom plugin.  - New wkdom plugin that replaces the
	  default node implementation by   one based on the WebKit DOM, if
	  we are running in a WebKit environment.  - New plugin
	  pyamplugin_webkitscripting that implements SMIL State   in
	  WebKit, allowing state to be shared between the SMIL document
	  running in Ambulant and the FormFaces XForms implementation
	  running in   the web page hosting Ambulant.

2007-11-14 16:52  jackjansen

	* Using WebKit DOM nodes in ambulant starts to work somewhat, but
	  there are still problems. May be a threading issue.

2007-11-13 15:51  rlaiola

	* A few more steps towards a Python interface to gtk-ambulant

2007-11-13 10:24  keesblom

	* Implemented textConceal (all values) for gtk.

2007-11-08 22:34  jackjansen

	* m_in_hyperjump_path wasn't initialized. Fixed.

2007-11-08 15:54  keesblom

	* Made smilText w. Opacity and ChromaKey work again for gtk

2007-11-06 15:37  keesblom

	* Revived  Ambulant Firefox plugin on WindowsXP

2007-11-06 06:45  jackjansen

	* In the WebKit plugin, smilText was rendered in a very weird
	  place.  Fixed this by adding a lockFocus, it seems our redraw was
	  called without it?

2007-11-06 05:44  jackjansen

	* The new(ish) default windowsize code failed when no layout at all
	  was given. Amis ran into this, because that's the case for Daisy
	  books.  Fixed.

2007-11-05 12:27  keesblom

	* Repaired obvious typo in an attempt to revive the firefox plugin

2007-11-03 21:46  jackjansen

	* Tweaks for 10.5 and newer ffmpeg

2007-11-02 17:13  rlaiola

	* Jack and Laiola got Gtk interface working a bit more. At least it
	  builds:-)

2007-11-02 16:15  jackjansen

	* Getting started with exposing gtk-specific methods to Python.

	  Unfinished and untested.

2007-11-02 16:13  jackjansen

	* Use "test" in stead of "[", which doesn't work everywhere.

2007-11-02 12:11  keesblom

	* Fixed stupid bug in gtk code removing embedded newlines when
	  crawling

2007-11-02 11:52  keesblom

	* Implemented "noWrap" for gtk. Works also for crawling text.

2007-11-02 00:59  jackjansen

	* Getting universal builds to work on 10.5.

2007-11-01 17:07  keesblom

	* Various fixes s.t. everything now works on WindowsXP with  state
	  and Release-shlib build

2007-10-31 15:19  keesblom

	* Implemented textConceal smilText attribute on Windows Xp

2007-10-31 15:02  keesblom

	* Fixed a couple of bugs in textConceal implementation

2007-10-31 13:51  jackjansen

	* Ambulant builds on Leopard, but so far only native (not fat).

2007-10-31 10:58  keesblom

	* Turned off smiltext debugging

2007-10-30 17:48  keesblom

	* Added textConceal with an implementation in
	  smiltext_layout_engine for qt and Windows/XP

2007-10-28 23:30  jackjansen

	* Infrastructure is complete (but contains a number of serious
	  hacks): the WebPluginContainer object from Safari (which has
	  references to the HTML document and anything else we need) is
	  successfully communicated to the Python code through Ambulant,
	  and can be used from there (right now it shows a message in the
	  status line).

2007-10-28 00:38  jackjansen

	* Added support for using extra_data to communicate data from
	  embedding program to Python code. Untested.

2007-10-26 22:48  jackjansen

	* The debugging stuff for WebKit plugins seems to be tied to the
	  user-settings files, not the project itself. Checked those in as
	  well, and added a note on how it's done.

2007-10-26 16:51  keesblom

	* Adapted smiltext_layout_engine to reviesed space handling.  Added
	  default wrap_mode = true; Still problems with space, but want to
	  test Windows first

2007-10-26 11:33  jackjansen

	* Parse begin and next using the time_attr_parser. Implementation
	  still TBD.

2007-10-26 10:46  jackjansen

	* Reorganized parser for begin/end attributes: factored out the
	  code to parse a single item, so it can be reused for smilText
	  tev.

	  NOTE: this reorganisation could potentially break support for
	  multiple begin/end conditions.

2007-10-26 09:50  jackjansen

	* Minor fix to xml:space handling: if there's only whitespace
	  between tags remove it.

2007-10-26 00:38  jackjansen

	* xml:space processing only removed leading spaces, it didn't
	  collapse other spaces. Fixed.

	  It's still not identical to HTML but looks a lot better.

2007-10-26 00:14  jackjansen

	* Bug fixes and support for named fonts.

2007-10-26 00:05  jackjansen

	* - Default font set to sansSerif - Mac font handling fixed.

2007-10-25 23:10  jackjansen

	* - wrap moved to per-run data (was on per-smilText) - position
	  moved to per-smilText (was on per-run) - Cocoa paragraph handling
	  completely revamped, now supports alignment	and probably
	  writing direction (but it refuses to render text the wrong way).

2007-10-25 16:51  jackjansen

	* Minor bugfix.

2007-10-24 21:40  jackjansen

	* Oops, forgot half the checkin for the space/newline fix.

2007-10-24 16:50  jackjansen

	* Revamped handling of spaces and pre/post newlines for p and div
	  to be more similar to what html does, collapsing them when
	  needed.

	  Fully implemented for Mac, not for other platforms.

2007-10-24 15:05  keesblom

	* Made xml:space work with xerces parser Also changed some
	  unsigined char* to char*

2007-10-24 14:28  jackjansen

	* Begin events coming from smilText interior nodes were only
	  handled for begin attribute. Added handling for end attribute.

2007-10-24 14:06  jackjansen

	* Logic for tev/clear with next was broken, fixed.

	  Fixes tests 8, 9, 10.

2007-10-24 10:32  jackjansen

	* Implemented relaxed begin conditions for seq children.

2007-10-23 17:03  jackjansen

	* Implemented Identity module support (version and baseProfile
	  attributes).

2007-10-23 10:38  keesblom

	* Some code cleanup (de)allocating m_hdc

2007-10-22 16:59  keesblom

	* Fixed erroneous global substitute

2007-10-22 16:35  keesblom

	* Added the new xml namespace identifier for SMIL

2007-10-22 13:32  keesblom

	* fixed a bug in tree_builder (undefined pointer after realloc())

2007-10-22 11:33  keesblom

	* Merged branch kees-xmlspace-260907 with trunk (practically
	  complete smilText)

2007-10-11 16:20  jackjansen

	* Don't resize ambulant window if we've borrowed it from someone
	  else (such as a web browser).

2007-10-11 15:58  jackjansen

	* - Added debugging support (through Safari) to webkit plugin -
	  Fixed bug due to changed signature of mainloop(), which wasn't
	  detected because of use of void pointers.

2007-10-11 10:46  jackjansen

	* Webkit plugin builds again.

2007-10-11 00:54  jackjansen

	* Getting started with reviving WebKit plugin.	It's a useful
	  vehicle for both SMIL State experiments and testing SMIL 3.0 DOM
	  access, I hope.

2007-10-11 00:35  jackjansen

	* detail.

2007-10-11 00:32  jackjansen

	* Test for unimplemented method and replace values.

2007-10-10 23:46  jackjansen

	* Implemented <state src="..."/> for file: scheme.

2007-10-10 23:19  jackjansen

	* Implemented newvalue and delvalue.

2007-10-09 17:19  jackjansen

	* Mass checkin: replacing all occurrences of "script" and
	  "scripting" with "state".

	  This includes member names, classes, filenames, directories,
	  projects, etc.

	  Things could well be broken.

2007-10-09 16:19  jackjansen

	* More viewBox->panZoom renaming.

2007-10-09 15:34  jackjansen

	* All occurrences of viewBox replaced by panZoom, as per the SMIL
	  3.0 CR spec.

2007-10-03 16:47  jackjansen

	* Fixed Python interface wrt. new default size handling.

2007-10-03 16:34  jackjansen

	* Revamped handling of default windowsize (i.e. no toplevel size
	  specified in SMIL document) so things also work on WM5.

	  NOTE: needs work on other platforms too.

2007-09-28 17:14  jackjansen

	* - ffmpeg is starting to play more than one frame on the emulator,
	  but veeeeeeeery slow.  - installer for real device is starting to
	  work.

2007-09-28 15:14  jackjansen

	* Details.

2007-09-28 14:51  jackjansen

	* boolean->bool.

2007-09-28 14:19  jackjansen

	* More leak cleanup

2007-09-28 14:17  jackjansen

	* AVCodecContext m_con could be freed twice. Fixed.

2007-09-28 13:27  keesblom

	* Security patch

2007-09-28 13:03  keesblom

	* Added a small document about project maintenance issues. It now
	  only contains some basic information how we do backups. This is a
	  hidden activity, which sometimes breaks and nobody knows how this
	  is organized.

2007-09-28 11:48  jackjansen

	* Some namespace tags were needed.

2007-09-28 11:47  jackjansen

	* Fixed some dependencies

2007-09-26 21:24  jackjansen

	* Merged exp-bo-ffmpeg-windows branch.	Result works on Windows
	  with VS2003, will try other platforms too.

2007-09-26 11:22  jackjansen

	* Removed vld.h include.

2007-09-25 14:58  jackjansen

	* Fixed more leaks.

2007-09-25 13:26  jackjansen

	* Fixed a lot of leaks on Windows.

2007-09-24 14:23  jackjansen

	* Jumping into a node that has been disabled because of content
	  control caused a crash. Added a workaround whereby we temporarily
	  disable content control while jumping. The SMIL spec is not
	  explicit about what should happen in this case (and this
	  workaround matches what Daisy wants).

2007-09-24 11:24  jackjansen

	* on_add_instance() with string parameter is now also needed for
	  non-SMIL3 builds.

2007-09-19 17:16  keesblom

	* Corrected smilText color setting of white text on black
	  background (Dicks' SimpleTests-1.smil

2007-09-19 16:50  jackjansen

	* Implemented beginEvent timing referencing smilText interior
	  nodes.  Since these nodes don't have a presence in the timegraph
	  they are translated into
	  smiltextnode.markerEvent(idofinteriornode).

	  The added benefit is that general markerEvents are now also
	  implemented (even though no renderers raise them yet).

2007-09-18 16:46  jackjansen

	* Opening the document in fullscreen was done too early, the window
	  wasn't always open yet. Delay switching to fullscreen until the
	  showWindows call happens.

2007-09-18 14:26  jackjansen

	* Various renderers ignored clipBegin in seek(). Fixed.  Tested
	  only for cocoa, not for dx.

2007-09-17 16:50  keesblom

	* Repaired unregistered bug found by Dick that AmbulantPlayer hangs
	  on a <smilText> without a dur attribute. (for Windows).

2007-09-17 16:03  keesblom

	* Repaired unregistered bug found by Dick that AmbulantPlayer hangs
	  on a <smilText> without a dur attribute. (gtk/qt only, not
	  Windows).

2007-09-17 14:55  keesblom

	* Added begin attribute for <tev>

2007-09-14 12:53  jackjansen

	* Fullscreen mode is now saved in the preferences. If the last
	  document was in fullscreen mode when it was closed, opening a new
	  document will make it appear in fullscreen mode too.

2007-09-13 21:54  keesblom

	* Added chromaKey for smilText on gtk. The function
	  gdk_pixbuf_blend() got an extra parameter to specify mask_color
	  for pixels not to be blended at all..

2007-09-13 14:46  keesblom

	* Added chromaKey for gtk_image_renderer.  Repaired a bug in
	  region_node s.t. chromakey is ignored when not specified.

2007-09-13 13:44  jackjansen

	* When closing a document programmatically also close the
	  fullscreen window, if it is open.

2007-09-13 12:00  jackjansen

	* Adapted for chroma key methods

2007-09-13 11:45  keesblom

	* Added chromaKey for Windows' smiltText

2007-09-13 11:12  keesblom

	* Chromakey for Windows img: region is now correct.

2007-09-12 17:45  keesblom

	* Initial attempt to provide chromakey for Windows img.cpp: region
	  is wrong

2007-09-12 17:20  keesblom

	* Minor details(removed spurious #ifdef WITH_CHROMAKEY, AM_DBG, and
	  dead code.

2007-09-12 14:39  keesblom

	* Added chromaKey for <img> and <smiltext> (qt only).

2007-09-11 17:04  jackjansen

	* Fixed very old bug in arts configure section (which was noticed
	  when Layola configure Ambulant on a machine with arts)

2007-09-06 10:53  keesblom

	* Finalized [media][background]Opacity for qt. qt_smiltext.cpp also
	  contains some comments how that code could be optimized using a
	  different strategy, resulting in far less round trips to the
	  X-server.

2007-09-04 17:37  keesblom

	* Added [media][Background]Opacity for qt.  Almost finished: white
	  space and text extend still need to be fixed.

2007-08-28 21:51  jackjansen

	* - By default don't build Python plugin for release.  - Added
	  xpath-state plugin to installer.

2007-08-27 15:02  keesblom

	* Changed color handling in smiltext such that the SMIL color name
	  "white" results in visible text (when text background is not
	  white) , and the same the other way around for the background
	  color.  This solves an old unregistered bug in the Windows
	  player.

2007-08-24 14:42  jackjansen

	* SMIL State works on Windows Mobile 5.

2007-08-24 11:15  jackjansen

	* - Fixed libxml2 project so it can actually build libxml2.  -
	  Added a copy_tpp_win32.vcproj project so the third_party_packages
	  solution can now copy the libraries to lib/win32.

2007-08-23 17:51  keesblom

	* Implmented 2 improvements: 1. Anti-aliasing is NOT turned off
	  (CAIRO_ANTIALIAS_NONE) unless it is	 necessary because of
	  blending (media[Background]Opacity) 2. When blending is needed,
	  one rarely used color is taken as    transparent color for
	  chromakeying. However should this color be used in a
	  presentation anyway, the object will be drawn in an alternative
	  undistinguishable color, to avoid the ugly bug of seeing
	  absolutely nothing.	  This could happen e.g. during color
	  animations possibly resulting in     occasional unreproduceable
	  flicker..

2007-08-23 14:07  jackjansen

	* Solved another problem with multiple runtime libraries for
	  Release build.

2007-08-23 13:40  jackjansen

	* Solved another problem with multiple runtime libraries for
	  Release build.

2007-08-23 10:26  bogao

	* Tried to copy the wrong target for zlib. Fixed

2007-08-22 17:40  bogao

	* (comment by Jack) Solution tried to builld the wrong target for
	  zlib. Fixed.

2007-08-22 17:33  jackjansen

	* Added a reference to the website explaining how to build ffmpeg
	  for windows.

2007-08-22 17:31  jackjansen

	* Plugins on WM5 also work in release builds.  Started fiddling
	  with the installer too, untested.

2007-08-22 16:00  jackjansen

	* Plugins work on Windows Mobile 5

2007-08-21 14:46  keesblom

	* Joined branch kees-chroma-250707 with trunl & fixed conflicts.

2007-08-11 00:40  jackjansen

	* Added shared-library targets for Windows Mobile. Compile and Link
	  work fine, but it does not run yet, probably due to a missing DLL
	  somewhere.

2007-08-10 14:33  jackjansen

	* SMIL state support also works under VS2005 (for desktop).

2007-08-10 12:27  jackjansen

	* Don't build plugins unless we're doing a shared build.

2007-08-10 12:13  jackjansen

	* Added notes for libxml2

2007-08-09 17:08  jackjansen

	* SMIL3 support starting to work on Windows Mobile: smiltext seems
	  be be okay.

2007-08-09 17:06  jackjansen

	* SMILState with Xpath as the state language works on Windows
	  Desktop, through libxml2.

2007-08-09 15:55  keesblom

	* Merge branch kees-chroma-25-07-07 with trunk Adding
	  chromakey,-Opacity,-Tolerance (disabled) and
	  media[Background]Opacity for dx_smiltext_renderer.  Also
	  chromakey,-Opacity,-Tolerance (enabled) is now present in the
	  low-level blt_blendXX() functions (dx_viewport)

2007-08-09 15:15  keesblom

	* Merge branch kees-chroma-25-07-07 with trunk Adding
	  chromakey,-Opacity,-Tolerance (disabled) and
	  media[Background]Opacity for dx_smiltext_renderer.  Also
	  chromakey,-Opacity,-Tolerance (enabled) is now present in the
	  low-level blt_blendXX() functions (dx_viewport

2007-08-09 14:18  jackjansen

	* Got SMIL working under VS 2005, except for State.

2007-08-09 13:34  jackjansen

	* Getting started on VC8 SMIL3 support, by merging diffs between
	  vc71 and vc71-smil3 into vc8 files.

2007-08-09 13:07  bogao

	* Feeding the successive block of one rtsp mp3 packet to ffmpeg to
	  decode, since ffmpeg can only decode the limited length of around
	  522(522 or 523 in the case of using testOnDemandRTSPServer as the
	  RTSP server) bytes data at one time. This idea is borrowed from
	  VLC, according to:
	  vlc-0.8.6c/module/codec/ffmpeg/audio.c:L253-L254.

2007-08-07 15:20  jackjansen

	* Basicvideo playback works, up to a point. On the desktop it is
	  decent, on Windows Mobile it's slow and it isn't resized
	  correclt, but it plays.

	  On Windows Mobile the original surfaces get lost once we start
	  video, leading to DDERR_NOTFOUND errors that we now ignore, for
	  the time being.

2007-08-06 17:31  jackjansen

	* Added dx_basicvideo renderer, which uses standard GraphBuilder
	  interface to create a video renderer in stead of the more fancy
	  MultiMediaStream.  This provides less functionality but hopefully
	  it will work better on WinCE.

	  Incomplete: the current code creates the video renderer in a new
	  window.

2007-08-06 11:59  jackjansen

	* Added missing get_default_size() call.

2007-08-06 11:57  jackjansen

	* Don't try to include speedup filter on WinCE.

2007-07-27 12:42  keesblom

	* Allow negative numbers as coordinate values in animations. Fixes
	  #1761839.

2007-07-25 11:11  keesblom

	* HACK. Some font/size combinations look ugly without slight
	  adjustment.  Fixes #1731356

2007-07-24 12:53  keesblom

	* HACK. Some font/size combinations look ugly without slight
	  adjustment.  Fixes #1731356

2007-07-11 16:29  keesblom

	* Adapted to recent change in smiltext_layout.

2007-07-11 12:45  keesblom

	* Various small smiltext_layout positioning bugs fixed: - when
	  first word on the next line was in large font, previous line y
	  position was	 incorrectly adjusted - word in large font would
	  erase part of previous word  (on windows) - when scrolling long
	  text, initial invisible lines did not show although the scroll
	  sufficiently advanced

2007-07-10 17:42  keesblom

	* Implemented low-level facilities for opacity in color range to be
	  used to implement opacity, mediaOpacity, chromaKey,
	  chromaKeyTolerance and chromaKeyOpacity.  (this was done in
	  previous version of htis file, this version has cosmetics only).

2007-07-10 17:25  keesblom

	* [no log message]

2007-07-06 13:45  keesblom

	* Adapted smiltext_layout_engine to work around a feature on
	  Windows XP.  When drawing a text in a region with a background
	  color, that color is applied to the text fields only, not the
	  whole region.

2007-07-05 16:48  keesblom

	* Implemented background opacity for gtk

2007-07-05 14:11  jackjansen

	* State commands end immediately after starting, unless a duration
	  is specified.

2007-07-05 13:09  jackjansen

	* Removed some debug output.

2007-07-04 17:01  keesblom

	* Fixed a leak in file code

2007-07-04 16:49  keesblom

	* Implemented SMIL3.0 background opacity for Windows XP.  Not using
	  DirectX alpha blending facilities, since they do not work.
	  Therefore I borrowed from the fade code and did  a little bit of
	  cleanup there.  Hopefully I didn't break anything. The
	  FancyPanZoom demo seems broken, but I think that has nothing to
	  do with this code.

	  Also fixed a bug in audio speedup

2007-07-04 15:57  jackjansen

	* Fixed some bugs in dynamic content control.

2007-07-03 23:49  jackjansen

	* pause() and resume() used m_playables without locking
	  m_playables_cs.  Fixed.

2007-07-03 16:39  jackjansen

	* Merging exp-jack-audio-feedback branch: if ambulant is hosted in
	  Amis, which provides a DirectShow plugin filter to do audio
	  speedup with pitch preservation, this filter is inserted into
	  audio rendering streams.  An API is  available to globally change
	  playback speed.

2007-07-02 16:18  keesblom

	* Changed <smiltext> into <smilText> as in W3C docs

2007-06-28 15:02  jackjansen

	* Allow hosting applications to set the default size for the
	  toplevel layout window.

2007-06-27 17:10  keesblom

	* Small changes to adapt to small changes in smiltext_layout_engine
	  API

2007-06-27 16:57  keesblom

	* Adapted dx_smiltext to work with new smiltext_layout_engine.

2007-06-26 17:36  jackjansen

	* More tweaks to SMIL State.

2007-06-26 17:34  jackjansen

	* Regenerated.

2007-06-26 17:01  keesblom

	* Factored out common code for text layout (in case the platform
	  doesn't provide a text layout manager). Adapted and tested qt,
	  Windows still TBD.

2007-06-25 17:42  jackjansen

	* Getting started on function name lookup (for the smil-xxxx()
	  functions).

2007-06-25 16:59  jackjansen

	* Setting variables and {string interpolation} also work.

2007-06-25 15:56  jackjansen

	* There was a bit of confusion about what exactly was the document
	  (in xpath terms). Fixed.

2007-06-22 16:52  keesblom

	* Mostly cosmetic changes to adapt to improments in qt_smiltext,
	  which was derived from dx_smiltext. Both smiltext renderers have
	  the same structure and some common code, so it may be feasible to
	  integrate them using more ingeneous class hierarchies. Also, both
	  smiltext renderers are not engineered for efficiency: e.g.  on
	  each redraw(), they re-compute the whole text layout
	  word-by-word, even if no word was added and a valid pixbuf is
	  still avaliable.

2007-06-22 15:28  keesblom

	* Implemented <smiltext/> in Qt3.3

2007-06-22 14:29  jackjansen

	* Getting started on the XPath state plugin based on libxml2.

2007-06-22 13:12  jackjansen

	* Added a dummy_state plugin that can serve as a base for creating
	  new state language plugins.

2007-06-22 12:05  jackjansen

	* Fixed and regenerated for new SMIL3 features.

2007-06-21 23:18  jackjansen

	* Workaround for the problem with NSLayoutManager non-opaque
	  background colors: if the current smiltext has any such
	  backgrounds we don't render the background directly but in stead
	  set it to a temporary bitmap (cleared to transparent) and bitblit
	  this to the destination. As this is all a bit expensive we only
	  do it when needed.

2007-06-21 22:59  jackjansen

	* MediaOpacity and mediaBackgroundOpacity work. Only problem is
	  with smiltext mediaBackgroundOpacity: this cuts through the lower
	  layers as well, not what we want.

2007-06-21 15:41  keesblom

	* Added forgotten stopgap get_bgopacity() > 0.5 replacing
	  get_transparency()

2007-06-21 14:34  keesblom

	* Revised dx_smiltext <br/> handling to fix #1731350. Even multiple
	  leading <br/>'s now work.

2007-06-21 12:27  jackjansen

	* Implemented mediaOpacity and mediaBackgroundOpacity. As usual
	  they don't actually work yet.

2007-06-20 23:30  jackjansen

	* Changed various APIs to prepare for other opacities.

2007-06-20 23:19  jackjansen

	* Got backgroundOpacity to work (Mac only) including animation.

2007-06-20 17:32  jackjansen

	* Replacing one more get_transparency() with get_bgopacity().

2007-06-20 17:25  jackjansen

	* stopgaps for opacity/transparency changes.

2007-06-20 17:20  jackjansen

	* Implemented backgroundOpacity on the Mac. Everything works,
	  including animation, except we don't actually see anything:-)

2007-06-20 15:04  jackjansen

	* Implemented seeking video for video_renderer-based renderers.

2007-06-20 13:16  jackjansen

	* Implemented seek (and begin offsets) for quicktime movies.

2007-06-20 11:25  jackjansen

	* The new seek code (when seeking forward) didn't skip seq children
	  that had already played. Fixed.

	  Fixed some debug output too.

2007-06-19 16:29  keesblom

	* Got rid of hang in trivial loop on quit in main() (gtk_gui.cpp)
	  to fix #1739765

2007-06-19 16:13  keesblom

	* Implemented Pan/Zoom for qt.	Simplified pan/zoom for gtk, to
	  match qt's implementation more closely.

2007-06-19 15:25  jackjansen

	* When comparing URLs, "" and "localhost" are identical.

2007-06-19 14:47  jackjansen

	* Re-enabled the handling of discrete media as continuous media.
	  Need to re-check bug #1553249.

2007-06-19 14:24  keesblom

	* Implemented image Pan/Zoom in gtk

2007-06-18 17:02  jackjansen

	* - Implemented SMIL 1.0 names for content control attributes (this
	  was	apparently overlooked until now) - Added hooks to allow
	  embedders and plugins to test and change   systemComponent and
	  customTest values.

2007-06-18 15:38  jackjansen

	* Various minor fixes for Amis.

2007-06-16 21:46  jackjansen

	* A few more tweaks to the fast-forward code, and lots of asserts.

	  There is now one (known:-) construct that still gives trouble: a
	  container with specified duration containing continuous media
	  with unspecified duration.

2007-06-15 17:26  jackjansen

	* Merging exp-jack-seek-media branch: Main change is that
	  fast-forwarding over continuous media without explicit durations
	  now works (at least: it worked for one document:-).

	  Also minor other changes (bugfixes) and a new preference to allow
	  dynamic testing for system tests and custom tests.

2007-06-15 15:19  keesblom

	* Fixed SDL test (again).

2007-06-15 13:51  keesblom

	* [no log message]

2007-06-14 17:18  keesblom

	* ::DeleteObject(m_font) was also missing during
	  _dx_smiltext_fits().	Solves #1735778.

2007-06-14 13:34  keesblom

	* Deleted HFONT data structure when not longer needed. Doesn't seem
	  to help a lot. Maybe there's more stuff like that for ReleaseDC
	  to work properly.

2007-06-13 14:17  keesblom

	* Solved SDL configuration problem #1734930

2007-06-12 14:48  jackjansen

	* Getting started with correct seeking of documents: after a
	  hyperlink we now compute (for each node) the correct time, and
	  seek the playables there.

	  Does not actually work yet:-)

2007-06-12 14:37  keesblom

	* dx_smiltext cleanup. Everything is now done during redraw.

2007-06-08 13:56  keesblom

	* Added <smiltext textMode="crawl"/"scroll " > on WindowsXP>

2007-06-07 16:37  jackjansen

	* Welcome document has moved to new location on WM5.

2007-06-07 16:25  jackjansen

	* Create a CAB installer

2007-06-07 14:53  jackjansen

	* Transitions were deleted from a std::map while we were iterating
	  over that map, and libc for wm5 (rightly) complained. Fixed by
	  remembering the finished transitions and deleting them in a
	  separate pass.

2007-06-07 13:45  jackjansen

	* WM5 fix broke things on the desktop. Fixed.

2007-06-07 11:02  keesblom

	* Unused variables cleanup

2007-06-07 00:12  jackjansen

	* Added CoInitializeEx call also on WM5. Need to check that this is
	  okay on the desktop too.  And it still doesn't solve the audio
	  problem:-(

2007-06-06 23:53  jackjansen

	* Windows Mobile player with DX gui (in stead of DG) showed its
	  first images. No video or audio yet, though...

2007-06-06 17:39  jackjansen

	* Starting to port the DX code to Windows Mobile 5.

2007-06-06 15:37  jackjansen

	* Getting rid of old files.

2007-06-06 15:36  keesblom

	* Little bit of JUNK cleanup

2007-06-06 15:31  jackjansen

	* Things are starting to work, somewhat.

2007-06-06 14:49  jackjansen

	* - Fixed error message box - Fixed some more url handling

2007-06-06 13:52  jackjansen

	* Fixed menu.

2007-06-06 13:37  jackjansen

	* More bits and pieces to get wince port working again.

2007-06-06 13:34  jackjansen

	* More bits and pieces to get wince port working again.

2007-06-06 11:55  keesblom

	* Nokia 770/800 installer now shows icons, except in the
	  FileManager.	Also, file type associations do not work (#1731924)

2007-06-05 16:33  jackjansen

	* Adapted to new API.

2007-06-05 16:19  jackjansen

	* (Finally) updated the DG gui to the new factory design.

2007-06-05 14:04  jackjansen

	* viewBox animation works on Windows too.

2007-06-04 15:56  jackjansen

	* Fixed an off-by-one error in animation computations: at t=max it
	  would actually return the value for t=0 (because there was a <=
	  where there should have been a <).

2007-06-01 14:17  jackjansen

	* Animation of viewBox starts to work.

2007-06-01 13:42  jackjansen

	* Oops, previous checkin threw away point animation code. Fixed.

2007-06-01 13:15  jackjansen

	* Getting started on animating viewBox.

2007-05-31 15:54  keesblom

	* Added #ifdef WITH_SCREENSHOTS in ambulant_gtk_window::redraw()
	  because the call to gdk_pixbuf_get_from_drawable() involves
	  communication with the X-server. This is the main cause for low
	  redraw frequency on Nokia 770/800. For the same reason, disabled
	  transIn in NYC-Smiltext.smil where the timed event is
	  demonstrated.

2007-05-31 14:43  keesblom

	* Moving nokia770 to installers

2007-05-26 00:44  jackjansen

	* NSImage is far too smart for us pport SMIL standards people: all
	  the sizes it returns are in device coordinates (i.e. image dpi is
	  converted on load) and moreover it'll change them on the fly if
	  it thinks it's for our good.	Worked around this so we can still
	  use the pixel coordinates for cropping, by grabbing them before
	  the image has been near the display.

2007-05-25 13:54  jackjansen

	* Moved viewBox support to machine-indendent code, and got it ready
	  for animation (untested).

2007-05-23 17:15  jackjansen

	* viewBox works on windows.

2007-05-23 17:13  jackjansen

	* Removed debugging include.

2007-05-23 16:30  jackjansen

	* First stab at the MediaPanZoom module, with a number of caveats:
	  - Works only on the Mac - Sometimes has redraw problems - No
	  animation yet

2007-05-23 16:25  keesblom

	* Python installation improvements. Nokia770/800 has both python2.3
	  (which ts needs) and python2.5 (which we need), but
	  --with-python=python2.5 didn't always find the one we need

2007-05-23 13:57  jackjansen

	* Fixed a nasty bug that has been around for ages (but I could not
	  find any bug report): renderer_playable_dsall-based renderers
	  could try to render incomplete data, if a redraw came in before
	  all data was read.

	  This may have been the source of various random crashes, the type
	  that goes away if you run ambulant again.

2007-05-23 13:45  keesblom

	* Used const_cast<char*> instead of strdup()

2007-05-23 12:39  keesblom

	* SmilState now works on Linux. Used locally installed python-2.5
	  with LD_LIBRARY_PATH set properly.

2007-05-22 14:35  keesblom

	* Implemented crawl/scroll textModes for SMIL-3 in gtk

2007-05-21 16:07  keesblom

	* Changed Makefile.am to use ouput provided by pkg-config.  (Zaurus
	  specific lines not touched, since the platform is dead.) Fixes
	  #1722608

2007-05-21 10:58  keesblom

	* Adaped to latest changes at the maemo website s.t. I can build
	  for N800 again.

2007-05-17 23:54  jackjansen

	* Copy Xerces debug library too, if it exists.

2007-05-15 17:25  jackjansen

	* Added layers for the Windows installer and uninstaller icons.

2007-05-11 16:15  keesblom

	* Added smiltext font support for gtk using pango layout.

2007-05-10 17:34  keesblom

	* gtk_smiltext starts to work:(bg_)color only, for now, using pango
	  layout engine

2007-05-10 17:32  keesblom

	* gtk_smiltext starts to work:(bg_)color only, using pango layout
	  engine

2007-05-09 15:14  keesblom

	* No additional mem.leaks in dx_smiltext. Lots of leaks from
	  tree_builder, create_document, plugins, factories, logger, etc.
	  Added  'const' to some internal interfaces.

2007-05-08 17:47  keesblom

	* Recoded dx_smiltext to get rid of dx_smiltest_run which was a coy
	  of smiltext_run plus some extra fields. Instead, now the Direct X
	  functions are called repeatedly,

2007-05-08 11:43  jackjansen

	* There were bogus dependencies between the projects, fixed.
	  Nscontext.cpp was not in the project. Added.

2007-05-01 16:37  jackjansen

	* Added a set_prefix_mapping() method to node. Empty for node_impl
	  nodes, but external implementations can override this. If they do
	  then the method will be called if there are any xmlns
	  declarations on the node.

	  The Annotator uses this to remember namespace information
	  per-node, so it can regenerate it on export.

2007-04-27 17:16  keesblom

	* dx_smiltext is now completelty independent of the old
	  dx_text/dx_text_renderer combo. We could now get rid of this.
	  Took me a day to figure out that
	  IDirectDrawSurface*.SetColorKey() was essential for a call
	  IDirectDrawSurface*.Blt() to succeed, otherwise you always get
	  DDERR_INVALIDPARAMS

2007-04-26 22:10  jackjansen

	* - Slight change to new_data_node signature to make Python
	  interface happy.  - README modified for symm-distribution.

2007-04-25 16:10  keesblom

	* Most of smiltext has been implemented now on Windows and
	  NYC-SmilText.smil looks quite presentable.

2007-04-20 15:21  keesblom

	* Added 'word_mode' to smiltext_engine() to generate smiltext_runs
	  with a single word of data only, without spaces, but with all
	  formatting and styling parameters.

2007-04-20 15:04  jackjansen

	* Shell script to help with creating a Mac installer.

2007-04-20 11:04  keesblom

	* Added dx_smiltext.h and dx_smiltext.cpp to the repositoty

2007-04-20 10:51  jackjansen

	* When looking for the child of a switch to select ignore the (new)
	  data nodes.

2007-04-19 17:43  keesblom

	* initial attempt to add smiltext for Windows.

2007-04-19 17:41  keesblom

	* [no log message]

2007-04-19 16:33  jackjansen

	* New icons. They look pretty bad on Windows:-(

2007-04-19 16:32  jackjansen

	* - Data nodes now also have a context. This fixes the problem Dick
	  had with flashlight-ce.  - Removed various bits of debug output.

2007-04-19 15:33  jackjansen

	* Fixed various issues with the xcode projects: resources not being
	  copied, bad build instructions, etc.

2007-04-19 13:19  jackjansen

	* Added an xcode project to build WITH_SMIL3 player.

2007-04-18 10:37  keesblom

	* Changed representation of smiltext_runs from vector into list
	  because iterators on vector are invalid after expansion

2007-04-17 17:29  jackjansen

	* Added dummy declarations to make the ambulantmodule also compile
	  without WITH_SMIL30

2007-04-16 13:06  jackjansen

	* There is a strange problem with param color=white on windows. For
	  now use yellow:-)

2007-04-16 13:05  jackjansen

	* If user selects "Stop" don't automatically re-read the document.

2007-04-16 12:56  jackjansen

	* Both the normal and the shared/smil3 installer seem to work.

2007-04-16 11:43  jackjansen

	* Also moving installers to new locations.

2007-04-12 17:12  jackjansen

	* Added missing include.

2007-04-12 17:05  jackjansen

	* XCode project now works.

2007-04-12 17:04  jackjansen

	* - Switching to new icons - Slightly changed structure and naming
	  convention of the .app bundle

2007-04-12 15:29  jackjansen

	* Details.

2007-04-12 15:00  jackjansen

	* Python code runs from within Ambulant!

2007-04-12 11:52  jackjansen

	* Added a separate set of projects for building a SMIL3 player.

2007-04-12 11:49  jackjansen

	* More WITH_SMIL30 ifdefs and suchlike.

2007-04-11 17:36  jackjansen

	* Added a couple of WITH_SMIL30 ifdefs.

2007-04-11 17:03  jackjansen

	* Node data (characters) can now be stored in children too.

2007-04-11 16:50  jackjansen

	* Modifications to be able to create a fat (intel/ppc) player for
	  the Mac with Python support.

2007-04-11 14:50  jackjansen

	* Merging exp-jack-smil30: - Initial version of SMIL State, with
	  theonly language supported being Python.  - Initial version of
	  SMILText, with exact tag and atttribute names incorrect.

	  All this is only enabled when configuring with --with-smil30.

2007-04-11 14:02  jackjansen

	* Attempt at automatic creation of ambulant module through a
	  Makefile vcproj. Failed, so far.

2007-04-11 12:57  jackjansen

	* Python interface and python plugin now compile on windows. Next:
	  get them to run:-)

2007-04-11 12:40  jackjansen

	* Fixed a few issues that showed up when building the bridge for
	  Windows.

2007-04-10 17:45  jackjansen

	* Bits and pieces to get the Python interface working on windows.
	  Mainly adding AMBULANTAPI and suchlike things.

2007-04-10 16:53  jackjansen

	* First attempt at VS 2003 python-plugin project.

2007-04-10 16:46  jackjansen

	* Getting started with python plugin on Windows.

2007-04-10 15:58  jackjansen

	* Got shared library build to work too.

2007-04-10 15:19  jackjansen

	* Got shared library build to work too.

2007-04-10 14:25  jackjansen

	* [no log message]

2007-04-10 14:24  jackjansen

	* DG code was incomplete since the exp_jack_playerobj merge (feb
	  2006!). Added a stopgap that may make it work again.

2007-04-10 12:23  jackjansen

	* Details.

2007-04-10 00:01  jackjansen

	* Breakdown of the projects.

2007-04-09 23:54  jackjansen

	* Getting rid of old projects.

2007-04-09 23:53  jackjansen

	* Getting started on xcode projects.

2007-04-09 22:38  jackjansen

	* Got rid of old projects, updated readme.

2007-04-09 22:31  jackjansen

	* Copied wince projects to the project folder. They deposit the
	  results right in lib/wince-arm, so no more need for the copy_tpp
	  script.

2007-04-08 01:09  jackjansen

	* Got as far as running the player on the emulator, at which point
	  it crashes.

2007-04-07 01:03  jackjansen

	* A few more steps towards getting wince to work again.

2007-04-06 01:50  jackjansen

	* Modified our existing code based on what the current
	  template-based Windows Mobile 5 app looks like.

2007-04-06 01:19  jackjansen

	* Slowly getting started with Windows Mobile 5.

2007-04-06 00:34  jackjansen

	* Somewhat updated.

2007-04-06 00:14  jackjansen

	* Getting rid of old projects.

2007-04-06 00:10  jackjansen

	* - Added vc8 projects - Got rid of various stupid "unsafe"
	  warnings - streamlined a couple of things.

2007-04-05 23:25  jackjansen

	* Reordered destruction of two objects to fix a crash.

2007-04-05 22:45  jackjansen

	* Minor tweak to where build results and temporaries are stored.

2007-04-05 22:40  jackjansen

	* Merging relevant portions of exp-jack-vc8 branch, with some
	  modifications.  This should have all source file changes for vc8
	  and still be vc71 compatible.

2007-04-05 17:05  jackjansen

	* Refactoring project layout.

2007-03-29 15:27  jackjansen

	* Support for xerces builtin to the core library was broken (at
	  least on the mac) at some point in the past. Fixed.

	  Backport candidate.

2007-03-29 14:57  keesblom

	* Added missing file qt_html_renderer.h to distribution (backport
	  candidate).  Removed gtk_html_renderer, because it cannot work
	  without major redesign.

2007-03-28 13:00  keesblom

	* Added --with-smil-test configure option.  When set (default:
	  off), AmbulantPlayer chooses a different default region each time
	  one is needed. This is not according to the SMIL2.1 standard, but
	  useful when evaluting the W3C SMIL test suites, because otherwise
	  the images rendered in the default region completely overlap.

2007-03-26 17:05  jackjansen

	* If we're re-opening a document in fullscreen mode don't try to
	  change the size of the toplevel window.

2007-03-12 13:53  jackjansen

	* When starting playback through goto_node() also emit the
	  started() callback to the embedder.

2007-03-12 11:02  jackjansen

	* Screenshot window level was off-by-one. fixed.

2007-03-09 13:37  jackjansen

	* Missed file in checkin for creating overlay windows in main
	  thread.

2007-03-09 13:35  jackjansen

	* Creating the overlay window in the main thread: this forestalls
	  some crashes.

2007-03-08 21:39  jackjansen

	* Attempt to make fullscreen screndumps work. Unfortunately taking
	  a screendump with video still regularly crashes the player.

2007-03-08 17:00  jackjansen

	* Fixed screenshots to work with quicktime movies and overlay
	  windows.  Fullscreen still TBD.

2007-03-08 15:41  jackjansen

	* Ink renderer works.

2007-03-06 21:28  jackjansen

	* Forgot to add the actual new files for the inkml renderer.

2007-03-06 21:17  jackjansen

	* - Got rid of old overlay-image interfaces, that were never
	  implemented anyway.  - Got started on a renderer for minimal
	  inkml-like line drawing images.

2007-03-05 16:18  jackjansen

	* Enabled drawing things on top of movies played with the Quicktime
	  renderer, through a second, transparent window on top of the main
	  presentation.  The quicktime redraw routine will redirect all
	  future drawing (in the current redraw callback) to that
	  transparent window, which makes it show up on top of the movie.

	  Interaction with transitions is untested, and there may be
	  problems.

	  All the code can be disabled by commenting out
	  WITH_QUICKTIME_OVERLAY in cocoa_gui.h.

2007-02-28 17:07  jackjansen

	* Reimplemented the auxiliary overlay document in a different way:
	  using a separate (transparent) window overlaying the main window
	  in stead of with a view.

	  Quicktime movies are displayed on top of the view hierarchy, so
	  any movie obscured the auxiliary document. Playing the auxiliary
	  document in another window solves this.

2007-02-28 14:27  jackjansen

	* Made after_mousemove a bit more robust: there are scenarios where
	  it can be called without the corresponding before_mousemove (if
	  the GUI toolkit pops up or removes a window while we're doing the
	  mouse-moved dance).

2007-02-28 14:24  jackjansen

	* Pseudo mouse-moved code in need_events() disabled: it should only
	  be run in the main thread.  Will really fix later.

2007-02-28 12:10  keesblom

	* Changed version numbers to 1.9 on trunk

2007-02-27 16:20  jackjansen

	* Replaced NSCompositeSourceAtop by NSCompositeSourceOver: the
	  latter also works correct in case of transparent windows.

2007-02-26 12:57  keesblom

	* Merged release-new-ambulant-18-branch with trunk

2007-02-23 15:33  jackjansen

	* Got overlay documents working again on the Mac, and added a
	  configure option --with-overlay-window (and WITH_OVERLAY_WINDOW
	  define) to enable the global bits for all platforms.

	  Added support for target attribute op hyperlinks, with "overlay"
	  the only currently defined target.

2007-02-23 11:20  jackjansen

	* Anchors (both a and area) with actuate=onLoad and not children of
	  a media item would cause a hang. Fixed.

	  backport candidate!

2007-02-23 10:30  jackjansen

	* Commented out old offscreen code.

2007-02-15 15:32  jackjansen

	* - Final touches to readme and news - Got rid of non-functional
	  japanese translation.

2007-02-15 15:26  jackjansen

	* Got keyboard shortcuts to work on gtk too.

2007-02-15 15:02  keesblom

	* Added version number in About dialog. Fixes #1660567.

2007-02-15 14:14  jackjansen

	* Added common keyboard shortcuts for Qt player.

2007-02-15 14:03  keesblom

	* logger->set_show_message() was not called by gtk-player and
	  commented out in qt-player. Fixes #1658169

2007-02-15 13:25  jackjansen

	* Added code to schedule redraws via the event loop, in stead of
	  directly from need_redraw(). Then disabled the code because it
	  seems to make little or no difference for the problem at hand.

2007-02-15 12:29  keesblom

	* Adapted mnemonic shortcuts (<ALT>key) seqences so that they at
	  least work properly for AmbulantPlayer_qt. For AmbulantPlayer_gtk
	  they do only work partially. Neither of the 2 players have
	  keyboard shortcuts (<CTL>key).  Filed bug report #1660492

2007-02-14 12:08  keesblom

	* Renamed "Settings" to "Preferences" for program preferences to
	  avoid confusion with SMIL settings loadable from an .xml file.
	  Added localization to gtk_settings.cpp

2007-02-14 11:21  jackjansen

	* Updated dutch translation.  Removed incomplete japanese
	  translation.

2007-02-13 17:18  jackjansen

	* Removed silly separator.

2007-02-13 17:17  jackjansen

	* Renamed Load Filter to Load Document Settings and moved to
	  application menu.

2007-02-13 17:11  jackjansen

	* Changed "Settings" to "Document settings" and moved some menu
	  entries to different places. Also added & shortcuts to everything
	  that was missing them.

2007-02-13 17:03  keesblom

	* Add Dutch translations to AmbulantPlayer_gtk

2007-02-12 15:46  jackjansen

	* Typo.

2007-02-12 15:27  jackjansen

	* Changed to 1.8 icons.

2007-02-12 15:14  jackjansen

	* Mass checkin: updated year (in copyright notices and other
	  places) to 2007.

2007-02-12 14:22  jackjansen

	* Regenerated and translated.

2007-02-12 14:07  jackjansen

	* Fixing up some things to easy translation.

2007-02-12 13:36  jackjansen

	* Regenerated.

2007-02-12 13:29  jackjansen

	* Regenerated.

2007-02-12 13:25  jackjansen

	* Added new files using localizable strings.

2007-02-08 16:25  keesblom

	* A few changes in the Nokia 770 inataller and removal from the
	  repository of some generated files

2007-02-07 17:24  keesblom

	* Removed top-level directory 'debian' which contained a huge
	  tar-file used as a template for debian packaging for Nokia'2 770
	  Internet Tablet.  It has been replaced by a directory 'nokia770'
	  in 'src/player_gtk' containing control files (in
	  'nokia770/debian') and a script 'create_installer' which creates
	  the tree that used to be in the tar-file during packaging and
	  removes all intermediate files when packaging is done.  Also
	  moved icons in 'src/player_gtk' to the new directory and renamed
	  them as they are useed by the new script.

2007-02-07 15:57  keesblom

	* Removed top-level directory 'debian' which contained a huge
	  tar-file used as a template for debian packaging for Nokia'2 770
	  Internet Tablet.  It has been replaced by a directory 'nokia770'
	  src/player_gtk containing control files (in 'nokia770/debian')
	  and a script 'create_installer' which creates the tree that used
	  to be in the tar-file during packaging and removes all
	  intermediate files when packaging is done.

2007-02-06 17:00  jackjansen

	* - Tentative fix for #1626168: remove the while(next==now) loop in
	  time_sched::_exec(), which was a quick hack anyway. BUT: this may
	  affect seeking, need to do testing.  - Renamed a member variable
	  to be a bit more clear.

2007-02-02 11:27  keesblom

	* Removed duplicate url_handler_pair entry in in the list
	  s_handlers url_handler_pair h4 was an exact copy of h3.

2007-02-01 17:32  keesblom

	* Adapted to updated %escape handling in net::url

2007-02-01 17:20  keesblom

	* Changed %-escape handling to be done only locally in net::url
	  such that:

	  m_path, m_query and m_ref (fragment) will be %-decoded
	  url::get_url() will produce the %-encoded version

2007-02-01 16:12  jackjansen

	* Fixed #1639931 - <a> anchors are active in the whole window in
	  stead of the relevant region only.

2007-02-01 16:05  keesblom

	* Oops, forgot to remove an old hack intended to skip initial
	  "data:,"

2007-02-01 15:55  keesblom

	* Changed get_url() into get_path() in mem_datasource because for
	  the data:, URL we need the data without %-escapes

2007-01-30 16:43  keesblom

	* Adapted gtk and qt to use the new url::uri2string for rendering
	  text

2007-01-30 16:30  keesblom

	* Fixed #1639918 by adding 2 new static functions in net::url for
	  use by renderes: uri2string and string2uri. Renderers can decide
	  when to convert a % escaped strings to native representions
	  (RFC3986).  Also added code and patterns to parse legal data
	  URI's correctly, like: data:[mimetype/subtype][;base64],some_text
	  However, the mimetype is still ignored). (RFC2397)

2007-01-18 15:16  keesblom

	* Updated TIPS-NOKIA770 with references to new scripts for
	  establishing USB networking and a new file debian/README how to
	  create an installer for the NOKIA770.

2007-01-17 17:08  keesblom

	* Directory for DBUS service file was changed in OS2006. Also, the
	  name of this service file is restricted to lowercase letters and
	  '_'.

2007-01-16 16:07  jackjansen

	* On Open/Open URL there was a call to check that the file exists,
	  which obviously isn't true for URLs. Removed the code.

	  Fixes #1636822.

2007-01-15 16:03  jackjansen

	* Updated user help.

2007-01-15 15:55  jackjansen

	* Fixed up translations.

2007-01-15 15:47  jackjansen

	* Oops, forgot to check this file in. Fix for #1627953.

2007-01-15 15:28  jackjansen

	* Second portion of fix for #1627953: use get_clipped_screen_rect()
	  as the destination rectangle for transitions.

2007-01-15 14:57  jackjansen

	* Added method get_clipped_screen_rect() to surface. This returns
	  the clipped on-screen rectangle occupied by the surface.  Use
	  this functionality in cocoa_transition to make sure transitions
	  are clipped to the correct screen area.

	  First step towards fixing #1627953.

2007-01-12 15:07  keesblom

	* Undid the changes of r.1.5 because #1627953 was re-opened.

2007-01-12 13:47  keesblom

	* Reverted back to 1.39 code to get rid of #1619481 but left the
	  1.40 code in an undefined #ifdef XXXX. It was an attempt to
	  streamline, improve and eventually factor out this piece of code
	  both for windows, qt and gtk.

2007-01-12 12:18  keesblom

	* Changed the temp. fix for #1627950 into an assertion.

2007-01-12 11:33  keesblom

	* Added a test for m_new_focussed_nodes not being zero.  This can
	  happen when before_mousemove() was not called.  This fixes
	  #1627950, but is not really a solution.

2007-01-10 16:18  jackjansen

	* These are long dead, really.

2007-01-10 16:06  jackjansen

	* Fix for #1438496: player doesn't run on OSX 10.3.

	  The only 10.4-specific calls we use (afaik) are fileURL and
	  setFileURL.  These can easily be worked around using fileName and
	  setFileName.

2007-01-10 14:11  jackjansen

	* Reverted is_really_discrete() workaround, and in stead disabled
	  the mod introduced in time_node.h r1.42.

	  That mod got rid of special treatment for discrete media items,
	  but also introduced bug #1553249.

2007-01-10 13:58  jackjansen

	* Tentative workaround for #1553249.  During fast-forward from
	  beginning of document (which is also what happens during
	  goto_prev, but not during goto_next) something goes wrong with
	  the time-dependency calculation and for some documents we wait
	  for something that never happens.

	  This workaround make the scheduler use 0 duration for discrete
	  nodes in dependency calculations, while still allowing dynamic
	  durations during runtime (which is needed for AmisAmbulant, or
	  screen readers and such in general).

2007-01-09 16:50  keesblom

	* Limit the size of a pixmap we want to get to tha actual available
	  size to prevent gtk errors such as: assertion `src_x + width <=
	  src_width && src_y + height <= src_height' failed Should fix
	  Bug#1627953.

2007-01-09 14:42  keesblom

	* Cosmetic change.

2007-01-09 14:34  keesblom

	* In gtk_C_callback_do_button_release_event(..), added code to
	  compute the proper (x,y) coordinates in the destination widget.
	  Should fix Bug#1627927.

2007-01-08 17:07  jackjansen

	* Fixes for #1626168: there were various minor issues with excl
	  interrupt and pause semantics.

2007-01-08 17:05  jackjansen

	* Pausing a quicktime video caused a stopped() callback. Fixed.

2007-01-08 16:12  jackjansen

	* Another piece of the fix for #1627916. Actually, it is more than
	  a workaround than a fix.  When scheduler::stopped() is called for
	  a node it schedules a callback to time_node::on_eom(). But, if
	  the node is restarted before that callback is executed the
	  on_eom() will inadvertantly be interpreted as termination for
	  that new interation.	Unfortunately this situation is difficult
	  to detect in on_eom, and also difficult to forestall altogether.
	  This checkin is a partial fix: in stopped() we determine whether
	  the node is interested in on_eom() at all, and if not we don't
	  schedule it. In the context of bug #1627916 this appears to be
	  good enough.

2007-01-05 16:59  jackjansen

	* Tentative (partial?) fix for #1627916: when a sync_update()
	  happens in active_state we advance to postactive_state and then
	  get our time_node to do sync_update() again. This will execute
	  the postactive_state::sync_update(), which does the right thing.

	  At least: when using the QuickTime renderer on the Mac. With the
	  builtin (ffmpeg) renderer Kees' second problem (all frames
	  considered early) pops up, but I think this may be an unrelated
	  bug.

2007-01-04 17:10  jackjansen

	* Catch gurl/gurl and GURL/GURL appleevents, and open the document
	  corresponding to that URL.

	  Fixes #1189379.

2007-01-04 16:04  keesblom

	* Added an argument to a call to stopped() in gtk_fill.cpp to make
	  it compile Found a kludge in gtk_gui.cpp to get rid of bug #
	  1627008

2007-01-04 15:19  jackjansen

	* Added -lintl to the link line for the shared library only on
	  Darwin.  (Actually, the dependency is on Cocoa, but that should
	  be fine for now).

	  Should fix #1626178.

2007-01-04 14:59  jackjansen

	* Brush renderers didn't emit stopped() callback when started.

	  Fixes #1627056.

2007-01-04 14:56  jackjansen

	* brush renderer didn't emit stopped() events when started.

	  Fixes #1627056.

2007-01-03 15:32  jackjansen

	* Added a note about installing gettext-devel, if applicable. Fixes
	  #1626191

2007-01-02 16:36  jackjansen

	* Removed duplicate code (m_src was cleared in destructor, but
	  stop() has already done that).

2007-01-02 16:20  jackjansen

	* Fixed buglet in method name that FC5 gcc barfed on.

2007-01-02 16:14  jackjansen

	*  Building pyambulant mow works on FC4 with Python 2.4.

2007-01-02 14:42  jackjansen

	* Adding libintl and libiconv to the link line is not a good idea:
	  it breaks builds on some platforms. Reverted for now, need to
	  investigate why it needed adding in the first place.

2007-01-02 13:40  jackjansen

	* - slidewipe had off-by-factor-2 width for destination rectangle.
	  Fixes   #1619483.  - Used round() macro to round things, in stead
	  of duplicating code	everywhere.

2006-12-20 16:43  jackjansen

	* details.

2006-12-20 16:24  jackjansen

	* Don't show nerdy ??? in status line when hovering over an anchor
	  for which we can't determine the destination.

2006-12-20 16:23  jackjansen

	* Wince compiler barfs on pair assignment. workaround.

2006-12-20 16:03  jackjansen

	* Removed old pdproj references, added new xcodeproj reference.

2006-12-20 15:07  jackjansen

	* Merging jack-exp-fix-excl-fill: - Fix for #1611177: if the active
	  child in an excl was in fill=freeze	mode it wasn't cleaned up.
	  - Fix for #1600536: playing an excl child for the second time
	  would   cause problems with video (and probably audio) nodes.

2006-12-07 12:40  jackjansen

	* QtKit was missing in some links.

2006-11-27 18:06  keesblom

	* Reset accidental checkin of "strict=true" back to "strict=false"

2006-11-27 16:45  keesblom

	* Adapted Firefox plugin for Windows to version 1.8

2006-11-23 14:42  keesblom

	* Removed #define WITH_HTML_WIDGET for solution configuration
	  ReleaseNoXercesNoHtml

2006-11-23 14:01  keesblom

	* Modified configure.in s.t. Makefiles.am do not need modifications
	  when another ffmpeg feature is enabled (as per suggestion from
	  Jack).  Note that also --with-dirac (from which the previous
	  approach was taken) could be redone in this fashion.

2006-11-21 17:27  keesblom

	* Added code to cleanup m_frames in demux_video_data_source.  Added
	  some debug prints in constructors/destructors

2006-11-20 12:37  keesblom

	* Implemented an advisory limit on the size of the packet queue: if
	  demux_audio_datasource::buffer_full() returns true, you are
	  advised not to throw in more data; but if you nevertheless do, no
	  data is lost and a DEBUG message is printed

2006-11-16 16:58  keesblom

	* Implemented demux_audio_datasource::buffer_full() and
	  demux_audio_datasource::_end_of_file(). Both functions always
	  returned false since the transition to pkt_datasource, causing
	  bug #1597007.

	  With the current fixes, now there is no limit on the size of the
	  packet queue, this is probably not a good idea, but for now it
	  works.

	  Also commented out the "Wait until there is room in the buffer"
	  in ffmpeg_demux::run().

	  Finally, in ffmpeg_demux::remove_datasink(int stream_index) added
	  a call to the data_avail() function of the appropriate sink to
	  indicate that no more data will be available.

2006-11-15 15:59  jackjansen

	* - Adapted Python interface to new pkt_dtasource changes - Fixed
	  Python unittests - Added libintl and libiconv to the libambulant
	  link command.

2006-11-10 17:45  keesblom

	* Added "X-QT" as as a "live" codec id for "mp3" Added a refcount
	  for the rtsp datasource thread.  Audio via rtsp now also works.

2006-11-10 14:42  keesblom

	* In ~rtsp_context_t(), use proper cleanup functions, as specified
	  in the header files of the various classes (instead of free()),
	  in (what I think is) the right order Disabled ugly DummyTask.
	  Nevertheless the problems with 2nd time playing Willemijn and
	  Mrs.A.  still remain.

2006-11-09 10:41  keesblom

	* Added instance id's to debug messages

2006-11-08 16:47  keesblom

	* Improved video over rtsp. Added ciritcal section locking for
	  public methods.  In most cases, rtsp_demux destructor is now
	  properly called and the just shown can be correctly replayed. But
	  sometimes a replayed video is still a couple of seconds ahead
	  (Birthday-rtsp: Frans play correct, but Willimijn and Mrs.A. do
	  not). Still silently ignoring last video frame and adding an ugly
	  dummyTask.

2006-11-03 16:34  keesblom

	* RTSP video now works somewhat better, the player doesn't hang
	  anymore.  But the costs are: last video frame is always skipped,
	  and an ugly DummyTask was introduced to get liveMedia out of its
	  select() system call.

2006-11-02 15:35  keesblom

	* Made rtsp mp4 with H263 video and AAC audio work. Apperently, the
	  ffmpeg function avcodec_alloc_context() (which creates an
	  AVCodecContext pointer) initializes the 'channels' field to '1'
	  (Mono) which is not always correct.

2006-11-01 14:34  keesblom

	* Accidently worked on an abandoned branch, merged it back with
	  trunk

2006-10-13 15:47  jackjansen

	* Explicitly call get_url() when converting a url to a string.

2006-10-13 15:46  jackjansen

	* Careful reading of the SMIL spec (by me and Sjoerd) seems to
	  indicate that the set of event names is open-ended in the
	  Language Profile.  Hence, don't check the names, allowing
	  user-defined names (even though the events don't actually do
	  anything).

2006-10-13 15:44  jackjansen

	* Send XML documents to the IE widget.

2006-10-13 15:44  jackjansen

	* Add mimetype application/xml for .xml extension.

2006-10-13 15:43  jackjansen

	* Disabled automatic conversion of url to strings, it masks too
	  many errors.

2006-10-10 17:52  jackjansen

	* Added an add_fragment() method. (The more consistent name add_ref
	  has too many refcounting connotations).

2006-10-10 17:30  keesblom

	* Merged the branch for packet datasouce with trunk

2006-10-05 17:17  jackjansen

	* Somehow the scheduler appears to reuse html widgets on seeking.
	  For now abort the second attempt to play the html (with a
	  message) in stead of crashing the player.

2006-10-02 15:29  jackjansen

	* Sometimes using clipBegin caused quicktime to hang. Created a
	  workaround, but it is not 100% deterministic:-(

2006-09-29 17:08  jackjansen

	* Allow passing "-fullScreen YES" on the command line to open all
	  documents in fullscreen mode.

2006-09-28 16:58  jackjansen

	* Major rewrite of cocoa_video using QTKit in stead of the older
	  NSMovie and NSMovieView classes. This makes things behave a lot
	  better when going to/from fullscreen mode, and also enables
	  future modifications for allowing transitions and overlays on
	  video.

	  Also create the video in the correct size wrt. fit attributes.

2006-09-28 16:56  jackjansen

	* Use applicationWillFinishLaunching in stead of
	  applicationDidFinishLaunching for initialization: this gets the
	  initialization done before the first document is opened when
	  staring by double-clicking a document.

2006-09-25 16:56  keesblom

	* Fixed a core dump on rtsp to a server that is down

2006-09-25 16:52  keesblom

	* Added AM_DBG to a log message

2006-09-22 16:29  keesblom

	* Undo of an undesirable experimental modification accidentally
	  committed

2006-09-22 12:56  jackjansen

	* - ppc builds on intel now work too.  - cleanup.

2006-09-22 11:15  jackjansen

	* Merging branch exp-jack-osx-universal: enable building universal
	  binaries on MacOSX. The procedure is still a bit shakey, but at
	  least it is documented (in src/player_macosx/README and
	  third_party_packages/readme-osx.txt).

2006-09-21 16:56  keesblom

	* #1562153 (deadly embrace on Windows) solved by moving a call to
	  destroy_playables out of the area protected by m_playables_cs.

2006-09-21 16:42  keesblom

	* Made firefox plugin window  specific s.t. each firefox window
	  gets its own plugin, irs own playabl, etc.

2006-09-21 12:58  keesblom

	* Adapted firefox plugin s.t. it "works" again with embedded
	  scriptable controls (known limitations: one url only, firefox may
	  crash when opening another file)

2006-09-19 15:32  keesblom

	* Repaired net/datasource.cpp s.t. it also works on Linux.  Tagged
	  the trunk "release-ambulant-18-merge-trunk-1".  Previous tags
	  "release-ambulant-18-merge" and "release-ambulant-18-merge-trunk"
	  are meaningless (not to be used).

2006-09-18 13:39  p_cesar

	* typo error

2006-09-18 13:38  p_cesar

	* libtool instructions for mac

2006-09-16 00:22  jackjansen

	* Added a call to set global audio playback volume.

	  At the moment this is not honoured directly, but only as soon as
	  new items are played (or other volume control happens), that may
	  need to be changed.

2006-09-15 17:23  jackjansen

	* Don't do node_started() callbacks to the embedding application
	  while fast-forwarding.

2006-09-15 11:44  jackjansen

	* When starting a document with goto_node be sure to also start the
	  update() callback.

2006-09-15 00:04  jackjansen

	* A fix that I'm not 100% sure of (i.e. needs to be tested): when
	  playing blabla.smil#node, don't first call start() but call
	  goto_node() straight away (as it will implicitly start the
	  document).

	  But it seems the Windows player can hang, sometimes?

2006-09-14 23:57  jackjansen

	* Added various calls to started().

2006-09-14 23:56  jackjansen

	* Fixed off-by-one error in splitting path#frag for Windows
	  filenames.

2006-09-14 22:45  jackjansen

	* Call setLoadExternalDTD(false), otherwise the Xerces parser will
	  still do some (minimal) network traffic even when validate=never.
	  This causes a stall when not connected to the net, or even a
	  parse error if www.w3.org isn't in the NS cache.

2006-09-08 15:52  keesblom

	* Updated TIPS-NOKIA770 for the 2006 Software Edition

2006-09-08 15:05  keesblom

	* Updated version number to 1.8

2006-09-08 13:43  keesblom

	* Updated version number to 1.8 in the XP installer

2006-09-08 13:39  keesblom

	* Made qt_html_renderer compile agian

2006-09-08 11:57  jackjansen

	* 1.8 icons.

2006-09-08 11:49  jackjansen

	* Icon for 1.8

2006-09-08 09:30  jackjansen

	* Put digits in separate layer.

2006-09-06 17:01  keesblom

	* Preparing for distribution: added missing finction
	  html_browser_imp::uses_screen_reader()

2006-09-06 00:45  jackjansen

	* More news.

2006-09-06 00:20  jackjansen

	* Started on updating the readme's.

2006-09-05 23:47  jackjansen

	* Python-Qt based example player works!

2006-09-05 15:21  keesblom

	* Added AM_DBG for debug messages generated for each video frame

2006-09-05 13:15  keesblom

	* #define AM_DBG turned off

2006-09-05 11:10  keesblom

	* Update preparing for 1.8 release

2006-09-04 17:43  jackjansen

	* Don't schedule out transitions when fast-forwarding a node.

	  Fixes #1501707.

2006-09-04 16:54  keesblom

	* Eliminated potential crash by suppressing unnessary calls to
	  stopped()

2006-08-30 14:50  keesblom

	* Reset the multiple calls to gst_element_set_state() back because
	  it seems less stable without them. The succesive states were
	  found on Nokia770 using: gst-launch-0.10 gnomevfssrc
	  location=<filename> ! dspmp3sink

2006-08-30 11:01  keesblom

	* Removed some superfluous(?) calls to gst_element_set_state()
	  According to gstreamer documentation, all intermediate state
	  changes are done automatically by gstreamer

2006-08-29 16:25  keesblom

	* Made the Menu items Help->AmbulantPlayer Help/Website work using
	  some suitable commands on the dbus.

2006-08-29 14:47  keesblom

	* Omitted extra qualifier to get gcc satisfied

2006-08-29 10:05  keesblom

	* AmbulantPlayer now installs and plays on Nokia withour problems.

2006-08-24 16:47  jackjansen

	* Allow for HTML to be timed, for example when it has to go to a
	  text-to-speech engine.

2006-08-24 16:46  jackjansen

	* The document class needs the Win32 export mumbo-jumbo.

2006-08-24 16:46  jackjansen

	* del_attribute() modified the attribute list while iterating over
	  it. Fixed.

2006-08-24 16:45  jackjansen

	* - Special treatment of discrete nodes wrt. timing calculations is
	  not only   against the SMIL spec, but also turned out to be a
	  problem for Amis,   where text nodes may need to be rendered
	  through a speech synth.    WARNING: this fix may cause documents
	  to hang, if there are renderers    that do not call
	  context->stopped().  - node_started callbacks were given a bit
	  late. Fixed.

2006-08-23 16:41  keesblom

	* Some more cleanup

2006-08-23 15:01  keesblom

	* Some cleanup as suggested by valgrind

2006-08-22 17:40  jackjansen

	* A few more minor fixes to the mass factory checkin.

2006-08-22 17:32  jackjansen

	* Forgt another file.

2006-08-22 17:31  keesblom

	* Small fix to make it compile again

2006-08-22 17:04  keesblom

	* Small fix to make it compile again

2006-08-22 16:43  ishanvaishnavi

	* dded framerate to video_datasource. Added some jitter handling
	  capability. Ishan

2006-08-22 16:40  ishanvaishnavi

	* Added framerate function to video_datasource class. Added some
	  capability for jitter related issues. Ishan

2006-08-22 16:08  jackjansen

	* Forgot to add this file.

2006-08-22 16:00  jackjansen

	* Mass checkin: added factory functions for all factories. This
	  allows use to hide the factory classes, which in turn means you
	  don't need to include any cruft (such as SDL headers when you
	  only need the SDL factory).

2006-08-22 14:02  jackjansen

	* Builds both with and without QT support.

2006-08-22 13:37  jackjansen

	* Various third party libraries were included notonly when linking
	  libambulant, but also libambulant_qt and such. This not only made
	  the libraries huge, but also caused problems for the python
	  plugin.

2006-08-22 10:59  jackjansen

	* QWidget definition guard changed.

2006-08-21 17:49  jackjansen

	* Exported the newly available qt factory functionality to Python.

2006-08-21 17:28  jackjansen

	* Split implementation details out of qt_factory.h and moved them
	  to qt_factory_impl.h.

2006-08-21 15:05  keesblom

	* mp3 audio on Nokia 770 doesn't crash any more (well... I hope
	  so).	m_gst_player_mutex was added to protect the gstreamer
	  player.  All extern "C" { code } was recodeed into C++.  Usage of
	  "#ifdef NOKIA770" was minimized.

2006-08-21 14:32  ishanvaishnavi

	* Added mpeg2 support. Works now slightly flickery. Ishan.

2006-08-21 14:31  ishanvaishnavi

	* Added frame alignment. Mpeg2 video works now but is slightly
	  flickery (late frames ?). Ishan

2006-08-18 17:18  jackjansen

	* Adapted for changes to factory.

2006-08-18 16:18  jackjansen

	* Adapted for changes in factory.

2006-08-18 15:43  jackjansen

	* Fixed factory objects to be more Python-compatible: a couple of
	  methods needed to be virtual (so they can be overridden in
	  python) and instance variables need to be private.

2006-08-18 15:30  jackjansen

	* Works using the none_gui windows and playables.

2006-08-17 17:29  ishanvaishnavi

	* Called tearDownSession to cleanly exit.Ishan

2006-08-17 17:03  jackjansen

	* Got started on some instructions.

2006-08-17 16:44  keesblom

	* Restructured code a little bit to despaghettize the locking
	  mechanism Nokia770 still dumps core, but maybe not because of
	  gstreamer_player, but because of bugs in drawing code: stack
	  backtraces suggest so.

2006-08-17 16:41  ishanvaishnavi

	* Freed memory which I forgot in my last check in. Ishan.

2006-08-17 16:36  ishanvaishnavi

	* Fixed typo.

2006-08-17 16:18  jackjansen

	* Started on the Python example program: a minimal Qt player.  At
	  the moment it's a boilerplate Qt app.

2006-08-17 15:07  ishanvaishnavi

	* Added Mpeg4 support for RTSP. Ishan.

2006-08-17 11:55  jackjansen

	* Minor mods to make qt-player work (after some hacking) with Mac
	  Qt.

2006-08-16 23:22  jackjansen

	* The code for handling file: urls had become badly broken by fix
	  upon fix.  It couldn't handle URLs for files with spaces in the
	  name anymore, such as the Welcome document:-)

	  Fixed, but I'm not 100% sure I didn't break anything else...

2006-08-15 17:09  jackjansen

	* Got rid of some unneeded copying and other dead wood.

2006-08-15 17:06  jackjansen

	* Got rid of debug image dumping code.

2006-08-15 15:59  keesblom

	* Attempt to satisfy valgrind somewhet

2006-08-15 15:57  keesblom

	* Caught a crash on 770 by running valgrind using gstreamer-0.10 on
	  FC 5

2006-08-15 15:54  keesblom

	* dapted for gcc 4.1 used on Fedora Core 5

2006-08-15 14:05  jackjansen

	* Finished documentation for 1.8 (I think).

2006-08-14 17:44  jackjansen

	* More documentation fixes.

2006-08-14 16:06  jackjansen

	* More bits of documentation updated.

2006-08-14 16:04  jackjansen

	* Unsure (fix was sitting on my disk): may have to do with filename
	  escaping on MacOS.

2006-08-14 00:11  jackjansen

	* Started on fixing API documentation.

2006-08-13 20:56  keesblom

	* gstreamer audio on Nokia 770 now dosn't hnag, but crashes after
	  some time.

2006-08-10 13:30  jackjansen

	* Don't use strdup(), wince doesn't like it.

2006-08-10 13:23  jackjansen

	* Got rid of USE_SMIL21.

2006-08-10 13:23  jackjansen

	* Some pathnames got corrupted. Fixed.

2006-08-10 11:32  jackjansen

	* Got rid of USE_SMIL21.

2006-08-10 00:09  jackjansen

	* Getting rid of USE_SMIL21

2006-08-09 23:59  jackjansen

	* Getting rid of entries for SMIL 2.1 in WD, CR, PR and RC forms,
	  which are no longer relevant.

2006-08-09 23:56  jackjansen

	* Mass commit: getting rid of USE_SMIL21, which is now always on.

	  Compiles on Mac, but that's about all that has been tested so
	  far.

2006-08-07 13:28  keesblom

	* Adapted to gstreamer-0.10.

2006-08-07 12:10  keesblom

	* Adapted to gstreamer-0.10. Do not use this version, ist is not
	  yet tested.

2006-08-04 13:32  keesblom

	* Ported to Maemo 2.0 (PC version). It seems that the system takes
	  care of removing the logger window on exit.

2006-08-02 17:08  keesblom

	* Implemented video transitions for qt and gtk.  Continued bug hunt
	  why the player hangs skppin videos in Flashlight.

2006-07-27 14:35  keesblom

	* Implemented triangle, arrowhead, pentagon and hexagon wipes for
	  Windows XP. The state of in-transition implementation  for
	  Windows XP is now the same as for the other platforms (no
	  subtypes, for each class at least one transition type
	  implemented).

2006-07-27 14:07  keesblom

	* Implemented bowTieWipe for Windows XP.

2006-07-27 11:59  keesblom

	* Implemented irisWipe (which is a required type) for Windows XP.
	  Also repaired a problem appearing in Windows XP with
	  diagonalWipe: m_newpolygon was computed corretcly but not cleared
	  between transition steps. This was not observed on other
	  platforms because of winding rule parameter selection.

2006-07-19 11:19  jackjansen

	* html widget was always created at topleft of the window. Fixed.

2006-07-18 17:07  keesblom

	* data:, URL proiduced error message, although it did work, except
	  on Window when > c16 chars, because the std::string returned by
	  url.get_url() was already reclaimed before an allocated copy was
	  made

2006-07-18 14:11  keesblom

	* Modified dx implementation of r1r2r3r4 transitions
	  (push,slide)Wipe s.t. these more or less work the same way as
	  qt/gtk players do.  Note that they are all wrong because they
	  transition the whole region in which the media is rendered, not
	  the subregion occupied by the media. This holds for all
	  transition types, see EUROshow.smil when EURO 50 image is
	  rendered.

2006-07-18 13:54  keesblom

	* Removed warning that polylist was not tested

2006-07-18 11:12  jackjansen

	* Build shared library builds with xerces builtin, no expat. This
	  is a stopgap to get AmisAmbulant to work better.

2006-07-18 11:12  jackjansen

	* Builds without USE_SMIL21 were broken. Fixed.

2006-07-18 10:49  jackjansen

	* Allow for builds with WITH_XERCES_BUILTIN and without WITH_EXPAT,
	  they will use xerces as the default parser.

2006-07-18 10:48  jackjansen

	* Added a flag to url::from_filename() that allows honoring of
	  #fragment.

2006-07-10 15:31  keesblom

	* Added a call to pthread_mutex_lock() in
	  gtk_gui::do_internal_message() to prevent multiple threads
	  simultaneously access the logger buffer, and crash with a cryptic
	  error message. This happened often in the logger when AM_DBG was
	  enabled.  Although far less frequently, alas! this still happens
	  now and then and I can't understand why: the call to
	  pthread_mutex_lock() is checked for errors and these are not
	  reported when the crash happens.

2006-07-10 09:47  jackjansen

	* Fixes for document_loaded()

2006-07-10 01:49  jackjansen

	* Added a document_loaded() callback that is called after the tree
	  has been read but before the timegraph is created. Embedding apps
	  can use this to modify the tree.

	  For this reason, player::initialize() is always used (not only
	  when USE_SMIL21 is defined) and does most of the work the
	  constructor used to do. If the embedder wants the
	  document_loaded() callback it should call set_embedder() before
	  initialize().

	  Mods	untested for Windows/Linux.

2006-07-07 18:13  keesblom

	* Re-arranged call to gdk_pixbuf_loader_close() to handle small
	  images correctly

2006-07-07 16:00  keesblom

	* Started on creating a list of tests to be done before a
	  distribution.  These tests are supposed to be done on all
	  supported platforms, for the stand-alone players and the browser
	  plugins, when applicable.  Also a list of missing tests and known
	  unimplemented features is added.

2006-07-06 16:22  keesblom

	* Added some debug messages to hunt the Flashlight bug

2006-07-04 16:02  keesblom

	* Reload didn't work properly: it never(gtk) or often(qt) reparsed
	  the document

2006-07-04 15:18  keesblom

	* Renamed the Linux players to AmbulantPlayer_gtk and
	  AmbulantPlayer_qt.  For the time being, "make install" also adds
	  the link AmbulantPlayer to AmbulantPlayer_qt to achieve
	  compatability.  AM_DBG was commented out in ffmpeg*.cpp,
	  otherwise player crashes.

2006-07-03 14:34  keesblom

	* Merging gtk transitions with trunk

2006-07-01 00:18  jackjansen

	* Handle #frag for unknown protocols. Not 100% sure this is a good
	  idea, but it's needed for AmisAmbulant.

2006-06-30 10:41  jackjansen

	* Squashed Windows warnings about dll-enabled classes that contain
	  non-dll-enabled objects. Don't like this, but the workaround is
	  severe.

2006-06-27 13:40  p_cesar

	* get screenshot done

2006-06-26 16:54  ishanvaishnavi

	* Added new audio codec for dynamic RTP stream. ffmpeg doesn't seem
	  to have support for this yet.

2006-06-26 15:49  ishanvaishnavi

	* hanged to support live. Should work now!

2006-06-23 18:06  ishanvaishnavi

	* Trying to add support for audio via viewing a RTSP video stream.
	  This code wasn't written completely before. This change is not
	  complete. But it makes the audio work for atleast mpeg2 video
	  streams.

2006-06-23 16:38  jackjansen

	* pause() method had the wrong signature so it was never called.
	  Fixed.

2006-06-23 13:27  keesblom

	* Bug#1505278 revisited: media do not play when local path on
	  commandline now solved in gui_player.cpp instead of the platform
	  specific players

2006-06-22 16:19  jackjansen

	* context->nstreams was used for two distinct things: counting the
	  number One variable was used for botgh counting the number of
	  streams and the number of active streams. fixed.

2006-06-22 16:13  keesblom

	* Fixed bug#1505278 by making the path absolute in openSMILfile.
	  In both qt_gui and gtk_gui,m_smilfilename is now a dynamic data
	  structure

2006-06-22 12:10  jackjansen

	* Disabled more debugging.

2006-06-21 14:31  keesblom

	* Turned off AM_DBG debugging flag

2006-06-21 14:26  keesblom

	* Solved bug#1508660: the motion_notify_event was connected to the
	  toplevel widget, but in the destructor an attempt was done to
	  remove it from a lower level widget, which failed.

2006-06-20 15:14  jackjansen

	* Disabling debug prints and other details.

2006-06-20 15:12  jackjansen

	* Found and fixed the last problem that caused navigation not to
	  work on Windows: the renderers didn't all call context->stopped()
	  on a call to stop(). Fixed.

2006-06-20 13:26  keesblom

	* More detailed instructions how to create a installable debian
	  package,

2006-06-20 12:57  jackjansen

	* Details.

2006-06-19 18:03  jackjansen

	* Accidentally commented out killing of playables during ffwd.
	  Fixed.

2006-06-19 16:05  jackjansen

	* Brought over some of the multi-threading fixes from AmisAmbulant.

2006-06-19 16:04  jackjansen

	* Don't crash when trying to view source on remote document. In
	  stead, give an error message:-)

2006-06-19 14:52  jackjansen

	* - Continuous media duration was always ignored (in stead of only
	  while fast-forwarding). Fixed.  - Fixed some debug output.

2006-06-19 14:03  keesblom

	* Added an explicit test for pkg-config, otherwise in the configure
	  script the PKG_CONFIG variable doesn't get properly initialized
	  when the first occurence of the PKG_CHECK_MODULES in configure.in
	  is inside a conditional section (--with-qt) and the condition is
	  false (--without-qt)

2006-06-16 12:46  keesblom

	* With --without-qt explicitly set do not try to use QTDIR
	  environment variable

2006-06-14 16:58  keesblom

	* Reorganized memory management for qt internal messages

2006-06-14 15:38  keesblom

	* AM_DBG turned off

2006-06-14 15:30  keesblom

	* Made "Reload" work with GTK and Qt

2006-06-12 11:54  jackjansen

	* Give fatal error message if the (shared) library is configured
	  for HTML support but the main program is not.

2006-06-12 11:54  jackjansen

	* Various build settings were incorrect for DebugShlib.

2006-06-12 10:17  jackjansen

	* Details.

2006-06-10 23:12  jackjansen

	* More aggressive fix, which seems to work for Daisy books: when
	  setting a node to fast-forward mode also do this to the
	  descendent nodes. In addition, for playable nodes also kill the
	  playable, if it exists.

	  Not sure whether SMIL semantics haven't completely gone out the
	  window, though...

2006-06-10 22:55  jackjansen

	* - Added various debug statements to the fast-forward code.  -
	  Fixed one bug: when fast-forwarding, ignore duration of
	  continuous-media children   when determining whether a time
	  container can finish.

	  Unfortunately this fix is (a) not necessarily correct and (b)
	  good enough for my test document but not for real Daisy books:-(

2006-06-09 17:25  jackjansen

	* The scheduler didn't lock anything, but at the same time it
	  appears to be non-reentrant. Fixed this by adding a real lock,
	  plus a warning message whenever a potential deadlock is detected.

	  Also undid the 1.10 change, but I'm not sure this makes much of a
	  difference.

2006-06-09 14:52  jackjansen

	* - Minor changes to rtsp handling (incomplete) - Additions to the
	  scheduler to facilitate debugging - Unknown changes to the
	  project.

2006-06-07 15:07  ishanvaishnavi

	* Modified so that it compile with gcc 4.1.  Ishan

2006-06-07 13:12  keesblom

	* little optimization in show_frame()

2006-06-06 14:35  keesblom

	* Added locking in gtk_video_renderer::redraw() as well with a
	  comment: locking at this point may result in deadly embrace with
	  internal lock but as far as we know this has never happened

2006-06-06 14:16  keesblom

	* Added a lock in qt_video_renderer::redraw() to prevent
	  segmentation violations

2006-06-02 16:12  keesblom

	* Implemented Arrow/Hand cursors for gtk. Cursors are cached by
	  gtk_window_factory

2006-06-01 15:35  keesblom

	* Got rid of an ugly cast by re-defining qt_mainloop() constructor
	  as suggested by Jack

2006-06-01 15:05  keesblom

	* Made Play-Pause-Stop work for player_gtk

2006-05-31 15:47  jackjansen

	* Added interface to allow plugins to export a data structure to
	  Ambulant.  Added a call to plugin_engine that allows ambulant
	  plugins or embedders to obtain a pointer to this data structure
	  for a given, named plugin.

2006-05-30 16:39  keesblom

	* Repaired PointingHand cursor by remembering qt_mainloop* as
	  m_gui-player

2006-05-30 15:47  keesblom

	* Added new files to the documentation

2006-05-30 10:46  keesblom

	* Adapted PATH to reflect that on apps.cwi.nl 'rsync' is stored in
	  a weird place

2006-05-24 15:15  jackjansen

	* ReleaseShlib was missing HTML widget.  Enabled goto-node code.

2006-05-24 14:49  keesblom

	* Added backup script adapted to the new sourgeforge 'rsync' only
	  policy

2006-05-22 14:17  keesblom

	* Update for Nokia 770. Occasional deadlock when opening new file
	  persists.

2006-05-19 16:55  marisademeglio

	* small bug fix regarding guesstype()

2006-05-17 16:37  keesblom

	* Added some tips for software development on the Nokia 770
	  (networking, debugging)

2006-05-17 15:08  keesblom

	* Turned off debugging

2006-05-17 15:05  keesblom

	* Added a global lock for the Nokia 770 s.t. the DSP processor will
	  only be accessed by one thread at a time (audio must have
	  released hardware before next audio can be initiated).

2006-05-17 14:27  jackjansen

	* Minor fixes for handling urls with #fragment

2006-05-16 11:42  jackjansen

	* Got rid of the bug-workaround for amis-ambulant hanging on close,
	  the problem has been fixed in amis.

2006-05-01 17:25  jackjansen

	* Pass the datasource factory to html_bridge::goto_url, so the
	  implementation can choose to use ambulant datasources to load the
	  html data.

2006-05-01 14:07  jackjansen

	* If _DEBUG is defined, set the default default loglevel to debug.

2006-05-01 12:10  jackjansen

	* Get puglins to link on Windows. Untested.

2006-04-27 23:52  jackjansen

	* Make sure xerces_parser.cpp and expat_parser.cpp are included in
	  a source distribution.

2006-04-27 23:48  jackjansen

	* Added a note about testing the source distribution on Windows.
	  Added a note about testing the OSX distribution on older
	  releases.

2006-04-27 16:31  jackjansen

	* Added a couple more AMBULANTAPI flags.

2006-04-27 16:31  jackjansen

	* Temporary patch to forestall AmisAmbulant deadlock: hide HTML
	  window in-line in stead of scheduling a callback.

2006-04-27 15:21  jackjansen

	* Two files were missing from source distributions, added.

	  Need to backport.

2006-04-26 14:59  jackjansen

	* Got plugins to work also for ReleaseShLib build.

2006-04-26 14:58  jackjansen

	* More deadlocks.

2006-04-26 14:50  keesblom

	* Solved bug when selecting a second file: some callback functions
	  could become active with pointers to removed windows

2006-04-26 10:17  jackjansen

	* sigh, more locking had to be commented out because of deadlocks.

2006-04-24 16:42  jackjansen

	* Got plugins to actually work on Windows again (in a Shlib build).

	  Added a project to the solution that builds the default dummy
	  plugin if we're doing a DebugShlib build.

2006-04-24 15:08  jackjansen

	* Windows plugin support had experienced bitrot over the last
	  months.  Started on fixing it.

	  Also added the plugin uptions to the preferecnes dialog (disabled
	  if plugin support not configured).

2006-04-24 14:55  keesblom

	* More leaks. AmbulantPlayer now playes NewYork on Nokia770
	  fluently without oops.

2006-04-21 16:51  jackjansen

	* Added raw_filter datasources: a datasource that filters data
	  coming from another datasource (for things such as compression or
	  encryption).	Also added a base class for such filters that does
	  most of the administrative work, and an example filter that does
	  rot13 decoding (if the URL ends in .rot13).

2006-04-21 16:00  keesblom

	* More cleanup, commandline args do not work yet, but at least
	  gtk_player doesn't crash

2006-04-21 12:51  keesblom

	* More cleanup, no more Megabytes definitely lost by
	  gtk_image_renderer

2006-04-21 00:21  jackjansen

	* added a test to check that (at least the stdio) datasource works.

2006-04-20 23:56  jackjansen

	* Regenerated without the tp_init calls to the baseclass tp_init.

2006-04-20 23:56  jackjansen

	* Python re-implementations should inherit from the abstract
	  baseclass which they implement.

2006-04-20 17:10  keesblom

	* More cleanup

2006-04-20 16:58  jackjansen

	* AMBULANTAPI is now also used after class sometimes.

2006-04-20 00:08  jackjansen

	* Const in argument dictionaries seems to have disappeared for
	  Python 2.5a1.

2006-04-19 17:08  keesblom

	* Changed image drawing code to get rid of vague images and memory
	  leakes

2006-04-18 15:58  jackjansen

	* std::string could be deleted while the c_str() was still in use.
	  Fixed.

2006-04-13 16:53  keesblom

	* Merged gstreamer branch (audio for Nokia 770) with trunk

2006-04-13 16:45  jackjansen

	* More changes for amis-ambulant integration.

2006-04-12 17:19  jackjansen

	* - Revamped html_browser interface organisation so it can be used
	  in a setting where Ambulant is in a DLL.  - Added various
	  AMBULANTAPI keywords, for using Ambulant in a DLL - Got DLL
	  version of Ambulant to work again.  - Added a couple of methods
	  tha Amis need to url.

2006-04-12 00:07  jackjansen

	* If ffmpeg could open the file but not parse the input format it
	  would leave the AVCodecContext in a partially initialized state.
	  Fixed.  Partial fix for #1437821 (fixes the crash, but still no
	  OggVorbis support).

	  The AVCodecContext object was never freed. Fixed.

2006-04-09 01:12  jackjansen

	* prepare_playables() did some pretty aggressive preloading of
	  playables. This creates problems with long sequences. Disabled
	  the code for the time being.

	  Fixes #1079413.

2006-04-07 16:03  p_cesar

	* no more debug

2006-04-07 15:47  p_cesar

	* gtk_factory is clean up.

	  Still:  - Overlay images are not supported  - Full screen mode is
	  not working  - icons (stop/play) are not implemented

2006-04-06 16:44  jackjansen

	* Enabled node::get_children() for Python nodes with a trick: use
	  the C++ node_navigator. A bit of a hack, but it works.

2006-04-06 15:02  jackjansen

	* More fixes for pause_display

2006-04-06 11:44  jackjansen

	* Added support for pause_display.

2006-04-06 11:39  jackjansen

	* More changes because of implementation of pause_display.

2006-04-05 23:53  jackjansen

	* Mass checkin: enable pause show/hide semantics by adding an
	  optional parameter to playable::pause(). Currently implemented
	  only for the Quicktime video renderer, but most other renderers
	  already accidentally have the right behaviour for 90% of the
	  documents.

	  Needs work on Linux and Windows.

2006-04-05 23:51  jackjansen

	* Better handling of video files that have an audio stream that is
	  recognized but for which no codec is available.

2006-04-05 23:50  jackjansen

	* Enable fullscreen mode on secondary screen(s) too. Fixes
	  #1459157.

2006-04-05 15:06  jackjansen

	* Temporarily disable hand cursor.

2006-03-28 14:13  jackjansen

	* The unicode-based release build had gotten rather broken after a
	  long time of using only the mbcs-based debug build. Fixed it, and
	  also set the debug build to use unicode so this shouldn't happen
	  again in future.

2006-03-27 14:05  jackjansen

	* Implemented navigation with TAB and RETURN.

2006-03-27 13:11  jackjansen

	* Implemented something resembling fullscreen mode. Still has some
	  problems, though: - The taskbar doesn't disappear - The content
	  is topleft, and I can't seem to center it.

2006-03-27 10:18  jackjansen

	* Machine-independent impleentation of memfile using datasources,
	  replacing win32-specific one.

2006-03-24 16:41  jackjansen

	* Minor fix to make things compile for WinCE.

2006-03-24 15:51  jackjansen

	* Show link destination and some other interesting information in
	  the status line at the bottom of the window.

2006-03-23 16:52  jackjansen

	* Added glue code to enable setting the status line.

2006-03-23 16:14  jackjansen

	* Adapted to new before_mousemove()/after_mousemove() API.

2006-03-23 15:25  jackjansen

	* Serious reorganisation: - Group methods by class - Within a
	  class, group them by function - fixed indentation - rationalized
	  a couple of defines - rationalized some code too

2006-03-23 14:46  jackjansen

	* Updated python interfaces.

2006-03-23 14:23  jackjansen

	* Temporarily disabled mouseMoved handling to make Qt player work
	  again.

2006-03-23 13:18  jackjansen

	* Revamped mouseOver handling. The GUI first calls
	  before_mousemoved(), then passes the event to the layout
	  structures (which call pointed() for each active region
	  containing the mouse), then calls after_mousemoved() which can
	  now correctly compute which nodes have obtained focus anew, or
	  lost focus.  This gets rid of lots and lots of spurious inBounds,
	  focusIn, outOfBounds and focusOutEvents, and makes the hand
	  cursor behave more predictable too.

	  Only tested on mac, so far.

2006-03-20 11:37  jackjansen

	* Got rid of a few leaks.

2006-03-20 00:02  jackjansen

	* Added a method get_default_size() to window_factory. This allows
	  auxiliary presentations to use the size of the main presentation
	  by simply not specifying a root-layout size. It should even allow
	  centering and such, I hope.

2006-03-17 14:15  jackjansen

	* Auxiliary document is starting to work, somewhat.

2006-03-17 13:39  jackjansen

	* Attempting to delete a thread before it had actually started
	  caused a crash.  Fixed.

2006-03-17 00:33  jackjansen

	* Aux_open() wasn't virtual (sigh), fixed.

2006-03-16 17:03  jackjansen

	* Started on experimental support for playing a second (control)
	  presentation on top of the first one. Does not work yet, but
	  neither does it appear to break anything:-)

2006-03-16 00:09  jackjansen

	* - Added better handling for URLs with unknown schemes.  - Better
	  error message in case of linking to an external document that
	  does not exist.

2006-03-15 23:25  jackjansen

	* Fixed various error messages.

2006-03-15 23:25  jackjansen

	* Fixed a rare race condition (resulting in a hang) during cleanup.

2006-03-15 13:34  jackjansen

	* MouseMoved events also work in fullscreen mode.

2006-03-15 13:31  jackjansen

	* Got fullscreen input to work. Changing the mouse cursor over
	  links does not work yet, that will have to wait.

2006-03-15 11:46  jackjansen

	* Fullscreen mode works, but no input yet.

2006-03-15 00:23  jackjansen

	* Started on fullscreen view. Partially working.

2006-03-14 22:44  jackjansen

	* Always return absolute paths from get_local_datafile().

2006-03-14 16:56  jackjansen

	* Fixed some tab/space confusion.

2006-03-14 16:47  jackjansen

	* Sanity checks

2006-03-14 16:13  jackjansen

	* Rationalized code quite a bit, removed unused stuff.

2006-03-14 15:26  jackjansen

	* Getting rid of debug output made gtk video renderer work.

2006-03-14 14:44  jackjansen

	* Qt didn't include ffmpeg video. Fixed.

2006-03-13 17:40  jackjansen

	* Fixed ffmpeg video timing. Main problem was the use of two
	  distinct timers in video_renderer and ffmpeg_video_datasource,
	  with deltas from the one being used to calculate delays for the
	  other. Also fixed a few minor issues.

2006-03-10 18:11  jackjansen

	* added a del_attribute() method to nodes.

2006-03-10 16:22  jackjansen

	* Also allow goto_node() while the document is playing.

2006-03-09 16:47  jackjansen

	* - Got rid of xerces and live for the annotator project (they were
	  causing problems on the intel mac that I don't want to bother
	  with right now).  - Added pause/resume to the quicktime video
	  renderer.

2006-03-06 14:15  jackjansen

	* Added dummy highlight() method.

2006-03-06 11:18  jackjansen

	* Added dummy highlight methods.

2006-03-06 09:03  jackjansen

	* Implemented highlighting (embedder can highlight nodes) and,
	  while I was at it, using tab/return to navigate over anchors and
	  hyperlinks and follow them. Only tested on Mac, so far.

2006-02-28 00:25  jackjansen

	* - Added node_focussed call to player_feedback. This is called by
	  the player   when a node is hovered over.  - Used this
	  functionality in the Mac player to add a status bar that lists
	  the url a click will send you to.

2006-02-27 17:14  p_cesar

	* [no log message]

2006-02-24 17:59  jackjansen

	* Implemented accesskey on anchors, by keeping a mapping of
	  char->node id and simulating a click when the char is typed.

2006-02-24 17:53  p_cesar

	* Images, Images generated by pen, text works in the annotator
	  audio is missing

2006-02-24 16:59  jackjansen

	* Started on implementing accesskey. Works on the mac, and only for
	  events.

2006-02-23 18:53  p_cesar

	* add image from URL

2006-02-23 16:16  jackjansen

	* Define AMBULANT_PLUGINDIR on the command line, so the plugin
	  loader can also locate the correct directory if our $prefix isn't
	  /usr/local.  Should fix #1396102.

2006-02-23 14:41  jackjansen

	* Change build order for plugins and python module, so build with
	  python plugin can happen in one go.

2006-02-23 14:40  jackjansen

	* Fixed typo in the test for Mac framework Python.

2006-02-22 17:43  p_cesar

	* GTK Ambulant Annotator Server side:	it plays, stop, pause, get
	  document, and get screenshot GTK Core Architecture:  mainloop
	  creates a gtk_ambulant_widget  it initializes the window_factory
	  with that widget	The window_factory creates an
	  ambulant_gtk_widget	    This way, we have control from the
	  mainloop over the    actual GTK widget (rendering area or
	  documentcontainer)	     in order to get screenshots

2006-02-21 18:31  p_cesar

	* First trial to get screenshot from GTK player

2006-02-21 16:41  jackjansen

	* Reorganized to make autogen.sh work again.

2006-02-21 16:41  jackjansen

	* ffmpeg configuration had stupid bug when looking for slurped
	  ffmpeg-cvs. Fixed.

2006-02-21 14:19  jackjansen

	* GTK player works again.

2006-02-17 14:19  jackjansen

	* More bits and pieces of getting gtk_player and qt_player back in
	  shape.

	  qt_player should work, gtk_player is still broken.

2006-02-16 17:08  jackjansen

	* Merging exp-jack-playerobj branch: - Moved lots of functionality
	  from the various mainloop objects to a   common baseclass
	  gui_player.  - Added support for plugins written in Python.  -
	  Tweaked many interfaces to allow better access from Python.

	  This checkin may well break builds for a few days.

2006-02-15 18:18  p_cesar

	* I think the problem with the reload function is because the
	  GtkDrawingArea created in
	  gtk_ambulant_widget::gtk_ambulant_widget is never removed from
	  the container.  Solutions:	   1. gtk_gui is in charge of
	  creating the GtkDrawingArea  2. when the widget is not needed, it
	  has to be removed from the container and free

2006-02-15 15:34  keesblom

	* Added support for Nokia 770 Internet Tablet.	It compiles in the
	  Scratchbox environment for Maemo after: configure --with-gtk
	  --with-nokia770 and using: dpkg-buildpackage -rfakeroot a
	  downloadble debian package will be created:
	  ../ambulantplayer-app_0.2_arm.deb

2006-02-15 15:08  p_cesar

	*
	   no more gtk_C_callback_helper_queue_draw_area message

2006-02-15 11:18  p_cesar

	* gtk_gui and gtk_factory do not print any debug information

2006-02-15 11:09  p_cesar

	* gtk_player does not need of the ui xml file

2006-02-14 16:06  p_cesar

	* Modified delete/free error in gtk_logger (m_logger_window)
	  Modified delete/free error in gtk_factory (m_pixmap)

	  The problem with the video happens as well in QT version...
	  (maybe ffmpeg?)

2006-02-13 17:49  p_cesar

	* Several trials with g_thread and add_idle still video is not
	  working properly

2006-02-10 17:08  p_cesar

	* Several tries, video is not ready yet

2006-02-07 14:37  p_cesar

	* User events work.  Current problems:	- the player crashes when
	  reloading/stopping a presentation	- videos are played, but
	  skipping too many frames	 - the size of the main window has
	  to take into account the GUI size (when resizing and when
	  handling events)    - The GUI expects an exact location of the
	  XML file

	  Current features	  - Images/text/fill/video support	  -
	  User events (mouse)	- GUI

	  Next:   - solve the mentioned bugs	  - start the develpoment
	  of the cairo renderer (including a transparent conatiner in which
	  to place SVG ink strokes)

2006-02-07 12:10  p_cesar

	* Resize functionality

2006-02-07 10:02  p_cesar

	* Video works (but, it skips many frames.... ??)

2006-02-06 16:31  p_cesar

	* More debug printings unset

2006-02-06 16:28  p_cesar

	* Debug printing is unset

2006-02-06 12:39  p_cesar

	* Image rendering

2006-02-03 13:34  p_cesar

	* Ambulant does not crash with images

2006-02-01 13:53  p_cesar

	* Current status:	- <text> works fine	- <brush> works
	  fine	  - <img> does not get the proper image   - <audio> works
	  fine	  - <video> does not work	  - User interaction: not
	  provided yet	  - The GUI is copmleted and the .smil files can be
	  played	- Logger, open URL, open file... works

2006-02-01 13:45  p_cesar

	* renderer_text works with Pango

2006-02-01 09:31  p_cesar

	* Brush working Text working (only single line) Image on the way

2006-01-30 18:33  p_cesar

	* Brush and Background color in the regions are starting to work

2006-01-27 17:26  p_cesar

	* GdkPixmap is there

2006-01-27 14:56  p_cesar

	* Merging exp-pablo-gtk branch Initial implementation of GTK
	  support - GTK gui is working - GTK renderers are on the way

2006-01-23 16:49  jackjansen

	* Fairly serious reorganisation to make Windows renderers follow
	  the same pattern as Unix/Mac renderers.

2006-01-23 15:19  jackjansen

	* Adapted for factory function accessors.

2006-01-23 14:52  jackjansen

	* (temporarily?) disable early loading of plugins because it
	  doesn't work with the new accessor scheme for factories. To be
	  determined whether this is ok.

2006-01-23 14:47  jackjansen

	* More changes for WinCE wrt. datasourcde usage. Still doesn't
	  work, though.

2006-01-23 14:17  jackjansen

	* Added cleanup of m_factory.

2006-01-23 14:15  jackjansen

	* More factory function accessor mods.

2006-01-23 13:21  jackjansen

	* Tweaks for: - Using accessors for factory objects - WinCE port of
	  datasource mods.

2006-01-21 00:37  jackjansen

	* Step 1 towards a self-contained player: add accessor methods to
	  the factories object.

2006-01-20 23:57  jackjansen

	* Squashed warning.

2006-01-19 17:37  keesblom

	* Added mp3 codec_id as produced by the Helix RTSP Server

2006-01-12 22:11  jackjansen

	* This file was never added to the repository.

2006-01-12 16:51  jackjansen

	* Merge of exp-jack-win-datasource: Windows now also uses
	  datasources for getting static media. A new win32_datasource has
	  been added that can retrieve both local and http-based media. The
	  old win32_memfile has gone, and the platform-independent memfile
	  has been reworked to accept any datasource as argument and
	  provide a file-like interface.  In addition, a helper routine
	  read_data_from_datasource has been added that gets all the data
	  from a datasource in one fell swoop.

2006-01-10 16:15  jackjansen

	* net::url mods ported to WinCE. Untested.

2006-01-10 14:54  jackjansen

	* Merging branch exp-jack-winurl:

	  net::url objects now always contain a true URL (so no more
	  windows filenames).  The constructors (except the default one)
	  are hidden, and there are factory functions net::url::from_url()
	  and net::url::from_filename() that accept a URL and filename
	  string, respectively. Get_path() and get_file() are now really
	  different, and the latter should only be called if
	  is_local_file() is true. It returns a local-os-style pathname.

	  In addition there's a class method set_strict_url_parsing(bool)
	  that enables checking URLs for illegal characters (space, \,
	  etc).

2006-01-06 17:00  jackjansen

	* Merging changes for 1.6.1 (from ambulant-release-16-branch) back
	  to the trunk.

2006-01-06 13:28  jackjansen

	* New SDL version needs to be linked with AudioUnits framework.

2006-01-06 12:08  jackjansen

	* Got video colors correct on the Intel mac.

2005-12-16 15:07  jackjansen

	* Added a paragraph on merging fixes from the trunk to the release
	  branch.

2005-12-16 13:07  jackjansen

	* Fixed yet another bug in the handling of mixed url/windows
	  notation.

	  Backport candidate.

2005-12-16 12:55  jackjansen

	* Slightly better formatting of the message dialog.

2005-12-16 12:40  jackjansen

	* OpenURL also had the "double play" bug that Open File had. Fixed.

	  Bugfix candidate.

2005-12-15 16:02  jackjansen

	* - @executable_path is also okay as a dependency - modify the
	  library id for the xerces library too.

2005-12-15 15:20  jackjansen

	* During the build process, test for dependencies on non-Apple
	  libraries.  These are probably a signal of a problem (such as
	  inadvertently having linked with a library in /usr/local).

2005-12-13 16:58  jackjansen

	* Added ctrl-L as shortcut for Open URL.

2005-12-13 16:58  jackjansen

	* Argh. Off-by-one error in previous fix.

2005-12-13 16:50  jackjansen

	* Improved error reporting.

2005-12-13 16:49  jackjansen

	* URLs of the form "http://www.cwi.nl" (without trailing slash)
	  were not parsed correctly. Bugfix candidate.

2005-12-13 16:11  jackjansen

	* Check that SMIL documents actually have a <smil> root node (to
	  forestall trying to interpret random XML or HTML as smil)

2005-12-13 15:24  jackjansen

	* Post-release updating of version number to 1.7.

2005-12-13 15:20  jackjansen

	* Merging changes from release-ambulant-16-branch back to the
	  trunk.

2005-12-12 16:01  koelimoe

	* changed the live.com into live555.com

2005-12-12 15:23  jackjansen

	* Sleep/hibernate fixes (1.36 and 1.36) broke fullscreen
	  transitions. Fixed.

2005-12-09 17:09  dcab

	* Updated icon for 1.6 (win-mfc)

2005-12-09 17:09  dcab

	* Updated icon for 1.6 (winCE)

2005-12-09 17:08  dcab

	* Updated News page for 1.6

2005-12-09 13:41  koelimoe

	* Flashlight video plays again. I had to anable a hack to get it
	  working.

2005-12-08 12:10  keesblom

	* Updated readme

2005-12-07 16:32  keesblom

	* Added scriptable version of the Firefox plugin on Windows XP to
	  play .html files files with MIME-type application/smil in an
	  <embed> tag using libambulant_win32.

2005-12-07 15:41  keesblom

	* Removed initial version of the plugin, to replace it with a
	  scriptable one.

2005-12-06 11:53  koelimoe

	*  removed a unnecessary delete. this caused a crash.

2005-12-05 16:14  jackjansen

	* Fixed nasty bug: supported() used the c_str() of a std::string
	  that was not kept around.

2005-12-05 16:06  jackjansen

	* Various bug fixes and workarounds: - ffmpeg doesn't handle
	  seeking in quicktime/mp4 files correctly. Skip   in stead.  -
	  Scheduler doesn't issue stop() for some movies, so we do that
	  ourselves.	this is a hack.  - Drop B frames while skipping,
	  but I think this should be done in a	 different place (demux).
	  - m_video_clock was initialized to clip_begin in stead of 0.

2005-12-05 15:43  koelimoe

	* fixed cinepack video

2005-12-05 11:53  jackjansen

	* Added some cleanup code, and test some error conditions.

2005-12-02 16:07  keesblom

	* Plugin now also loads into Firefox in reasonable time, thanks to
	  Jacks' black magic.

2005-12-02 00:46  jackjansen

	* Some code needed to be in ifdefs.

2005-12-01 23:18  jackjansen

	* With xerces builtin, it was initialized too late leading to an
	  error message while parsing the settings file. Fixed.

2005-11-30 23:49  jackjansen

	* - Added code to give warnings when an obsolete DTD is used (SMIL
	  2.1 PR, etc).  - Enable that in the DTDCache.  - Include the
	  DTDCache in the OSX debugging builds.

2005-11-30 17:17  keesblom

	* Added scriptability to the Firefox plugin. It compiles and links,
	  but doesn't work yet.  Firefox hangs while trying to load the
	  plugin.

2005-11-30 13:38  koelimoe

	* Fixed: [ 1096356 ] make install installs CVS directories

2005-11-30 13:35  koelimoe

	* removed some unnessary files in live_VC7

2005-11-29 23:49  jackjansen

	* Squashed a few more gcc4 warnings.

2005-11-29 16:11  jackjansen

	* Minor updates.

2005-11-25 17:17  jackjansen

	* Third party packages for Windows updated. Also got rid of most of
	  the horrible #pragma lib constructs to load libraries, in stead
	  specifying them in the project files (with the exception of
	  various OLE and directx libraries).  And use all libraries except
	  xerces statically.

2005-11-25 17:15  jackjansen

	* Third party packages for Windows updated.

2005-11-25 16:41  jackjansen

	* Third party packages for Windows updated.

2005-11-25 11:09  keesblom

	* Changed MIME-type that the plugin supports to "application/smil"

2005-11-24 15:55  keesblom

	* Changed project properties and README.txt such that building the
	  firefox plugin really works with the downloaded SDK package from
	  Mozilla.org

2005-11-23 18:22  keesblom

	* Added firefox_plugin_win32 to the repository.  The initial
	  version works only on win32.	It can play .smil files (audio,
	  video, text and SMIL interaction).  No player controls yet
	  (start,stop,pause,preferences,log,xml settings) .  It is derived
	  from Mozilla's GeckoPluginSDK-samples which must be downloaded
	  and build first in third_party_packages.

2005-11-22 15:35  jackjansen

	* Added targets DebugNoHtmlNoXerces and ReleaseNoHtmlNoXerces for
	  the firefox plugin.

2005-11-21 17:42  jackjansen

	* Tweaks for new Xerces, intel-mac.

2005-11-21 17:29  jackjansen

	* Updated to Xerces 2.7.0

2005-11-21 15:52  jackjansen

	* Merged noxerces projects and solution into the standard one.

2005-11-21 15:24  jackjansen

	* Xerces and non-xerces versions of the Visual Studio files were
	  confused.  Fixed.

2005-11-21 14:20  jackjansen

	* Regenerated.

2005-11-21 13:02  jackjansen

	* Squashed more gcc 4 warnings.

2005-11-21 13:00  jackjansen

	* Ported to Xcode 2.2 and gcc 4.

2005-11-21 11:25  jackjansen

	* Gearing up towards the 1.6 distribution./

2005-11-20 18:11  jackjansen

	* Tweaks for xcode 2.2 and better cleanup.

2005-11-20 02:21  jackjansen

	* Minor mods for gcc 4.0.1/xcode 2.2.

2005-11-16 13:05  koelimoe

	* added VC7 project files for live.com

2005-11-16 11:48  keesblom

	* Removed memory leak time_node_calc, detected by Visual Leak
	  Detector

2005-11-10 15:58  jackjansen

	* Temporarily disabled going to fragments.

2005-11-10 15:17  jackjansen

	* Make "View Log" button actually show the log by sending a command
	  to the top view.

2005-11-10 15:17  jackjansen

	* Reverted to previous xerces.

2005-11-10 14:34  jackjansen

	* More special-case code for handling both windows pathnames and
	  URLs.

2005-11-10 10:15  jackjansen

	* Added callbacks to document_started() and document_stopped().

2005-11-09 17:07  keesblom

	* Added a fix for clipEnd==-1

2005-11-09 15:35  keesblom

	* Attempt to reduce flicker when using HtmlWidget by: - adding
	  WS_CLIPCHILDREN flag in style field of CREATESTRUCT in the
	  PreCreateWindow()   functions of HtmlView and Mmview - overriding
	  OnEraseBkgnd() function in HtmlView to let the system think that
	  background   drawing has already been done

	  There is still some undesirable behaviour: CHTMLView(url,...),
	  when url contains a tag in the middle of a page, first draws the
	  top of the page, immediately followed by the portion of the page
	  containing the tag. In Amis, Marisa DeMeglio has a solution for
	  this.

2005-11-09 14:33  koelimoe

	*  removed an forgotten /*AM_DBG*/

2005-11-09 14:31  koelimoe

	* fixed rtsp.

2005-11-08 15:49  jackjansen

	* Allow a hosting implementation to get callbacks for node and
	  document started and stopped. Not implemented yet for documents.

2005-11-08 14:32  jackjansen

	* Implemented handling of opening url#frag documents on windows and
	  starting the document at the right place.

2005-11-08 14:31  jackjansen

	* For some reason renderer.cpp was still in here (in stead of
	  renderer_impl).

2005-11-01 14:40  jackjansen

	* - Added build instructions for pdf - Regenerated

2005-11-01 13:41  jackjansen

	* More tweaks to make pyambulant build on Linux.

2005-10-31 16:38  jackjansen

	* Squashed the remaining warnings (which are errors under some
	  compilers): - Some _New methods needed to have const arguments.
	  - The hack for returning reference arguments returned from const
	  methods   wasn't good enough. Replaced by a different hack.

2005-10-31 16:34  jackjansen

	* Fixed "make check" and "make clean".

2005-10-28 17:21  jackjansen

	* Hack for compiling on FC4: allow xml_parser::parse with two
	  slightly different signatures.

2005-10-28 16:50  jackjansen

	* ENABLE_NLS needs to be defined to enable compiling on FC4.

2005-10-28 14:52  jackjansen

	* ShowMessage dialog with a "show log" button.

2005-10-17 14:08  jackjansen

	* Handle the ShowMessage ourselves, so we can add a "Show Log"
	  button. Not complete: we need to resize the message box and the
	  "Show Log" button doesn't work yet.

2005-10-14 16:36  koelimoe

	* fixed rtsp [only tested with audio]

2005-10-14 13:53  jackjansen

	* It turns out the solution to the mountains problem is
	  implementing get_start_time() correctly: it should return the
	  actual timestamp of the first sample returned to the user (i.e.
	  depending on whether the datasource implements clip_begin or not
	  it returns clip_begin or 0).

2005-10-14 13:23  jackjansen

	* Pathnames got mangled in 1.22 (maybe due to Kees' machine having
	  a different layout?), reverting to 1.21.

2005-10-14 11:56  jackjansen

	* If clip_begin doesn't fall on the boundary of a data buffer we
	  need to gobble up some bytes from the beginning of the buffer
	  before passing it to the client.

2005-10-14 11:27  jackjansen

	* Newer ffmpeg seems to have some rtsp support, but it doesn't work
	  yet.	For that reason we specifically forego passing rtsp urls to
	  ffmpeg, so we don't get confused by error messages (thinking they
	  come from Live).

2005-10-14 10:28  koelimoe

	* changes to clipend clipbegin

2005-10-12 13:54  keesblom

	* Changes s.t. "make distcheck" works up to "make uninstall" (but
	  not beyond)

2005-10-11 17:10  jackjansen

	* Added a couple of hacks to make linked documents work again on
	  Windows. But we really need to cleanup the URL stuff...

2005-10-11 16:43  jackjansen

	* Various fixes to make clip_end work. Appears to be incomplete,
	  because now the player hangs occasionally.

2005-10-11 00:10  jackjansen

	* Adapted pyambulant to the current state of the API, and added a
	  note about updating it to the readme.

2005-10-10 16:39  jackjansen

	* Reverting 1.66.2.1, which changed to order of deleting objects on
	  cleanup of the smil_player. That change caused a crash when
	  jumping from one document to the next (as in the Nokia tests),
	  and I can't remember at all what it tried to fix.

2005-10-10 16:22  keesblom

	* Reverted back to version 1.8

2005-10-10 14:53  jackjansen

	* Fixed build procedure on 10.4 (Help file indexing).

2005-10-10 14:52  jackjansen

	* Additions for Cocoa html renderer.

2005-10-10 14:40  jackjansen

	* --with-expat argument was ignored, fixed.

	  Fixes #1306933.

2005-10-10 14:19  keesblom

	* Added missing file pkg.m4 to EXTRA_DIST

2005-10-10 12:45  jackjansen

	* License changed to LGPL.

2005-10-10 10:36  jackjansen

	* Detail

2005-10-07 17:06  jackjansen

	* Details.

2005-10-07 17:05  jackjansen

	* Don't attempt to read terminating ";", apparently there are GIF
	  files without it.

2005-10-07 16:22  jackjansen

	* Got clip-begin and clip-end working on Windows.

2005-10-07 15:07  keesblom

	* Changed default backgroundColor to white.

2005-10-07 13:25  jackjansen

	* Updated.

2005-10-07 11:54  jackjansen

	* Merging exp-jack-cocoa-html branch: general cleanup of HTML
	  rendering.

2005-09-30 14:23  keesblom

	* Extended qt_html_renderer such that it can render simultaneously
	  multiple html pages in different regions.

2005-09-29 22:32  jackjansen

	* This outdated file was still around. Removed.

2005-09-29 15:35  keesblom

	* Re-wrote the HTML widget for Linux to look like the HTML widget
	  for Windows, re-using the browser object by remembering it in
	  "surface_impl" data struct.

2005-09-29 11:38  jackjansen

	* - Don't try to push 0 bytes into a databuffer - Added asserts to
	  guard against this

	  Fixes #1122383.

2005-09-28 16:00  jackjansen

	* Fixed a locking problem that could cause  a crash when stopping
	  the presentation during video playback.

2005-09-28 15:58  jackjansen

	* Fixed very old bug: after "Open Recent" the play command was
	  issued twice.  For some reason this was never a problem (probably
	  because the first open finished before the second one was
	  scheduled, which then was a no-op) but it suddenly is.

2005-09-28 15:56  jackjansen

	* Better error messages for audio/video problems (unsupported
	  format, protocol). Fixes #1205996.

2005-09-28 13:53  jackjansen

	* Fixed very old bug: after "Open File" the play command was issued
	  twice.  For some reason this was never a problem (probably
	  because the first open finished before the second one was
	  scheduled, which then was a no-op) but it suddenly is.

2005-09-28 13:52  jackjansen

	* Added assert.

2005-09-27 15:09  jackjansen

	* Python interface is in a state where it is ready for general
	  testing.  Added generated module to the CVS repository, and
	  include building of the ambulant module to configure/automake
	  (depending on --with-python configure option).

2005-09-27 15:02  jackjansen

	* Modified autogen.sh so that it automatically includes our m4
	  directory for aclocal.

2005-09-27 11:53  koelimoe

	* small mod. the status variable wasn't set back to zero after
	  checking for required m4 macro's

2005-09-26 17:16  jackjansen

	* - Added a type HeapTupleType that allocates the struct on the
	  heap. This does   mean that the memory is leaked, unless the API
	  frees it.  - Use HeapTupleType to implement factories: the
	  pointer to the struct is   long-lived. This is a cop-out (the
	  memory-leak note above holds), we should   probably look at the
	  API again.

2005-09-26 16:57  jackjansen

	* Removed debug.

2005-09-26 16:11  jackjansen

	* - Always require exact match in xxx_Check().	- When constructing
	  a C++ wrapper around a Python object check that   all methods
	  exist (attribute name check only) and issue warnings	 for
	  missing methods.

2005-09-26 16:02  koelimoe

	* fixed: ffmpeg_demux bug for ffmpeg-cvs. audio only made
	  ffmpeg-demux cradsh

2005-09-26 15:39  koelimoe

	* little fix needed to compile ambulantplayer after my last changes

2005-09-26 14:10  koelimoe

	* corrected the calculation of timestamps for ffmpeg-cvs

2005-09-26 13:42  jackjansen

	* A few quick hacks to make debugging easier.

2005-09-26 11:32  jackjansen

	* Fixes to make debug builds work.

2005-09-23 17:19  jackjansen

	* Added a define that builds a none_player.

2005-09-23 17:15  jackjansen

	* Parent of region can be NULL, when a node is rendered to the
	  default region.

2005-09-23 17:04  jackjansen

	* Removed erronuous assert.

2005-09-23 17:00  jackjansen

	* Things go wrong when defines like USE_SMIL21 are different during
	  library building and application building. Temporarily made the
	  flags the same, but this will need a better solution later.

2005-09-23 16:12  koelimoe

	* removed an assumtion on the frameduration

2005-09-23 15:37  koelimoe

	* some minor fixes and comments added

2005-09-23 13:47  koelimoe

	* The pts is calculated correctly now in ffmpeg_demux::run

2005-09-23 13:32  koelimoe

	* i1) fixed my previous checkin 2) fixed the timing for ffmpeg-cvs
	  (build 4629)

2005-09-23 00:33  jackjansen

	* - updated posix_datasource and stdio_datasource to the modern
	  semantics   of the API.  - added dump method to event_processor.

2005-09-22 11:35  jackjansen

	* Use PyArg_ParseTuple, not PyArg_Parse, to parse tuples.

2005-09-21 23:57  jackjansen

	* Wrap window_factory (to help find nasty SystemError reason).

2005-09-21 23:57  jackjansen

	* Indentation error caused constructor methods to be skipped unless
	  debug was defined:-)

2005-09-21 23:24  jackjansen

	* Added am_get_codec_var calls so it compiles with cvs ffmpeg.

2005-09-21 16:31  koelimoe

	* small fix for a small change made in datasource.h

2005-09-21 15:45  koelimoe

	* adaptations for ffmpeg-cvs

2005-09-20 23:52  jackjansen

	* Detail.

2005-09-20 23:50  jackjansen

	* After an inline method all subsequent methods were inadvertantly
	  considered private. Fixed.

2005-09-20 23:14  jackjansen

	* Changed the interface for read_data_from_url: in stead of
	  returning the size and eror indication combined we return a bool
	  error condition and return the size through a size_t *.

2005-09-20 23:12  jackjansen

	* We double-wrapped C++ objects passed to Python and then back to
	  C++. Fixed.

2005-09-20 17:14  jackjansen

	* Release the Python GIL while in the ambulant engine.

2005-09-20 16:21  jackjansen

	* Made the datasource_factory getter functions real functions in
	  stead of inlines.

2005-09-20 16:20  jackjansen

	* Pathnames in URLs were not always returned correctly for local
	  files. Fixed this, but this could break workarounds that were in
	  place for the previous bug.

2005-09-20 16:12  jackjansen

	* Made a bit more resilient against errors.

2005-09-20 11:04  keesblom

	* Added a fix for recovery of a DERR_SURFACELOST error, that often
	  occurs at wakeup from sleep/hibernate or screensaver. Any such
	  recovery is logged.

2005-09-19 13:19  jackjansen

	* Added a const_cast (and put the const back in).

2005-09-19 13:06  jackjansen

	* Added pkg_config macros.

2005-09-17 20:18  koelimoe

	* fix to solve a fedora core 4 (gcc 4.0 related) compile problem

2005-09-16 17:57  jackjansen

	* Added get_posix_datasource_factory() and
	  get_stdio_datasource_factory() so we don't have to call the
	  constructors directly.

2005-09-16 17:43  keesblom

	* Added some experimental Restore() calls as suggested by Jack to
	  avoid DERR_SURFACE. Tested with Sleep. It seems that checking
	  using IsLost() before the Blt() often doesn't help, but Restore()
	  when the error is detected is very effective.

2005-09-16 16:24  jackjansen

	* Started on a dummy app that uses the Python interface.

2005-09-16 14:50  keesblom

	* Implemented new datatypes renderer_data and renderer_id

2005-09-16 14:35  koelimoe

	* leftovers :-)

2005-09-16 13:45  koelimoe

	* small fix to make it compile on linux again

2005-09-16 11:33  koelimoe

	* fix for the ffmpeg CVS version & added a comment to databuffer

2005-09-16 11:29  jackjansen

	* Added "const" to a couple of interfaces that are const.

2005-09-16 11:28  jackjansen

	* Test not only for the qt frontend, but for any GUI frontend.

2005-09-16 11:17  jackjansen

	* Updated for current state of the interfaces.

2005-09-15 22:43  jackjansen

	* Removed more turds.

2005-09-15 22:18  jackjansen

	* - Trigger ffmpeg conditional code on the value of
	  LIBAVFORMAT_BUILD (and   LIBAVCODEC_BUILD), which seem to be
	  updated rather faithfully by the ffmpeg   developers when they
	  change something incompatibly. Only did the	ifdefs for the new
	  cvs-ffmpeg code so far.  - Don't use the am_get_codec_var() macro
	  half-way inside an expression,   moved it to the outermost level.

2005-09-15 22:15  jackjansen

	* Fixed instructions.

2005-09-15 22:15  jackjansen

	* Removed turds.

2005-09-15 17:23  keesblom

	* Added redraw function to html_browser

2005-09-15 16:56  koelimoe

	* ao a fix for kees, got rid of the round in parselets so it
	  compiles on windows

2005-09-15 16:48  koelimoe

	* adaptions made to deal with ffmpeg CVS

2005-09-15 16:20  koelimoe

	* last fix to make ambulant + ffmpeg CVS compile in the autogen.sh
	  env.

2005-09-15 15:23  jackjansen

	* Typo.

2005-09-15 15:01  jackjansen

	* Ffmpeg libraries were added to the wrong define.

2005-09-15 14:40  jackjansen

	* Merging exp-jack-newconfigure (with some mods): Christian
	  Schaller donated code that uses autogen.sh to create configure
	  and friends. In addition, configure now uses pkg_config for a
	  couple of packages, and Ambulant also creates the .pc files to
	  allow other packages to use it through pkg-config.  Attempted to
	  keep support for post-0.4.9 ffmpeg working too (but untested).

2005-09-14 10:04  koelimoe

	* Preparing the configure/makefile stuff for ffmpeg from CVS

2005-09-14 10:03  koelimoe

	* mproved ntp parser

2005-09-13 11:43  koelimoe

	* fixes for the mediaclipping parsers

2005-09-12 14:08  jackjansen

	* Details.

2005-09-12 11:17  koelimoe

	* added a missing variable declaration, to ffmpeg video decoder

2005-09-09 16:39  koelimoe

	* created mediaclipping parsers

2005-09-09 11:03  jackjansen

	* - Be more sensible about when restarting input in the video
	  decoder. This   solves the "no data, no eof?" problem and brings
	  the CPU usage down to   a more reasonable level.  - Effectively
	  got rid of MIN_VIDEO_FRAMES by setting it to zero.

2005-09-09 11:00  jackjansen

	* Added a note about removing doxygen output before building a
	  distribution.

2005-09-09 10:53  jackjansen

	* Updated POTFILE.in to reflect new and moved files.

2005-09-09 00:08  jackjansen

	* Added statistics to video renderer, printed at end of video:
	  frames displayed, early, late, dup, NULL.

2005-09-08 16:45  jackjansen

	* - start_frame() expects a timestamp relative to the
	  event_processor   timer, but we were giving it a time relative to
	  our movie-epoch.    Temporarily fixed by converting in the video
	  renderer, but a better solution    would be to move the video
	  clock to the video datasource (in stead    of having it in the
	  renderer)  - the video renderer would re-display a frame that is
	  already on-screen.	fixed.

2005-09-08 15:16  keesblom

	* Made the html_widget bound to the surface_impl (instead of a
	  static pointer).  No cleanup when the surface_impl vanishes, no
	  multiple widgets.

2005-09-08 14:47  jackjansen

	* New_aux_audio_playable() is no longer optional.

2005-09-08 13:45  koelimoe

	* removed a stupid comment

2005-09-07 23:53  jackjansen

	* - Timestamp computations were still incorrect: we also corrected
	  values for   frames which had a timestamp.  - Frame dropping
	  wasn't complete either: if a frame later than the current   frame
	  has already made it to the consumer (and m_old_frame) we should
	  drop the frame in data_avail.  - Added a MIN_VIDEO_FRAME to cater
	  for a very fast consumer, but I'm not   sure it actually makes a
	  difference.

2005-09-06 12:17  keesblom

	* HTML browser per region-step 1: adding data fields in
	  surface_impl

2005-09-05 17:49  jackjansen

	* - Clarified the semantics that thread->start() is idempotent, and
	  implemented	and used those semantics. This will probably fix
	  the valgrind problems   we had with running out of threads
	  (because we could inadvertantly create   tens of thousands of
	  them).  - Cleaned up a couple of memory leaks in the ffmpeg code.
	  Tested only with   ffmpeg 0.4.8 and without live.  - Played with
	  assert()s.

2005-09-05 17:29  jackjansen

	* Merging ie_html_widget branch: we now have a (somewhat) working
	  HTML widget on windows.

2005-09-05 15:49  jackjansen

	* get_aux_audio_playable() is no longer optional.

2005-09-05 14:29  jackjansen

	* - Got rid of the default implementation of
	  get_aux_audio_playable,   making the class pure virtual again.  -
	  Added a comment to the ffmpeg sources that globallly enabling
	  AM_DBG output   is a bad idea.

2005-09-02 14:33  koelimoe

	* smtpe parselet

2005-09-02 13:24  koelimoe

	* creating special parsers for clipBegin clipEnd

2005-08-31 10:54  koelimoe

	* clip_begin clip_end is parsed using parselets now

2005-08-05 14:14  jackjansen

	* Finally found (and fixed) the Linux/Mac audio problems (hiccups
	  during playback): the logic in the datasources was incorrect.
	  Now, the datasource start() method will restart input on it's
	  datasource if it has buffer space available.

2005-08-04 17:04  jackjansen

	* Added assertions, fixed some debug output.

2005-08-04 17:02  jackjansen

	* - Stop() would sometimes keep a lock. Fixed.	- Stop() could be
	  called with the lock held. Fixed.

2005-08-04 17:01  jackjansen

	*
	  Diudn't get removed during the merge.

2005-08-03 12:59  jackjansen

	* Missed 2 singletons.

2005-08-03 12:43  jackjansen

	* The factories are destroyed when a document is closed, so
	  implementing them as singletons was not a good idea.

2005-08-02 23:34  jackjansen

	* Started filling the credits file.

2005-08-02 17:03  jackjansen

	* 64bit fix.

2005-08-02 15:59  jackjansen

	* Gcc 4.0 compatibility fix.

2005-08-02 15:21  jackjansen

	* Finally ran boost configure, and gcc 4.0 seems indentical to 3.4.

2005-08-02 12:44  jackjansen

	* (Finally) added version number to the installer, so we don't have
	  to manually rename it. Also documented this.

2005-08-02 12:42  jackjansen

	* Somehow the Dirac fix stopped working today. More aggressive fix:
	  completely ignore duration if it is zero.

2005-08-02 12:42  jackjansen

	* Details.

2005-08-01 17:15  jackjansen

	* Split ffmpeg and demux code and headers in a couple of distinct
	  files: - ffmpeg_factory.h has factory functions -
	  demux_datasource.h has non-ffmpeg-dependent demultiplexing
	  datasources - ffmpeg_audio.h has ffmpeg audio support -
	  ffmpeb_video has ffmpeg video support - ffmpeg_common has the
	  common code (demux, init, etc)

2005-08-01 11:28  jackjansen

	* More cleanup

2005-07-28 16:23  jackjansen

	* Dirac now works on the Mac too.

2005-07-28 15:11  jackjansen

	* Ignore avcodec_decode_video return value for ffmpeg 0.4.9. This
	  makes dirac work on Linux.

2005-07-28 14:25  jackjansen

	* Dirac support.

2005-07-28 14:15  jackjansen

	* Merging exp-jack-diracvideo: - factored clipBegin/clipEnd support
	  code out - implemented clipBegin/clipEnd for QuickTime - fixed
	  ffmpeg timestamps/clipBegin/clipEnd - cleaned up bits of ffmpeg

2005-07-28 13:46  jackjansen

	* - Factored out clipBegin/clipEnd parsing code and put it into
	  renderer_playable - Implemented clipBegin/clipEnd support for
	  QuickTime video renderer.

2005-07-28 00:06  jackjansen

	* Fixed lots of issues with ffmpeg, including clipBegin/clipEnd,
	  garbage collection and more.

	  Unfortunately Dirac still doesn't play back. And mp4 support is
	  broken in ffmpeg 0.4.9:-(

2005-07-26 14:36  jackjansen

	* - Fixed ffmpeg video playback on MacOS. Note that the fix may be
	  10.4-only, I'm not sure.  - Added a preference so selection of
	  quicktime/ffmpeg video playback is   now a runtime option (as
	  opposed to compile-time).

2005-07-25 16:26  jackjansen

	* Added support for a build with ffmpeg-0.4.9 and dirac.
	  Unfortunately it doesn't play dirac video yet.

	  Squashed a couple more warnings.

2005-07-25 14:56  jackjansen

	* - The updating of various fields (width, height, samplerate, etc)
	  in   m_fmt of the video and audio decoders was a mess.
	  Rationalized.  - squashed various warnings.

	  These have made rtsp support work somewhat on MacOSX.

2005-07-25 13:45  jackjansen

	* - Enabled rtsp support in xcode-based build on the mac.  - Got
	  xerces support in xcode-based build working.

2005-07-25 01:24  jackjansen

	* For audio also implemented early testing that the format can be
	  decoded.  Only slightly tested.

2005-07-25 00:56  jackjansen

	* Before creating a video datasource check also that the codec is
	  supported, in stead of only checking that the file format is.
	  This gives better error messages, and forestalls a crash.

2005-07-24 23:44  jackjansen

	* Removed debug.

2005-07-24 23:43  jackjansen

	* get_dur(), or actually the underlying ffmpeg_demux::duration(),
	  didn't cater for clipBegin and clipEnd. Fixed.

2005-07-24 23:13  jackjansen

	* m_goto_node wasn't initialized leading to random crashes.

2005-07-22 16:06  jackjansen

	* Detail

2005-07-22 14:01  jackjansen

	* Addedan extra indictation that this is a development installer

2005-07-22 14:00  jackjansen

	* A few leftovers from the node changes.

2005-07-22 13:13  jackjansen

	* A few leftovers from class name changes.

2005-07-21 23:24  jackjansen

	* merging exp-jack-classnames, which renames a fair number of
	  classes: - The "active_" and "passive_" prefixes are gone (except
	  in the MMS   scheduler where they actually still mean something).
	  - various incorrect uses of "abstract_" are gone - if something
	  has a virtual API and an implementation the unadorned   name is
	  used for the api and the implementation has "_impl" appended.

2005-07-19 17:13  jackjansen

	* Squashed another warning.

2005-07-19 15:52  jackjansen

	* Details.

2005-07-19 15:40  jackjansen

	* Squashed a few more warnings seen on Windows

2005-07-19 15:09  jackjansen

	* Squashed all compiler warnings as detected by XCode.

2005-07-19 15:07  jackjansen

	* - Added another note on machine-dependent defines - regenerated
	  html

2005-07-19 00:13  jackjansen

	* Added notes on the new (1.5 onwards) branch/tag naming scheme and
	  a couple more guidelines on doing distributions.

2005-07-18 23:44  jackjansen

	* Merged 1.4 branch up to 1.4.5. Set a tag
	  release-ambulant-145-merge on the branch.

2005-07-18 16:43  keesblom

	* Added more locks in a (vain) attempt to avoid segmentation
	  violations

2005-07-14 16:12  keesblom

	* Turned off #define AM_DBG

2005-07-13 14:01  koelimoe

	* fixed video render stuff that i broke

2005-07-13 11:45  koelimoe

	* fixed video sound

2005-07-13 11:35  koelimoe

	* small fixes to rtsp code to make it compile again, after jacks
	  branch  exp_jack_classnames got merged with the trunk.

2005-07-11 11:36  jackjansen

	* Dead wood removal.

2005-07-11 11:25  jackjansen

	* Added region_dim

2005-07-11 00:02  jackjansen

	* Fixed an error message and removed dead wood.

2005-07-11 00:02  jackjansen

	* Removed one line too many

2005-07-10 23:48  jackjansen

	* Got rid of some dead wood.

2005-07-10 23:42  jackjansen

	* Animation_destination done.

2005-07-08 17:29  jackjansen

	* Various improvements in the API (triggered by the Python bridge).

2005-07-08 17:28  jackjansen

	* Added support for audio_format_choices.

2005-07-08 15:56  koelimoe

	* added m_lock

2005-07-08 13:53  jackjansen

	* Get rid of all ther std::pair<bool, double>, replaced by
	  common::duration, defined in playable.h. For now, I'm not sure
	  where the right location is.

2005-07-08 12:54  koelimoe

	* added m_locks that i forgot

2005-07-08 11:54  jackjansen

	* - Fixed a few issues with std::pair support - Added
	  transition_info

2005-07-07 23:59  jackjansen

	* Started on support for std::pair.

2005-07-07 16:13  koelimoe

	* added mimetype support to the audio/video_format.  fixed missing
	  samplerate on wav files.

2005-07-06 18:45  jackjansen

	* Refined the type RE to catch even more methods.  Better error
	  handling for callbacks.

2005-07-06 14:42  keesblom

	* Now the html widget is contained within the region associated
	  with the tag.

2005-07-06 14:19  jackjansen

	* Refactored test to use a suite.

2005-07-06 12:06  keesblom

	* Made configure --with-qt-html-widget=yes work again

2005-07-06 11:34  keesblom

	* Added qt_html_renderer (which momentarily doesn't work).  Changed
	  configure.in, s.t. --with-qt-html-widget=false by default.

2005-07-06 00:07  jackjansen

	* - Added a call to PyEval_InitThreads in the module init function
	  - Acquire the GIL also in the C++ wrapper constructor.

	  These fix the crash in the callback, things seem to be starting
	  to work!

2005-07-05 23:00  jackjansen

	* Got the callback mechanism working, somewhat: after 6 callbacks
	  Python crashes.

2005-07-04 17:27  jackjansen

	* Global_playable_factory has changed.

2005-07-04 17:24  jackjansen

	* Added a few more dummy methods.

2005-07-04 17:17  jackjansen

	* We need to match type of objects to be passed to C++ exactly,
	  otherwise we will not get any extended behaviour added in
	  (Python) subclasses of the C++ class.

	  Therefore, started on creation of C++->Python wrapper objects on
	  demand, i.e. when a Python object is passed to C++.

	  This revealed a couple of problems with not all vritual methods
	  of the (C++) baseclass being suitably overridden, due to (a)
	  "const" parameter problems and (b) methods not being
	  representable in Python.

	  Solved first case by getting "const" right. Started on solving
	  the second by allowing the insterion of dummy methods into the
	  wrapped class definition.

2005-07-04 16:13  keesblom

	* Merget the new qt_html_widget code into the trunk.

2005-07-04 14:21  jackjansen

	* - Refined REs to allow type/rest of declaration to be on separate
	  lines.  - Added more testing.

2005-07-04 00:10  jackjansen

	* Turned global_playable_factory into an abstract class with
	  corresponding implementation global_playable_factory_impl and a
	  factory function get_global_playable_factory.

	  Also a few other minor interface changes to accomodate the Python
	  bridge.

2005-07-04 00:06  jackjansen

	* - Added support for exporting non-default constructors to Python.
	  A   similar idea may be useable to export methods that only
	  differ in signature	(with the same name) to Python using
	  multimethods, I hope! - Added none_window_factory to the exported
	  classes.  - The test script created the first document, yeah!

2005-07-01 23:02  jackjansen

	* Hit the first snag: constructors aren't supported.

2005-07-01 22:26  jackjansen

	* - Use getargsPreCheck to only declare std::string handler helper
	  variables   when needed.  - Added serious hack that allows
	  returning references from C++->Python   bridge methods: we
	  allocate variables for the references in the class   declaration.
	  It is ugly code that generates it, and it creates warnings   for
	  const methods, but it works.	- Started on a test suite based on
	  unittest. Initially I'll concentrate	 on testing the bridge,
	  later we may be able to use this to test all	 of ambulant.

2005-07-01 22:06  jackjansen

	* Got rid of "pyapi" again.

2005-06-30 17:01  jackjansen

	* - Combine declaration and assignment of return value temporary,
	  thereby allowing const return values.  - Handle std::string and
	  friends inline.  - Started on code to handle structs that can be
	  passed as tuples on the Python side.

2005-06-30 00:12  jackjansen

	* - Found a way to get rid of ugly "pyapi" keyword: by using
	  different   patterns depending on being inside a class
	  declaration or not.  - This necessitated being aware of
	  visibility of methods (public/private/   protected) and
	  generating interfaces only for public methods.

2005-06-29 17:17  jackjansen

	* First test of the pyapi "keyword", which signals that a method
	  should be exported to Python.

2005-06-29 17:16  jackjansen

	* Sigh. The only way I can think of finding the non-virtual methods
	  that we want to export to Python is by adding a "keyword". I've
	  picked "pyapi".

2005-06-29 16:48  jackjansen

	* - better scope handling in the parser - got read_data_from_url()
	  wrapped.

2005-06-29 16:18  jackjansen

	* Skip non-virtual methods in the C++ to Python bridge, and skip
	  objects if they have no virtual methods at all. Also, in the
	  Python->C++ bridge,  cater for the C++ to Python object not being
	  generated.

2005-06-29 14:23  jackjansen

	* Another milestone: some of the calls actually work
	  (get_version(), creating timer objects and getting the time from
	  them).

2005-06-29 14:18  jackjansen

	* More changes wrt. changing interfaces to be more abstract.

2005-06-29 13:59  jackjansen

	* - Use rect in preference to basic_rect<int>.	- Use
	  abstract_timer in stead of timer whenever possible.

2005-06-29 12:33  jackjansen

	* Use abstract_timer in stead of timer in event_processor API.

2005-06-29 00:09  jackjansen

	* Added AMBULANTAPI to various external definitions.

2005-06-29 00:06  jackjansen

	* Various methods were skipped. Fixed, but now it doesn't compile
	  anymore due to duplicate names.

2005-06-28 17:21  jackjansen

	* Another milestone: everything compiles, links and loads into
	  Python.

2005-06-24 15:15  koelimoe

	* improvements to the clip_end clip_begin code.

2005-06-24 01:20  jackjansen

	* Cookies shouldn't be constant.

2005-06-24 00:38  jackjansen

	* Return cookies by value, not by reference. Simplifies Python
	  interface and does no harm.

2005-06-24 00:29  jackjansen

	* - system turned out to be a bad name for a class, it's a
	  namespace in the   standard C++ library, it seems. Renamed to
	  system_embedder.

2005-06-24 00:28  jackjansen

	* - The C++ classes encapsulating Python objects now declare the
	  corresponding   xxx_New() functions to be friends, and those
	  functions thereby forestall	double-wrapping of Python objects
	  passed through C++.  - system turned out to be a bad name for a
	  class, it's a namespace in the   standard C++ library, it seems.
	  Renamed to system_embedder.

2005-06-23 09:34  koelimoe

	* improvements to the clip_begin and clip_end infrastucture.  the
	  video_renderer takes care of skipping video if the datasource is
	  unable to do so. For audio the decoder takes care of this, later
	  the audio renderers wil have to do skipping of data.

2005-06-22 22:38  jackjansen

	* Adapted for changes in bgen wrt. type support and a few other
	  tweaks.

2005-06-22 21:46  jackjansen

	* Reorganized a bit.

2005-06-22 00:20  jackjansen

	* It is generating some code. Far from correct, though.

2005-06-21 23:26  jackjansen

	* Split callback module in a .cpp and .h file.

2005-06-21 22:55  jackjansen

	* A few more steps.

2005-06-17 14:59  marisademeglio

	* Added debug info gathering option to project settings

2005-06-17 14:18  marisademeglio

	* Linked to MFC Multithreaded Debug DLL

2005-06-17 12:47  jackjansen

	* Added targets for DebugShlib.

2005-06-17 12:46  jackjansen

	* Fixed bug in unicode-ifying.

2005-06-16 23:28  jackjansen

	* Fair amount of new code for creating the callback wrapper
	  objects. The classes are created, along with empty methods.

2005-06-16 15:21  jackjansen

	* Switched to unicode (from MBCS).

2005-06-16 13:08  jackjansen

	* Merging exp-jack-virtual-nodes branch: - When building with
	  WITH_EXTERNAL_DOM the node class becomes virtual,   with the old
	  implementation class named node_impl. This virtual class   allows
	  use of external DOM implementations (at a small iperformance
	  cost for the native DOM case).  - Started on a Python interface
	  to Ambulant.

2005-06-13 16:42  koelimoe

	* added clip_end to ffmpeg_datasource

2005-06-09 13:22  koelimoe

	* fixed the rtsp video. (but there are still some ffmpeg error
	  msgs)

2005-06-07 16:58  koelimoe

	* changed the rtsp_demuxer so it puts all data for one frame
	  together

2005-06-07 13:56  koelimoe

	* fixed ffmpeg-0.4.9 video. (altough it seems that there is still a
	  problem with timestamps)

2005-06-06 15:16  koelimoe

	* added the ifdef AMBULANT_PLATFORM_MACOS around MAYBE_CONST defien
	  because it's only for mac

2005-06-06 15:10  koelimoe

	* moved ffmpeg_init() from the .h file to the .cpp file

2005-06-02 16:25  koelimoe

	* 1) SDL renderer now also looks for clip-begin and clip-end 2)
	  fixed a bug in clip_end

2005-06-01 23:49  jackjansen

	* Initial gcc4 fixes.

2005-06-01 22:50  koelimoe

	* 1) added clip_begin clip_end to the constructors of
	  audio_datasources.  2) fixed the multiple thread->start() calls

2005-05-31 13:22  koelimoe

	*  removed /*AM_DBG*/

2005-05-31 13:06  koelimoe

	* working clip end. (tested for audio)

2005-05-30 16:27  jackjansen

	* Upped version number to 1.5.

2005-05-30 14:57  jackjansen

	* Merging changes from release-ambulant-140 branch, up to
	  release-ambulant-141-tag.

2005-05-30 13:15  koelimoe

	* clip_end implementation. (untested)

2005-05-23 16:15  koelimoe

	* updated version numbers

2005-05-23 16:14  koelimoe

	* added some assertion

2005-05-12 15:48  koelimoe

	* added asserts and a read_ahead method for the video_demuxer

2005-05-11 15:58  koelimoe

	* added read_ahead methods to the audio and video datasources. the
	  demuxers start to read data on a start(_frame) or read_ahead call

2005-05-10 13:23  keesblom

	* Missing return caused core dump because return value was
	  undefined.

2005-05-09 16:54  koelimoe

	* added a simple seek for rtsp.

2005-05-09 12:09  keesblom

	* Calling pthread_cond_timedwait() with NULL pointer for the
	  abstime parameter caused core dump, use pthread_cond_wait in that
	  case Improved debug messages in qt_fill.cpp

2005-05-04 16:52  koelimoe

	* updated the cvs2cl options

2005-05-02 17:40  keesblom

	* Modification for Fedora Core 3 (gcc 3.4.3)

2005-04-29 13:37  jackjansen

	* Final tweaks.

2005-04-29 13:36  jackjansen

	* Upped version number.

2005-04-29 13:36  jackjansen

	* Updated.

2005-04-29 12:59  jackjansen

	* Updating version to 1.4.

2005-04-29 12:58  jackjansen

	* Disabled ffpmeg video playback (for the time being that is only
	  for debugging purposes on the Mac).

2005-04-28 17:02  keesblom

	* Added some #ifdef USE_SMIL21 to make it compile for Zaurus

2005-04-28 13:00  koelimoe

	* made the audio decoder ask for the  bits (8 or 16) at the demuxer

2005-04-28 12:53  koelimoe

	*  little fix

2005-04-28 12:52  koelimoe

	* added a remark for compiling	ffmpeg-0.4.8 and FC 3

2005-04-28 12:51  koelimoe

	* fixed rtsp timestamps

2005-04-28 12:38  jackjansen

	* It's CR, not RC.

2005-04-27 17:39  keesblom

	* Rewrote ffmpeg_video_decoder_datasource::get_frame() to use the
	  new _pop_top_frame internal function (which remembers the old top
	  frame in m_old_frame, and frees the data of previous old frame).

2005-04-27 15:42  keesblom

	* Cleanup added for video (45 MB for 10 seconds video was wasted).

2005-04-27 13:31  jackjansen

	* Added a section on SMIL 2.1 (to augment the one-liner that was
	  there already).  Documented the fact that soundAlign and
	  backgroundRepeat are not implemented on WinCE.

2005-04-27 13:23  jackjansen

	* Icon updated to 1.4.

2005-04-27 13:20  jackjansen

	* Some of the transparant bits were wrong.

2005-04-27 12:57  jackjansen

	* Added msvcr71.dll

2005-04-27 12:53  jackjansen

	* Added mobile and extended mobile profiles.

2005-04-27 12:47  jackjansen

	* Also updated the wince icons and the windows small icon.

2005-04-27 11:53  jackjansen

	* Got set-animation of soundAlign to work.

2005-04-27 10:52  jackjansen

	* Added two notes on things to check before distributing

2005-04-27 10:49  jackjansen

	* Enabled SMIL 2.1 support for Wince.

2005-04-27 00:10  jackjansen

	* Unencumbered by an actual clue of what I'm doing I'm adding more
	  bits and pieces for souldAlign animation.

2005-04-26 17:05  keesblom

	* Reorganized m_frames to have a dedicated data type and a proper
	  compare functios.

2005-04-26 16:10  jackjansen

	* Missed ifdef USE_SMIL21

2005-04-26 16:07  jackjansen

	* Implemented audioFade.

2005-04-26 14:42  jackjansen

	* SMIL soundLevel is linear, not logarithmic.

2005-04-25 17:37  jackjansen

	* XMLstrings must apparently (on Windows, at least, under some
	  circumstances) be freed with XMLString::Release, not with delete.

2005-04-25 16:00  jackjansen

	* 1.4 icons. Not pretty.

2005-04-25 15:29  jackjansen

	* When opening a document make sure we have an absolute pathname.
	  Partial fix for #1185955.

2005-04-25 14:12  jackjansen

	* - Fix for #1186570: soundAlign and soundLevel on a region were
	  not honoured.  - A few more bits and pieces for soundAlign
	  animation.

2005-04-25 12:58  jackjansen

	* Don't attempt to load background images if there is no layout
	  section.

2005-04-22 16:40  jackjansen

	* Unfinished (and disabled) code for animating soundAlign.

2005-04-22 16:39  jackjansen

	* Fixed logic error that caused mediaAlign to override regPoint and
	  regAlign but only on nodes, not on regions.

	  Fixes #1186546.

2005-04-22 16:37  jackjansen

	* Contents of this (generated) file accidentally got lost.

2005-04-22 15:28  jackjansen

	* Got fullscreen transitions to work on windows.

2005-04-22 15:27  jackjansen

	* Fixed boundary condition error in clockwipe: with progress=1.0 it
	  produced the same output as with progress=0.0.

2005-04-22 14:11  jackjansen

	* Oops, the previous correction was wrong. Another attempt at not
	  freeing playables twice.

2005-04-22 14:02  keesblom

	* Coerrected the video timing

2005-04-22 11:00  keesblom

	* Bug #1185268 (HappyBirthday 4 images are delayed) seems solved.
	  Video processing took 100% CPU and add all events in front of
	  queue.  Adding a small delay in start_frame (callaing add_event)
	  seems the cure.

2005-04-21 16:47  jackjansen

	* Different approach at fullscreen transitions: handle them more
	  like normal transitions. Unfinished.

2005-04-21 16:46  jackjansen

	* When destroying a playable first remove it from our
	  administration, so we don't run the chance of attempting to
	  destroy it twice.

2005-04-19 16:51  jackjansen

	* Started on fullscreen transitions. The net effect so far is that
	  fullscreen transitions are completely ignored.

2005-04-19 14:21  jackjansen

	* Added DTDs.

2005-04-19 14:03  jackjansen

	* Got out-transitions to work for overlapping images.

2005-04-18 16:53  keesblom

	* Turned off spurious debugging, but the problems with
	  HappyBirthday remains.

2005-04-18 16:10  keesblom

	* Added some locking in ffmpeg::demux to get rid of segfault

2005-04-18 16:08  keesblom

	* 1- removed dumpPixmap for Zaurus 2- Attempt to get rid of
	  segfault by adding some locking, maybe too much    because in
	  HappyBirthday the in-transition of the four images after    the
	  initial song is delayed until the first video has finished (on
	  Linux)

2005-04-18 15:16  jackjansen

	* Temporary stopgap to make this compile on WinCE: basically
	  disabled local file caching. The 8-bit to 16-bit char conversions
	  is a bit too much work right now, and we're not using xerces on
	  wince anyway.

2005-04-18 14:59  jackjansen

	* Fixed get_local_datafile for windows to actually work:-)

2005-04-18 13:41  jackjansen

	* Implemented get_local_datafile for windows.

2005-04-18 12:52  jackjansen

	* Fixes to get things to compile again for WinCE.

2005-04-17 01:45  jackjansen

	* Minor additions.

2005-04-17 01:19  jackjansen

	* Added a note that our special exceptions to the GPL apply to our
	  code only, not to the packages Ambulant may be linked against.

2005-04-17 00:23  jackjansen

	* Rewrapped so it is readable at an 80 column screen.

2005-04-16 23:36  jackjansen

	* Added a note that for the mac binary distribution you want to
	  build with xerces support in a plugin (make install fixes up the
	  plugin for the xerces library location but not the main
	  executable).

2005-04-15 14:52  jackjansen

	* Implemented better memory management in databuffer, thereby
	  getting rid of quite a few memcpy calls. get_read_ptr/readdone
	  and get_write_ptr/pushdata must now be paired.

	  Also, size() checks that it is not called between
	  get_read_ptr/readdone, but I'm not 100% sure yet that that is the
	  correct thing to do.

2005-04-15 14:45  keesblom

	* 1- updated ChangeLog & README-Distribution for the 1.4 release 2-
	  removed bug in datafile caching 3- changed URL for SMIL 2.1 to
	  current value in official W3C doc

2005-04-15 10:42  jackjansen

	* - Got rid of debug code (picture dumping).  - Removed a line that
	  caused a resampler to be created whether it	was needed or not.

2005-04-14 17:19  koelimoe

	* fixed the shaky video with a simple hack & added a factory
	  function for rtsp video

2005-04-14 16:46  jackjansen

	* Got cached DTDs to work on OSX.  Slightly changed the API for
	  finding the cached documents.  Fixed the installation of the
	  DTDs.

2005-04-14 16:03  keesblom

	* Updated for release 1.4

2005-04-14 15:35  keesblom

	* Reset  AMBULANT_VERSION back to 1.3, because its supposed to be
	  the last thing to do before actually creating the distribution

2005-04-14 15:17  keesblom

	* Updated AMBULANT_VERSION to 1.4

2005-04-14 14:50  jackjansen

	* Merging exp-jack-bgimage branch:

	  SMIL 2.1 backgroundImage and backgroundRepeat implemented on
	  Windows and MacOSX. On Linux things have been disabled, there are
	  still some problems to be solved.

2005-04-14 14:45  koelimoe

	* iadded the rtsp stream adressen

2005-04-14 14:35  koelimoe

	* Usage instructions for testing ambulant with rtsp support build
	  in

2005-04-14 14:34  koelimoe

	* added instructions to use live (rtsp streaming library) with
	  AmbulantPlayer

2005-04-14 14:14  keesblom

	* Optimized local datafile caching by using std::map::find(url) to
	  get the absolute path to a local datafile for a given url.

2005-04-13 13:56  koelimoe

	* addapted the configure/makefile setup for the live.com media
	  libraries. (rtsp support)

2005-04-12 14:18  koelimoe

	* fixed the sound for video. (added code so a decoder_datasource is
	  used for the audio)

2005-04-11 17:41  keesblom

	* Implemented DTD caching for Linux. Added SMIl 2.0 and SMIL 2.1
	  DTD files.  A file "ampping.txt" defines how the requested URLs
	  are to be mapped to local files. Only meaningfull when using
	  xerces parser.

2005-04-05 14:08  koelimoe

	* merged the rtsp brange

2005-04-04 16:15  jackjansen

	* More bits and pieces for background images.

2005-04-04 16:13  jackjansen

	* Added a new sytnchronization primitive: condition.

	  Currently only implemented on Unix/MacOS.

2005-04-04 11:47  jackjansen

	* Merging exp_jack_erasenever branch: - erase=never works on
	  Linux/Mac - Started on background images.

2005-03-31 14:02  keesblom

	* Repaired the empty <body> & empty <seq> bug.	Removed some
	  debugging cruft from qt_transition.cpp

2005-03-23 13:32  keesblom

	* Joined the audioFade branch with the trunk.

2005-03-21 15:45  jackjansen

	* std::string::c_str result is only valid for as long as the
	  std::string exists. Cater for that.

2005-03-21 15:34  jackjansen

	* Apparently region_info can be NULL (?), insulate against that.

2005-03-16 14:41  jackjansen

	* Added missing USE_SMIL21 ifdefs.

2005-03-08 11:58  keesblom

	* Some cleanup and a few minor memory leaks

2005-03-08 11:56  jackjansen

	* Fixed a bug that (somehow?) caused fill=transition not to end.

2005-03-07 16:28  jackjansen

	* Fix for #1158271: terrible hiss when playing back some audio
	  (notably birthday).

2005-03-07 15:20  jackjansen

	* Fullscreen transitions are working, at the cost of taking screen
	  snapshots at every redraw.

2005-03-07 13:52  jackjansen

	* Added _getOnScreenImage helper method.

2005-03-04 13:21  jackjansen

	* Fullscreen transitions start to do the right thing. Only,
	  unfortunately, to the background in stead of to the "old bits".

2005-03-03 16:25  jackjansen

	* Fullscreen transition information/steps are now communicated to
	  the toplevel AmbulantView.

2005-03-03 15:35  jackjansen

	* Something happens to all the toplevel window bits during a full
	  screen transition. It is far from correct, but at least it is
	  something:-)

2005-03-03 13:08  jackjansen

	* Implemented the platform-independent part of
	  fullScreenTransitions.  Unfortunately this is the easy part:-)

2005-03-02 15:30  keesblom

	* Reset event priorities to the original scheme: high - scheduler
	  related events med  - continuous media events low  - all other
	  events This scheme needs refinement, e.g. static media should be
	  renderered before continuous media when scheduled simulateously,
	  but once e.g. audio has really started, it should have fairly
	  high priority, to avoid hick-ups, but lower priority than user
	  events, so that the user has ultimate control.

2005-03-02 14:43  jackjansen

	* Fixed a couple of potential race conditions helgrind found.

2005-03-02 13:48  jackjansen

	* Got Cocoa video transition to work (when using the
	  datasource-based renderer, not the QuickTime renderer).

2005-03-01 17:54  keesblom

	* Merged with trunk: transition reorganization

2005-02-28 14:23  jackjansen

	* Fixed most glaring errors in datasource-based video renderer. The
	  colors are still of, though, because video-datasource returns
	  them as BGRA in stead of RGBA.

2005-02-25 16:35  jackjansen

	* Moved a lot more generic code into renderer_playable.  Made
	  cocoa_fill_renderer a subclass of cocoa_renderer.  This has made
	  cocoa_fill_renderer pretty small, and lots of methods in other
	  renderers have gone too.

2005-02-25 14:57  jackjansen

	* Factored cocoa_renderer so it now has a class that does the work,
	  cocoa_transition_renderer, and a glue template class.

2005-02-24 17:55  keesblom

	* Added Reload and "Load settings". Dumps core on Zaurus.

2005-02-22 17:33  keesblom

	* More AM_DBG turned off, NLS turned on again

2005-02-22 16:40  keesblom

	* Turned off AM_DBG and image dumps

2005-02-22 16:11  keesblom

	* in/out tranistions now work combined with smil animation fixed
	  the size of video

2005-02-21 14:28  jackjansen

	* Commented out unused transition support.

2005-02-21 14:26  jackjansen

	* Silly mistake in renderer implementations: transition_info's are
	  not owned by the renderer (they're global objects), so don't
	  delete them on cleanup.

2005-02-21 13:44  jackjansen

	* Fixed fill=transition behaviour.

2005-02-17 16:20  keesblom

	* Repaired a bug that caused a strange transition in Flashlight-CE
	  The region of the image drawn was to big

2005-02-17 11:37  keesblom

	* Made simultaneous in/out transitions work.

2005-02-16 17:26  jackjansen

	* iFixed three bugs in polygon and polylist transitions: -
	  Coordinates weren't converted to screenspace (from region-space)
	  - The origin on the "new" image was not used - The "old" image
	  was bitblitted too, which is unnecessary

2005-02-16 17:13  jackjansen

	* Polygon transitions weren't translated correctly to screen
	  coordinates.

2005-02-16 16:38  jackjansen

	* Fix for #1079403: fill=transition elements are never removed.
	  Unfortunately the fix means an incompatible change to the
	  interface for surface: it is not allowable to call
	  transition_done() while inside redraw(). Linux and Windows need
	  fixes for this, or they will hang on a mutex on transition end.

2005-02-16 09:57  koelimoe

	* added some methods

2005-02-15 12:43  koelimoe

	* design for the demux datasoures

2005-02-14 13:34  keesblom

	* Quick bug repair: default text didn't show if font or size was
	  not set

2005-02-11 15:28  keesblom

	* Merging branch containing  out transitions for qt with trunk

2005-02-09 16:58  jackjansen

	* Upped version number to 1.3.

2005-02-09 16:49  jackjansen

	* Upped version number to 1.3.

2005-02-09 16:48  jackjansen

	* Implemented volume and balance.

2005-02-08 15:57  jackjansen

	* Added missing file.

2005-02-08 15:55  jackjansen

	* The added "const" to the transition_info caused quite a bit of
	  havoc on windows...

2005-02-08 15:05  jackjansen

	* Added explicit transition methods.

2005-02-08 14:48  jackjansen

	* Fixed broken transitions (due to a change in a method signature).
	  Also made sure this "cannot happen" again, by getting rid of the
	  default do-nothing implementation. The drawback is that any
	  renderer not implementing transitions will have to provide its
	  own do-nothing methods.

2005-02-08 14:16  jackjansen

	* More compiler nits fixed.

2005-02-07 17:19  jackjansen

	* Make a difference between default audio placement and mid
	  placement.

2005-02-07 17:17  jackjansen

	* Fixed some compiler pickyness and other bugs in the new code.

2005-02-07 17:11  jackjansen

	* Added option --enable-smil21 (default: enabled) which governs
	  support for SMIL 2.1.

2005-02-07 16:35  jackjansen

	* Implemented soundAlign. Works for Mac (and probably Linux) except
	  for inheriting soundAlign from your region.

2005-02-07 15:39  jackjansen

	* Implemented SMIL 2.0 soundLevel attribute, which hadn't been done
	  yet. Platform independent code and SDL renderer done.

2005-02-07 00:03  jackjansen

	* Implemented meetBest. Untested.

2005-02-06 23:30  jackjansen

	* - Getting default regPoint/regAlign values from the region was
	  not implemented.    Fixed.  - Implemented SMIL 2.1 mediaAlign
	  attribute, overriding regPoint/regAlign.

2005-02-04 16:36  jackjansen

	* SMIL 2.1 paramGroup is starting to work, but not complete yet.

2005-02-04 15:52  jackjansen

	* Implemented <params> for qt text rendering.

2005-02-04 14:26  jackjansen

	* Added params implementation, but not used yet for wince (due to
	  code complexity).

2005-02-04 14:20  jackjansen

	* Implemented <param> for text objects on Windows.

2005-02-03 15:50  jackjansen

	* Changed <param> names to css-compatible.

2005-02-03 15:07  keesblom

	* Merged with branch: dur,startProgress and endProgress now work
	  for in-transitions.

2005-02-01 16:41  jackjansen

	* Fixed various issues with recent changes when building on
	  Windows.

2005-02-01 16:18  jackjansen

	* Re-enabled the url- and file-based parsers: the Windows player
	  uses them.  And it cannot be converted to do without them easily:
	  there are not enough datasource implementations for windows yet.

2005-02-01 15:55  jackjansen

	* Added fontName and fontSize parameters (in addition to
	  fontColor).

2005-02-01 15:54  jackjansen

	* Adapted for new parser driver signature.

2005-01-27 13:51  keesblom

	* Various refinements in parser error handling: - Made changes in
	  log_level settings take immediate effect - Added filename in
	  parser error messages - More uniform treatment of error messages
	  from expat and xerces - Disabled some functions that do not work
	  properly (e.g. build_tree_from_url)

2005-01-26 16:44  jackjansen

	* Added (minimal) support for SMIL 2.0 <param>. Only one parameter
	  (fontColor) is implemented, and only on one platform (Mac). A few
	  more will follow later.

2005-01-17 18:26  keesblom

	* Merged the branch containing the new event processor with the
	  main trunk

2005-01-13 16:39  jackjansen

	* Priorities to add_event are no longer optional.

2005-01-13 16:10  jackjansen

	* Not sure... May be last-minute fixes for the 1.2 distribution...

2005-01-13 16:09  jackjansen

	* The priority argument to add_event is no longer optional.

2005-01-13 15:18  keesblom

	* Event priorities revisited (Part I). Strategies: 1. No default
	  priorities (was: low). They need to be carefully designed.  2.
	  For now:	  - User (mouse) & System (update) events: high   -
	  renderer (audio, video) events: med	- all others: low 3. More
	  elaborated strategies likely to come.

2005-01-13 15:07  jackjansen

	* ome codecs (pcm, notably) will convert any amount of audio you
	  pass in and don't check AVCODEC_MAX_AUDIO_FRAME_SIZE. Cater for
	  this by never passing in more than AVCODEC_MAX_AUDIO_FRAME_SIZE/2
	  bytes. It's a heuristic, but let's hope it'll work.

2005-01-12 14:13  koelimoe

	* small fixes for ffmpeg 0.4.9

2004-12-24 17:15  keesblom

	* Turned off AM_DBG

2004-12-23 16:45  keesblom

	* Last Zaurus related changes for the 1.2 release.

2004-12-23 12:43  jackjansen

	* Two more version strings

2004-12-23 12:42  jackjansen

	* Use strip -x, not strip -X.

2004-12-21 11:57  koelimoe

	* mall modification to make it more clear what to do to build the
	  win32 player with or without xerces

2004-12-20 17:30  keesblom

	* Added more complete information for installing Ambulant on
	  Zaurus.

2004-12-20 16:56  jackjansen

	* Don't use ".tgz" for the source distribution, winzip doesn't like
	  it.

2004-12-20 14:09  jackjansen

	* More files that have version information.

2004-12-20 13:35  keesblom

	* For <brush> get the color from the attribute (bg_display_color is
	  undefined).

2004-12-20 13:11  jackjansen

	* Fixed some typos and reflowed.

2004-12-20 12:49  jackjansen

	* Added missing files and updated.

2004-12-20 12:17  keesblom

	* Restored old version of open_web_browser() to close Bug#1087096

2004-12-20 10:52  koelimoe

	* added a remark about xerces

2004-12-17 17:10  jackjansen

	* <a actuate="onLoad"/> anchors should appear in the timegraph, but
	  only those. Added a workaround to make this happen.

2004-12-17 15:30  jackjansen

	* Squashing debug output.

2004-12-17 15:30  jackjansen

	* More detailed information on where version numbers are to be
	  found.

2004-12-17 15:21  jackjansen

	* One more string.

2004-12-15 10:43  koelimoe

	* added some possible advertising options

2004-12-14 16:47  koelimoe

	* small corrections

2004-12-14 10:44  koelimoe

	* added more story about uploading new releases.

2004-12-13 17:07  jackjansen

	* Put the output in the bin/wince directory.

2004-12-13 17:04  jackjansen

	* Copy jpeg DLL too.

2004-12-13 16:50  koelimoe

	* started adding stuff to the upload section

2004-12-13 16:30  keesblom

	* Corrected an error in setting up clipping region for polylist

2004-12-13 15:48  koelimoe

	* set version number to 1.2

2004-12-13 14:54  jackjansen

	* Upped version number

2004-12-13 14:45  jackjansen

	* The code to get an event to the main event loop was broken, and
	  therefore inter-document links didn't work.

	  Fixed.

2004-12-13 14:43  jackjansen

	* Upped version number

2004-12-13 13:15  koelimoe

	* removed a typo i made from the configure.in

2004-12-13 13:04  koelimoe

	*  fixed bug 1082170. dummy plugin be optional

2004-12-13 13:00  koelimoe

	* this time for realy, added a forgtten ;

2004-12-13 12:59  koelimoe

	* added a forgotten ;

2004-12-10 10:22  jackjansen

	* For zlib and libpng build the DLL versions of the library, as
	  this is what the copy script and the Ambulant projects expect to
	  use.

2004-12-09 23:29  jackjansen

	* "a" style anchors were pretty much ignored. Make them behave more
	  or less like "area" anchors. I'm not 100% sure this is a good
	  idea, I seem to remember there was special-case code for "a"
	  anchors. But then I would have expected them to be caught by the
	  scheduler (in stead of being passed to playable_factory).

2004-12-09 22:56  jackjansen

	* Set default for loglevel to SHOW.

2004-12-09 22:55  jackjansen

	* If the user preference for parser is "any" we use the default
	  parser.  Usually this is the (fast) expat parser, but it has the
	  advantage of keeping the default default at "any", which will
	  also work if the player was configured with only xerces.

2004-12-09 22:53  jackjansen

	* Automatically show the log window at startup if and only if log
	  level has been set to debug.

2004-12-09 17:10  jackjansen

	* Notes on how to build the various installers.

2004-12-09 16:33  jackjansen

	* More notes (on uploading, website and advertising). Unfinished.

2004-12-09 16:14  jackjansen

	* Added a note about testing defaults.

2004-12-09 16:12  jackjansen

	* - Added a note about localisation checking - Added a note about
	  version number checking

2004-12-09 15:53  jackjansen

	* Unified Daniel and Jack's instructions for xerces.

2004-12-09 15:02  jackjansen

	* Lots of fixes/additions to readme files.

2004-12-09 14:28  koelimoe

	* updated the third_party_packages readme.txt

2004-12-09 13:24  keesblom

	* During waterfallWipe transition, the picture was accidently
	  translated twice.

2004-12-08 17:19  jackjansen

	* Gross hack to copy libxerces into the .app bundle.

2004-12-08 16:58  jackjansen

	* Started on the "What's new" section.

2004-12-08 16:04  keesblom

	* Attempt to generate one error message in a pop-up message box for
	  the end user, at the highest (but dumbest) level; detail
	  information is in the trace now.

2004-12-08 15:48  jackjansen

	* Microsoft makes lots of crappy software, but the HTML Help
	  Workshop stands out even in that company.

	  I finally got something resembling a working helpfile by copying
	  the html pages into the dir where the HHC file is, and changing
	  the names to local ones. Still, I can't get rid of the empty
	  index (nor fill it with anything).

2004-12-08 14:28  jackjansen

	* Removed debug.

2004-12-08 14:24  keesblom

	* Typo found and corrected by Jack on my desktop

2004-12-08 14:02  jackjansen

	* The scheduler can set the clock back under some circumstances,
	  causing the video renderer to stop rendering. Fixed by having the
	  video renderer allocate a new, private, clock.

2004-12-08 13:58  jackjansen

	* Don't hide active_video_renderer methods.

2004-12-08 13:56  jackjansen

	* INCLTDL and LIBLTDL aren't automatically substituted, so use
	  AC_SUBST().

2004-12-07 23:16  keesblom

	* Replaced the ugly mechanism to wait for a GUI message until OK'd
	  by the user by a pthread condition variable based implementation

2004-12-07 16:20  keesblom

	* Added line number to xerces error message. The format is now
	  e.g.: Parse error line 49: Unknown element 'tex' The upper layers
	  (gui, document handler) still produce their own error messages
	  when no input file is available, I think they should disappear,
	  but only if their is a guarantee that the parsers always deliver
	  proper error messages on parse errors (no error message is worse
	  than too many error messages).

2004-12-06 17:22  keesblom

	* Added a mechnism to avoid error messages getting stacked on top
	  of each other.

	  It works by calling m_lock->enter() before just before sending
	  the message to the gui thread, and calling m_lock->leave() in the
	  gui thread after the message has been displayed. Meanwhile the
	  calling thread again calls m_lock->enter() to block himself; this
	  lock is immediately released as soon as he gets it.  This
	  mechanism is not used by the gui thread, so messages from this
	  thread are still stacked.

	  This mechanism has to be replaced by an implementation based on
	  conditional variables.

2004-12-06 17:12  jackjansen

	* Don't get duration of audio (which may not exist) for video
	  datasource.

2004-12-06 15:26  jackjansen

	* Added LT_AC_PROG_SED to forestall error.

2004-12-06 14:41  jackjansen

	* That fix wasn't good enough: we also need to refrain from calling
	  scheduler::exec iteratively. This may have adverse consequences
	  in other places, though...

2004-12-06 14:39  jackjansen

	* Re-enabled the NSAutoReleasePool in the logger output routine.
	  This makes a lot of messages about leaking objects disappear.

2004-12-06 14:22  jackjansen

	* Removed debug output.

2004-12-06 14:09  jackjansen

	* The scheduler could hog the CPU while waiting for continuous
	  media that finished later than expected. Temporarily fixed by
	  never letting the scheduler wait for events in the past. A real
	  fix would probably be to have a better look at the priorities.

2004-12-03 23:43  keesblom

	* Added a test m_player != NULL to prevent SEGV that occurred when
	  quitting after a garbage URL was typed

2004-12-03 16:42  keesblom

	* Resolved Bug #1037781 by printing an error message on stderr when
	  the argument file cannot be opened, then the player terminates
	  with exit code -1.  This indicates the calling environment (e.g.
	  a test script) something went wrong.

2004-12-03 16:22  koelimoe

	* merging the experimental_jack_get_dur branch

2004-12-02 19:06  koelimoe

	* removed some plugin leftover that wasn't suppose to be there

2004-12-02 16:09  jackjansen

	* Cleaned up some debug and error output.

2004-12-02 14:24  jackjansen

	* Got cocoa_audio playable back into working order. Unfortunately
	  it doesn't help with the navigation problems: same behaviour as
	  theSDL and Arts playables.

2004-12-02 14:23  jackjansen

	* Removed/fixed debug output.

2004-12-02 14:18  koelimoe

	* removed the qsound stuff

2004-12-02 14:16  koelimoe

	* removed the qsound stuff from the make file

2004-12-02 14:14  koelimoe

	* fixed a debug msg

2004-12-02 13:58  koelimoe

	* removed the directory plugin, since it was obsolete

2004-12-02 13:44  koelimoe

	* fixed bug, 1065223 Unix: preferences dialog incorrect

2004-12-02 12:50  jackjansen

	* Workaround for a bug in the OSX compiler (optimizer? linker?)
	  that caused plugins to crash.

2004-11-30 17:11  jackjansen

	* Started work on getting make dist/make distcheck to work.

2004-11-30 14:22  koelimoe

	* turned the logger window back on

2004-11-30 14:06  koelimoe

	* 1)  fixed memory leak in qt_video_renderer 2) fixed bug 1075194

2004-11-30 14:02  koelimoe

	* the old and correct gcc.h

2004-11-29 15:10  koelimoe

	* gcc 3.4 should be able to compile the player now

2004-11-29 13:37  koelimoe

	* xerces build in and xers plugin compile again.

2004-11-26 15:42  koelimoe

	*  bug fix for bug 1071585. it is a hack but it seems to work for
	  me

2004-11-26 13:08  keesblom

	* Made it work on the Zaurus. No xerces, no plugins.

2004-11-23 13:02  koelimoe

	* fixed a bug where the player crashes if m_src == NULL.  fixed a
	  bug in qt_video_player, qt_video_player lost the last picture it
	  showed so any redraw resulted in the disappearing of the image

2004-11-23 11:13  koelimoe

	*  Fixed bug 1054622 but it introduces some other issues that have
	  to be looked into (see bug 1071585)

2004-11-19 17:37  keesblom

	* Implemented linked documents. It doesn't work really as it should
	  do, but neither does the windows implementation, from which it
	  was copied.

2004-11-18 23:41  jackjansen

	* Fix (hack?) to make the preferences dialog show the correct
	  defaults when no previous settings have been made.

2004-11-18 15:19  keesblom

	* Added a test for QT_THREAD_SUPPORT to make posting QEvents
	  thread-safe

2004-11-18 14:13  keesblom

	* Forgot to remove call to QTextEdit->append(..), causing Async
	  reply errors

2004-11-18 11:52  jackjansen

	* - Added Help to the Help menu - Added helpfile to the installer -
	  Added desktop shortcut to the player (on Dicks request)

2004-11-17 17:50  keesblom

	* Added mechanism to send QCustomEvent's to the main event loop.
	  This is now used for show_message and logging in a window Async
	  reply errors from X are still observed, however, these are likely
	  related to video.

2004-11-17 16:52  jackjansen

	* A first stab at creating Windows help.

2004-11-17 16:08  koelimoe

	* [no log message]

2004-11-17 15:50  jackjansen

	* - Install the manpage - Install the documentation (into
	  $pkgdatadir) - Enable viewing the documentation from the player -
	  When looking for the welcome document also look in $pkgdatadir.

2004-11-17 15:05  jackjansen

	* Finished first draft of the help files.  Added help book to the
	  Mac player.

2004-11-17 13:09  koelimoe

	* sorry

2004-11-17 12:19  koelimoe

	* fixed null pointer bug

2004-11-17 12:15  koelimoe

	* fixed (i think :-) ) the uncoupled get_read_ptr/readdone bug. In
	  the process i fixed some errors that valgrind reported aswell.
	  Please report if one of the assertion i put in place to detect
	  this	fail. (It's still possible that the arts sound renderer
	  shows the same problem, so i'll check this)

2004-11-17 00:17  jackjansen

	* Starting on the Help file. Unfinished.

2004-11-15 17:16  keesblom

	* Merged with Jack's locality additions.

2004-11-15 15:07  jackjansen

	* Workaround (hack) to forestall spurious error message when using
	  the xerces parser: we allow factories to be NULL (and the plugins
	  cater for this), and early during startup we register plugins,
	  but only parser plugins.

2004-11-15 15:06  jackjansen

	* Make sure get_read_pointer()/readdone() and
	  get_write_pointer()/pushdata() calls are matched.

2004-11-15 13:24  jackjansen

	* More translations.

2004-11-15 11:51  jackjansen

	* Revamped UI to be more in line with Mac/Windows.

2004-11-15 11:50  jackjansen

	* Don't give an error if the default parser happens to be the one
	  the user asked for.

2004-11-15 11:00  koelimoe

	* removed a small bug where the player crashed if
	  databuffer.pushdata was called with 0 as argument.

2004-11-15 10:48  jackjansen

	* Fixed ifdef for l10n

2004-11-15 10:46  jackjansen

	* - Fixed ifdefs for gettext support - Allow localisations to live
	  in ~/.ambulant/locale - Got localization to work.

2004-11-12 16:13  jackjansen

	* Started on translating Unix gui.

2004-11-12 16:08  jackjansen

	* Tweak.

2004-11-12 16:04  koelimoe

	* made a warn a debug , i don't think it should popup

2004-11-12 15:59  koelimoe

	* This "fix" casued the player to lock , so i removed it again CVS
	  ----------------------------------------------------------------------

2004-11-12 15:55  jackjansen

	* Fixed typo.

2004-11-12 15:49  jackjansen

	* Started on internationalizing unix gui.

2004-11-12 15:15  jackjansen

	* Fixed wince player wrt. show_message.

2004-11-12 14:46  koelimoe

	* an ugly but temp. fix for the buffer being moved away while still
	  reading.

2004-11-12 14:45  jackjansen

	* This file was omitted in the initial checkin, but it's part of
	  the gettext infrastructure.

2004-11-12 14:33  jackjansen

	* - Use the parser_factory on windows too - Re-enabled building the
	  debug version

2004-11-12 13:47  keesblom

	* Fixed a line causing core-dump

2004-11-11 16:47  jackjansen

	* Fiddled many error messages.

2004-11-11 16:40  jackjansen

	* Added xerces and other dll's.

2004-11-11 16:34  jackjansen

	* Copy xerces libs, if they are available.

2004-11-11 16:29  keesblom

	* Changed show_message() and logger in a window to use ONE GUI
	  thread to get rid of X11 unexpected async reply errors

2004-11-11 16:17  koelimoe

	*
	  Minor changeS, celean up of some assertions

2004-11-11 16:08  koelimoe

	* failed attempt to fix the problem with the disappearing buffer

2004-11-11 16:02  koelimoe

	* fix m_src can be zero here

2004-11-11 11:00  jackjansen

	* Show relevant error/warning icon in dialogs.

2004-11-10 15:14  koelimoe

	* removed the system("printenv"); call that was still there

2004-11-10 15:12  koelimoe

	* added a lable to the plugin_dir preference menu

2004-11-10 15:11  koelimoe

	*  added a lable to the plugin_dir preference menu

2004-11-10 15:10  koelimoe

	*  the show_message missed an argument

2004-11-10 15:09  koelimoe

	* tweak

2004-11-10 15:09  koelimoe

	* itweak

2004-11-10 15:08  koelimoe

	* Changed warn to debug. These where very geeky msgs so i don't
	  think these should end up on the user screen anyway

2004-11-10 12:35  koelimoe

	* Added the xerces parser to the wndows player.  although the
	  windows player doesn't uses the factory construction for this .

2004-11-09 16:53  jackjansen

	* Fix difference between WITH_XERCES and WITH_XERCES_BUILTIN

2004-11-09 16:51  jackjansen

	* A few more logging statements to enable us to see what goes on.

2004-11-09 15:24  jackjansen

	* Distinction between WITH_XERCES and WITH_XERCES_BUILTIN made.

2004-11-09 14:48  jackjansen

	* Added level parameter to show_message().

2004-11-09 14:37  jackjansen

	* Added a level parameter to show_message.

2004-11-08 14:11  jackjansen

	* Give a warning message when we use a different parser than the
	  user requersted.

2004-11-08 14:04  jackjansen

	* Got rid of the error dialog for renderer_done.

2004-11-08 11:50  jackjansen

	* Fixed preferences.

2004-11-02 17:00  keesblom

	* Implemented "brush"

2004-11-02 16:30  koelimoe

	* Whaile at added also plugin preferences to qt_Settings

2004-11-02 15:49  koelimoe

	* tweaking

2004-11-02 15:34  koelimoe

	* Changed the settings window so it uses the new validation_scheme
	  instead of the do_validation.

2004-11-01 16:35  jackjansen

	* Added --with-xerces-plugin, which governs whether xerces support
	  will be builtin in the main library or through a plugin. This
	  idiom is probablyresuabel for other tools too (sdl, ffmpeg, etc).

2004-11-01 15:54  koelimoe

	* first draft on a man page

2004-11-01 14:00  jackjansen

	* Various MacOS fixes: - Fixed preferences to do validation
	  correctly, and use correct terms.  - Include gettext localization
	  in the app bundle - Include plugins in the app bundle - Add the
	  missing slash in plugin dirs

2004-11-01 13:21  jackjansen

	* The variable name is INCLTDL, not LTDLINCL.

2004-10-31 17:45  jackjansen

	* Started on putting the plugins inside the app framework (macosx)
	  and in other platform-dependent locations.

	  Unfinished and untested.

2004-10-31 00:11  jackjansen

	* Added --with[out]-ltdl-plugins. By default they are enabled under
	  unix.

2004-10-29 17:06  koelimoe

	* preferences are now int plugin_engine

2004-10-29 13:55  jackjansen

	* Tweaks, mainly for the seek() method.

2004-10-29 11:50  jackjansen

	* Merging exp_jack_ltdl branch.

2004-10-29 10:10  jackjansen

	* Added a seek method.

2004-10-28 23:51  jackjansen

	* Defensive programming: - Got rid of playable_imp::seek():
	  playables not implementing seek should   add a dummy method
	  themselves. renderer_playable_dsall does this.  - Don't call
	  renderer_done() unless show() has been called.  - Fixed a few
	  error messages.

2004-10-28 16:56  koelimoe

	* slight improvement on the xerces linking, but still not there

2004-10-28 13:08  koelimoe

	* added plugin preferences to the windows mypreferences and fixed
	  the forgoten mac osx parts

2004-10-28 13:07  koelimoe

	* a xerces_plugin.

2004-10-28 10:50  koelimoe

	* we make things better ;-)

2004-10-27 16:13  keesblom

	* Disabled qt_logger, because it often gets into an X-server error
	  "async reply". There is a solution, which only works with
	  QT_THREAD_SUPPORT which we don't have. Therefore the bug report
	  remains open.

2004-10-27 11:41  koelimoe

	* added plugin preferenecs

2004-10-26 16:19  koelimoe

	* added plugin stuff to the preferences. (waiting for Jack ot add
	  the preferences to the plugin stuff )

2004-10-26 15:42  koelimoe

	* plugins get installed in $PREFIX/lib/ambulant

2004-10-26 13:04  koelimoe

	* oops

2004-10-26 12:49  koelimoe

	* fixed: arts works now also as a sound renderer for video

2004-10-26 11:48  koelimoe

	* fixed most of the broken arts stuff.

2004-10-25 18:00  keesblom

	* Implemented showmessage in qt_logger

2004-10-25 16:58  keesblom

	* Merged the sane2004 branch with the main trunk. Compiles and
	  works with Fedora, does not compile with Zaurus, because of ltdl.

2004-10-25 16:55  koelimoe

	* cleaned up the arts stuff (arts broken :-) )

2004-10-25 15:05  jackjansen

	* iGot rid of POMAKEFILEDEPS.

2004-10-22 11:05  koelimoe

	* removed the strange ,... in show_message

2004-10-21 16:13  jackjansen

	* Got plugins to work on MacOSX.

2004-10-21 14:50  jackjansen

	* Updated ShowMessage.

2004-10-20 23:41  jackjansen

	* Remove debug.

2004-10-20 23:41  jackjansen

	* - Enable xerces parser.  - Enable plugin loading (which doesn't
	  work:-)

2004-10-20 23:40  jackjansen

	* Strip only local symbols.

2004-10-20 23:39  jackjansen

	* Disable logging window (reverting to stderr logging) if
	  AMBULANT_NOGGER_NOWINDOW is set.

2004-10-20 23:37  jackjansen

	* Added two debug statements to see how loading the pluugin goes.

2004-10-20 23:37  jackjansen

	* Added a note about using native transport with Xerces on OSX.

2004-10-20 16:57  koelimoe

	* added parser preference to the parser factory.

2004-10-20 16:51  koelimoe

	* added some mising info about the xerces parser

2004-10-15 16:56  jackjansen

	* Merge branch experimental-jack-win-logger: - Added log window on
	  Windows - Simplified ShowDialog interface.

2004-10-15 16:28  jackjansen

	* Added a note about updating NEWS and ChangeLog.

2004-10-15 15:55  koelimoe

	*  switched off the qt_logger.

2004-10-14 16:11  jackjansen

	* Add win_trace_error(), and use that to show error messages that
	  seem to appear always (such as the IMedia error for audio on
	  Win2K).

2004-10-14 15:40  jackjansen

	* Parser_factory added.

2004-10-14 15:39  jackjansen

	* Oops - some of the static libraries got replaced by dynamic
	  libraries. Fixed.

2004-10-14 15:11  jackjansen

	* For some reason (different VC++ version??!?) an unrelated checkin
	  by Daniel caused an rc-file to be added to the build. And this
	  file doesn't exist, of course... Removed.

2004-10-14 14:55  jackjansen

	* Added factories argument to parser call. untested.

2004-10-12 17:06  koelimoe

	* quick hack to fix the bug that caused the player to open a huge
	  amount of playables

2004-10-08 17:04  jackjansen

	* Merging branch exp_jack_pdfdocs: generate the design
	  documentation as PDF.

2004-10-06 13:27  jackjansen

	* Use preprocessor construct to determine expat version, so it also
	  works for cross-compiling.

2004-10-05 18:10  keesblom

	* Added #ifdef WITH_PLUGINS to disable plugins

2004-10-05 18:06  keesblom

	* Changed version number to 1.0.3 for the (unstable) development
	  branch Added temporary #define WITH_PLUGINS to be controlled from
	  configure later

2004-10-04 16:30  jackjansen

	* Adapted for p[arser factory.

2004-10-04 16:30  jackjansen

	* The icons weren't copied. Fixed.

2004-10-04 16:30  jackjansen

	* m4/Makefile added. Not sure why this needs to be rebuilt,
	  though...

2004-10-04 10:55  jackjansen

	* Removed a turd.

2004-10-04 10:55  jackjansen

	* Fixed typo in expat test.

2004-10-02 22:04  jackjansen

	* If no --with-expat option is given then first see whether there's
	  a pre-installed expat that is good enough (>= 1.95.7).

	  Untested.

2004-10-02 21:45  jackjansen

	* On debian Qt is installed in /usr, and QTDIR isn't set. Cater for
	  this situation.

	  Untested.

2004-09-28 12:48  koelimoe

	* moved the parser factory to the right dirs and added the
	  parser_factory to the working code

2004-09-27 15:00  keesblom

	* Changed the Qt class for the logger window to QTextEdit rather
	  than QTextView because the latter is marked "deprecated" in the
	  more recent versions of Qt.

2004-09-25 00:22  jackjansen

	* Finished the documentation (I hope:-).

2004-09-24 16:36  jackjansen

	* More bits and pieces.

2004-09-24 15:05  jackjansen

	* More bits and pieces of the documentation.

2004-09-24 12:58  jackjansen

	* Finished the walkthrough document.

2004-09-24 00:59  jackjansen

	* Started on a walkthrough of how a document is played.

2004-09-24 00:15  jackjansen

	* Explain the structure of the Documentation subtree.

2004-09-24 00:08  jackjansen

	* Moved README-Distribution to the misc directory.

2004-09-24 00:06  jackjansen

	* Finished the API documentation (modulo bugs:-).

2004-09-23 17:59  keesblom

	* Added Logger window, accesible through File menu

2004-09-23 16:40  jackjansen

	* More documentation.

2004-09-23 13:24  koelimoe

	* fixed my my losy code from yesterday

2004-09-23 00:18  jackjansen

	* More documentation.

2004-09-22 17:56  keesblom

	* Added a Qt gui to select Ambulant preferences, called "Settings"
	  on Linux

2004-09-22 16:35  koelimoe

	*  Started to create a parser_factory in preparation of the xerces
	  plugin

2004-09-21 14:14  jackjansen

	* Started on documenting our externally visible APIs.

2004-09-21 14:10  jackjansen

	* Got rid of silly argument to resolve().  Documented.

2004-09-21 13:47  jackjansen

	* aclocal.m4 should *not* be in CVS, it's dependent on thhe
	  automake version.  The gettext m4 directory should be passed to
	  the aclocal call, so it will be searched when creating
	  aclocal.m4.

2004-09-20 16:35  koelimoe

	* fixed arts

2004-09-20 14:33  koelimoe

	* tweaks

2004-09-20 14:27  koelimoe

	* addapted the plugins to the new factory struc

2004-09-20 14:14  jackjansen

	* Getting started with using doxygen to generate lowlevel API
	  documentation.

2004-09-20 13:53  koelimoe

	* corrected a small typo

2004-09-20 13:43  koelimoe

	* Merging the daniel_experimental_factory_struct branch

2004-09-20 10:40  jackjansen

	* API for plugins changed.

2004-09-19 23:41  jackjansen

	* Updated to the current state of things.

2004-09-18 00:45  jackjansen

	* Got plugins to load on MacOSX. The main problem was (shame,
	  shame) that the application was stripped during install.

2004-09-18 00:23  jackjansen

	* Revamped plugin engine: it is now a singleton. Upon creation it
	  collects a list of plugin directories, loads plugins from them
	  and collects the pointers to the init routines. The method
	  add_plugins() now calls the init routines so the plugins can
	  register themselves with the factories.

	  Only very lightly tested.

2004-09-17 16:05  jackjansen

	* Merging experimental_internationalized branch: - Use gettext
	  library to localize user-visible strings (if available) - Enable
	  localization of Mac user interface - Implemented both for Dutch
	  (and a little Japanese)

2004-09-14 15:07  jackjansen

	* Started on getting plugins to work on OSX. Compiles, but doesn't
	  do anything yet.

	  Also implemented naming convention "libamplugin_" for plugins and
	  changed some messages.

2004-09-14 14:31  jackjansen

	* - Make arts plugin conditional (depending on WITH_ARTS) - Change
	  library names to be of the form libamplugin_xxxxx.la - build
	  modules as noinst in stead of lib. At least now there not
	  installed in $libdir. The downside is they're not installed
	  anywhere:-)

2004-09-13 16:23  koelimoe

	* structure needed to remove SDL from the qt_renderer

2004-09-10 13:57  koelimoe

	* switched off the debug info

2004-09-10 12:46  koelimoe

	* fixed : the arts plugin didn't say that it was ready, when end of
	  file occured

2004-09-10 11:39  koelimoe

	* fixed the problem with stalling the presentation

2004-09-10 05:49  jackjansen

	* Tweaks

2004-09-09 16:56  koelimoe

	* turned off blocking for the arts server. this does seem to
	  resolve the problem that the rest of the presentation stalls. But
	  no sound is playing

2004-09-09 13:31  koelimoe

	* added stop, pause, resume

2004-09-08 16:41  koelimoe

	* removed a stupid deadlock

2004-09-08 16:35  koelimoe

	* started to work on the arts plugin

2004-09-07 15:33  keesblom

	* Merging branch exp_kees_020904 (unix_preferences) with trunk

2004-09-06 15:32  koelimoe

	* uncommented the SDL stuff

2004-09-06 11:41  koelimoe

	* arts sound renderer works again. but still has a problem: it
	  holds up the rest of the presentation until the sound is
	  finnished.

2004-09-03 15:25  jackjansen

	* Added preferences.cpp

2004-09-03 14:07  jackjansen

	* Got the preferences dialog to work.

2004-09-03 11:49  jackjansen

	* Added skeleton for the preferences dialog. Doesn't do anything
	  yet, though.

2004-09-03 11:29  jackjansen

	* On Windows, save preferences in the registry.

2004-09-03 11:28  jackjansen

	* Added missing include for <string>

2004-09-02 16:53  jackjansen

	* Use strcmp, not strncasecmp. Attributes are case-dependent (and
	  moreover strncasecmp doesn't seem to exist on windows).

2004-09-02 13:03  jackjansen

	* Preferences GUI works, but we do need an ugly "apply" button
	  because I haven't found out how we can be notified of changes.

2004-09-01 23:57  jackjansen

	* - Changed strings prefs from char* to std::string to forestall
	  garbage collection problems - Fixed Mac support - Removed const
	  char* values that would get copied in every module including
	  preferences.h.

2004-09-01 15:06  keesblom

	* Changed enums into char* for preferences\n Added "auto" as a
	  valid attributevalue in region_node

2004-08-31 22:59  jackjansen

	* Apparently this file is important too:-)

2004-08-31 17:51  keesblom

	* Moved unix related preferences to unix_preferences as part of the
	  gui

2004-08-31 16:37  jackjansen

	* Preferences subclass that saves/loads through NSUserDefaults.

2004-08-31 16:36  jackjansen

	* Got an initial preferences dialog working (for the log level
	  only) with NSUserDefaultsController. Preferences are also saved
	  in the standard MacOS way.

2004-08-31 15:15  keesblom

	* Reorganized preferences code, seems to work properly

2004-08-31 14:22  jackjansen

	* Allow subclassing of the preferences singleton.

2004-08-31 13:48  jackjansen

	* Added a loglevel preference and a way to set the log level
	  through the UI.  Only implemented for the Mac right now.

2004-08-30 17:28  keesblom

	* Added preferences to control Xerces validating features

2004-08-30 17:17  jackjansen

	* Started on making the error messages a bit more user-centric.

2004-08-30 17:16  jackjansen

	* Enabled resize and minimize.

2004-08-30 14:30  jackjansen

	* Use logger::debug() in stead of logger::trace() where applicable.

2004-08-27 13:20  keesblom

	* Made it compile on my Linux office desktop

2004-08-27 12:55  jackjansen

	* Adapted for preferences.cpp and WITH_EXPAT define.

2004-08-27 11:20  jackjansen

	* Tweaked to make it compile on the Mac.

2004-08-27 10:32  koelimoe

	* Morning, afternoon, missing Makefile.am sigh. it friday and i
	  need a beer :-)

2004-08-26 16:55  koelimoe

	* Started fixing the arts_renderer.

2004-08-26 16:53  jackjansen

	* Getting command line build to work too.

2004-08-26 16:43  jackjansen

	* tweaks

2004-08-26 16:42  jackjansen

	* Added an (internal) DTD so xerces is happy parsing this document.

2004-08-26 16:25  koelimoe

	* Merged the experimental_plugin_daniel branch

2004-08-25 23:49  jackjansen

	* Log window starts to work, but there are still some malloc
	  problems.

2004-08-25 17:06  jackjansen

	* Added skeleton log window. It does everything, except displaying
	  the log:-)

2004-08-25 11:26  jackjansen

	* Various fixes to be able to use both parsers on MacOS - Some
	  stuff was inside #ifdefs but shouldn't be - Also allow parser
	  value ANY (means use either) - Set default parser with
	  environment variable AMBULANT_USE_PARSER

2004-08-24 14:31  keesblom

	* Temporary feature: player_unix/AmbulantPlayer can now select the
	  Xerces  XML parser by setting the environment variable
	  XMLPARSER=XERCES

2004-08-24 13:28  keesblom

	* Extended preferences to include parser selection (expat/xerces)

2004-08-23 15:44  jackjansen

	* Added a missing const

2004-08-23 14:52  jackjansen

	* - Added a show_message function pointer member to the logger,
	  which overrides   the default show_message, plus a
	  set_show_message to set it.  - In addition to writing to the log
	  also call show_message in case of   error or fatal logging
	  entries - For cocoa, use set_show_message and set_ostream to
	  override logger output.    The current cocoa implementation is
	  still a dummy (using NSLog).

2004-08-23 14:50  jackjansen

	* Plugged memory leak.

2004-08-23 10:46  jackjansen

	* Factored out duplicate code in constructor and reset(), thereby
	  fixing the latter.

2004-08-19 17:28  keesblom

	* Oops..

2004-08-19 17:21  keesblom

	* Added missing functions for xerces_parser

2004-08-19 16:00  keesblom

	* Merging yesterdau's branch into the trunk

2004-08-19 15:47  jackjansen

	* Added an extra warning that Visual Studio 7.0 won't work.

2004-08-19 15:46  jackjansen

	* Note about where error messages can be found (which hadn't been
	  checked in due to an oversight).

2004-08-19 15:45  jackjansen

	* Fixed to allow building with either xerces, expat or both.

2004-08-19 15:44  jackjansen

	* Started on support for both xerces and expat.

2004-08-19 15:43  jackjansen

	* Added some notes on the xerces building process.

2004-08-19 14:17  jackjansen

	* Copied to main branch

2004-08-18 17:51  jackjansen

	* Started on supporting both expat and xerces in one binary.
	  Doesn't work yet:-)

2004-08-18 16:16  keesblom

	* Merging yesterday's branch into the trunk

2004-08-13 15:00  koelimoe

	* tweaks, sound works fine with ffmpeg 0.4.8 and 0.4.9pre1 but
	  video is still a problem with 0.4.9pre1

2004-08-09 13:31  koelimoe

	* Fixed the sound for ffmpeg-0.4.9.

2004-08-02 13:56  keesblom

	* ffmpeg-0.4.9-pre1 support disabled, video's in Birthday are
	  broken.  Enable by uncommenting #define WITH_FFMPEG_0_4_9 (line
	  49 in ffmpeg_datasource.cpp).

2004-07-30 17:08  keesblom

	* Added support for ffmpeg-0.4.9-pre1, using  #ifdef
	  WITH_FFMPEG_0_4_9 Welcome doesn't play sound, Demo does,
	  Flashlight video now works

2004-07-29 15:22  keesblom

	* Merging branch into main trunk

2004-07-27 16:26  keesblom

	* Added another test to prevent "realloc(...,0)", now in
	  "pushdata(sz)"

2004-07-23 17:25  jackjansen

	* - On linux realloc(..., 0) returns NULL, which is not an error.
	  - Also, if m_size is 0 we alsways realloc (as there is no copying
	  cost	 incurred)

2004-07-23 16:19  jackjansen

	* ffmpeg_video_datasource didn't clean up any remaining frames on
	  termination, fixed. Should fix #992376.

2004-07-23 16:04  jackjansen

	* There is now a new call set_max_unused_size() to signal when to
	  reclaim unused space.

	  In addition, there are class methods default_max_size(size) and
	  default_max_unused_size(size) that can be used to change the
	  defaults. These could be called on the handheld platforms to
	  limit the amount of memory used by databuffers in general.

2004-07-23 13:10  jackjansen

	* Added an explicit reference to where the player is installed and
	  what it is called.

2004-07-23 11:57  jackjansen

	* - Give an error message if no gui toolkit is found, unless an
	  explicit   --without-qt or similar is specified on the configure
	  call - Similar for ffmpeg.

	  Should fix #995861.

2004-07-21 14:57  jackjansen

	* Updated version number to 1.0.1 so we ourselves know what we're
	  running.  Let's update again to 1.0.2 for the next external
	  release.

2004-07-21 14:56  jackjansen

	* Handle URLs with numeric hostnames correctly.

2004-07-20 16:28  kleanthis

	* Prevent descendents of paused nodes to go active.

2004-07-19 16:57  kleanthis

	* Avoid re-entering the main scheduler loop. Leave any events for
	  the next iteration.  This should increase a lot the application's
	  stability when links fire.

2004-07-18 19:42  kleanthis

	* Re-enable slideWipe.	Attempt to optimize repainting of multiple
	  concurrent transitions.  Unfortunately this cannot be done due to
	  errors in the subregion redraw code.

2004-07-18 19:34  kleanthis

	* Small things here and there: Wait for the end of media event when
	  the implicit duration is involved in timing calculations.  Fix
	  repeat that was broken for some cases.

2004-07-16 22:40  kleanthis

	* Auto-start dropped docs.

2004-07-16 22:36  kleanthis

	* Some more refinements on pausing.

2004-07-16 17:58  keesblom

	* Cleanup, removed debug output, added installation directory for
	  the Welcome document

2004-07-16 16:53  kleanthis

	* Some more steps in integrating pause semantics into the model.
	  The first result is that the ref document LinkingOnly now seems
	  to play correctly.

2004-07-14 17:52  keesblom

	* Added tips and some (190) suppressions for installing and using
	  "valgrind ".

2004-07-13 23:30  kleanthis

	* Add a handy function "get_sig" that returns the string "tag[id]"
	  for use n logging statements. The "this" pointer used in many
	  places is almost useless.

2004-07-13 23:27  kleanthis

	* The timing was broken for documents containg 'a' anchors.  Fix
	  this by handling ''a" anchors as "area" elements.  Their lifetime
	  is now restricted by their parent and this fits better into the
	  smil timing model.  This fixes one of the many errors in
	  LinkingOnly.smil ref doc.

2004-07-13 23:24  kleanthis

	* The timing was broken for documents containg 'a' anchors.  Fix
	  this by handling ''a" anchors as "area" elements.  Their lifetime
	  is now restricted by their parent and this fits better into the
	  smil timing model.  This fixes one of the many errors in
	  LinkingOnly.smil ref doc.

2004-07-08 16:01  jackjansen

	* Added quotes around postbuild step filename, so this step also
	  works when there are spaces in the path leading up to the
	  ambulant source tree. Spotted by Sjoerd.

2004-07-08 14:42  jackjansen

	* Oops - winCE projects for third_party_packages were missing.
	  Fixed.

2004-07-07 16:08  keesblom

	* Rewrote README-ZAURUS completely now that it is easy to download
	  a complete "ipk" package and let the Zaurus Package Installer do
	  all the work.  The old text is now called HISTORY-ZAURUS. Also
	  the "ipk" package has been commited.

2004-07-06 13:56  jackjansen

	* Added files that were missing from the source distribution.

2004-07-06 13:14  keesblom

	* Removed QInputdialog for Zaurus

2004-07-05 16:58  jackjansen

	* Updated to 1.0 icon.

2004-07-05 16:34  jackjansen

	* Added "Open URL" dialog.

2004-07-05 15:53  jackjansen

	* Video renderer didn't call renderer_done() on stop. This could
	  lead to wild jumps later, when the region wants to do a redraw.
	  Fixes #974715.

2004-07-05 14:26  jackjansen

	* data: urls were handled incorrectly. fixed.

2004-07-05 14:25  jackjansen

	* Removed debug

2004-07-05 14:25  jackjansen

	* New icon

2004-07-05 14:24  jackjansen

	* Removed debug output

2004-07-05 14:24  jackjansen

	* Stopgap for fixing transition background: always recreate the
	  offscreen pixmap in which we render thhe data.

2004-07-05 13:52  jackjansen

	* Updated icons and about text.

2004-07-05 13:27  jackjansen

	* Added section on building ipk files.

2004-07-05 12:50  jackjansen

	* iRemoved debug output.

2004-07-05 11:36  jackjansen

	* Test CVS locking problem - ignore.

2004-07-05 11:33  jackjansen

	* CVS locking problem test, ignore.

2004-07-05 11:20  keesblom

	* Disabled QCursor for the Zaurus

2004-07-05 11:15  jackjansen

	* - Registry entry for double-clicking a smil document was wrong.
	  Fixed.  - Dick wants the two-level name structure in the start
	  menu back, and   I couldn't be bothered to argue:-)

2004-07-05 10:01  kleanthis

	* Set the resolution of the event processor to 50ms. Should be even
	  smaller. The previous value (100ms) was too large.

2004-07-05 09:58  kleanthis

	* Use the main event processor instead of the secondary for
	  transitions for smoother redraws.

2004-07-05 09:56  kleanthis

	* Disable slideWipe transitions until i provide a fix (i will
	  attempt to do this later today).

2004-07-04 15:46  kleanthis

	* Various small changes based on Dick's report a) Fixed version
	  string in the About box b) Changed check mark icon with the
	  notepad icon. Please design a better one and we can replace it c)
	  Some bogus URLs are catched d) Fixed load settings e) Verified
	  that opening by double click works. BUT requires the correct
	  registry entries. For example if the command is
	  [<home>\AmbulantPlayer"] instead of [<home>\AmbulantPlayer" "%1"]
	  the player will be opened by the filename will not be passed by
	  the system.

2004-07-04 15:43  kleanthis

	* Various small changes based on Dick's report a) Fixed version
	  string in the About box b) Changed check mark icon with the
	  notepad icon. Please design a better one and we can replace it c)
	  Some bogus URLs are catched d) Fixed load settings e) Verified
	  that opening by double click works. BUT requires the correct
	  registry entries. For example if the command is
	  [<home>\AmbulantPlayer"] instead of [<home>\AmbulantPlayer" "%1"]
	  the player will be opened by the filename will not be passed by
	  the system.

2004-07-03 00:05  jackjansen

	* Found a devious way to get a "Open URL..." panel to work.

2004-07-02 17:41  jackjansen

	* Finally got fit to work on Linux.

2004-07-02 16:46  keesblom

	* Zaurus works again

2004-07-02 15:11  jackjansen

	* Two tiny tweaks now make trnasitions work on Linux.

2004-07-02 14:34  jackjansen

	* Updated version numbers, etc.

2004-07-02 14:00  kleanthis

	* Upgrade the DG toolkit, used by WinCE, to almost the current
	  state.

2004-07-02 13:57  keesblom

	* Made Jack's changes compile

2004-07-02 13:56  kleanthis

	* Upgrade the DG toolkit, used by WinCE, to almost the current
	  state.

2004-07-02 12:42  kleanthis

	* Unicode-enable the dx toolkit.

2004-07-02 12:39  kleanthis

	* Define macro text_str if not defined just in case...

2004-07-02 12:37  kleanthis

	* A trick applicable only for wince in order to bypass compiler
	  shortcoming.

2004-07-02 12:35  kleanthis

	* Unicode and URL related changes.  The WinCE player compiles and
	  runs again.

2004-07-02 12:32  kleanthis

	* Unicode and URL related changes.  The WinCE player compiles and
	  runs again.

2004-07-02 11:36  jackjansen

	* Fixed installer: - Added License - Fixed document icon - Changed
	  Start menu folder name

2004-07-02 11:34  jackjansen

	* Fixed document icon.

2004-07-02 11:16  jackjansen

	* Untested attempt to fix transition backgrounds on Linux. Kees
	  will investigate (and fix:-).

2004-07-02 00:14  jackjansen

	* Version numbers

2004-07-02 00:13  jackjansen

	* Include COPYING in a binary MacOSX distribution.

2004-07-01 23:19  jackjansen

	* - Moved building instructions to INSTALL - Updated version
	  numbers - Explained a couple of things a bit more clearly -
	  Updated text for 1.0 release - Set copyright year to 2004

2004-07-01 17:33  keesblom

	* Implemented feedback for interaction (bit hacky, but it works).

2004-07-01 16:21  jackjansen

	* Fix handling of documents specified by relative filename.

2004-07-01 15:57  jackjansen

	* Use a datasource to obtain the SMIL document, so we can play
	  documents over the net. Fixes 833702.

2004-07-01 14:50  kleanthis

	* Autostart documents passed through the schell. But keep the
	  mechanism just i case.

2004-07-01 14:26  kleanthis

	* Fix bug 983372 This is a site effect of the fact that the URL
	  module violates the assertion: url a(str); url b(a.get_url());
	  assert(a == b);

2004-07-01 14:22  jackjansen

	* Don't try to play (or stop) without testing that m_player is
	  valid. Fixes #976578.

2004-07-01 14:13  kleanthis

	* Document linking related changes.

2004-07-01 14:04  jackjansen

	* iDecoded and re-encoded to work around an ffmpeg bug

2004-07-01 14:01  kleanthis

	* Notify system entity when done.

2004-07-01 14:00  kleanthis

	* Added a done() notification to the embedder interface.

2004-07-01 13:57  kleanthis

	* Implement document linking. Not tested yet with nokia samples.

2004-07-01 12:57  jackjansen

	* Got rid of msvcr71 and other dlls we no longer need.	Updated
	  version numbers and such.

