Installation tips for the Zaurus SL-5600.
--------------------------------------------------------

To install the zaurus version of AmbulantPlayer
such that the icon is displayed and the program
can work with the Web- and File Browser Opera,

1) Installation must be done by creating an 
   "ipkg" package;
2) the line 
   application/smil                smil smi sml
   be added to the file
   /opt/Qtopia/etc/mime.types
3) The smile document (.smil) or a link to that
   document must be present in
   /home/zaurus/Documents

How to create a  "ipkg" package is described in
the Sharp SL-series Zaurus "Qtopia" Development
Start-up Guide p. 40-50

This document is sometimes incorrect, unclear or
incomplete.
In particular, they describe directory structure
were they refer to a file .desktop
This file should be called:
opt/Qtopia/apps/Applications/ambulantplayer.desktop
In this file, the first line should say literally:
[Desktop Entry]

An example is currently in:
/ufs/kees/Work/Ambulant/Zaurus/ambulantplayer

Attached are:
A. /ufs/kees/Work/Ambulant/Zaurus/HOWTO
   more detailed instructions
B. /ufs/kees/Work/Ambulant/Zaurus/ipkg-build.sh
    a script I used to create the "ipkg" package.


Kees Blom, 28 mei 2004.

How to create a Zaurus installer (ipk file)
-------------------------------------------

1. Build ambulantplayer for zaurus, see toplevel INSTALL
   file for details.
2. Unpack ambulantplayer-ipk.tgz, which has the skeleton
   directory structure.
3. Copy src/player_unix/AmbulantPlayer from the build directory
   to ambulantplayer/opt/Qtopia/bin/ambulantplayer in the skeleton
   directory.
4. Run ipkg-build.sh to create the ipk file.

A. HOWTO ----------------------------------------------------------

HOWTO work with the Zaurus SL-5600 PDA .

1. ssh.

Look for <inet_addr> on the PDA by typing:
zaurus PDA>  ifconfig

From apps.cwi.nl  you can login on the zaurus:
apps>  ssh XXXXX@<inet_addr>
Password: XXXXX
$ PS1="zaurus window>"
# Next set the following environment variables:
zaurus window> export QTDIR=/opt/QtPalmtop
zaurus window> export QPEDIR=/opt/QtPalmtop

# File transfer can be done (from zaurus) with scp:
zaurus window> scp <your CWI login>@ssh.cwi.nl:<your CWI file> <zaurus file>
Password: <your CWI passwd>

With thanks to Daniel Benden.

Kees Blom, 2-2-2004. ~kees/Work/Ambulant/Zaurus/HOWTO

2. Creating a .ipk package

Create a directory tree as in Section 3 of Sharp SL-series
Zaurus "Qtopia" Development Start-up Guide:

{work-dir}/CONTROL/control
{work-dir}/apps/Applications/ambulantplayer.desktop
{work-dir}/bin/ambulantplayer
{work-dir}/pics/ambulantplayer.png
{work-dir}/i18n/en/
{work-dir}/help/en/html

Names must be specified literally.
The content of these file must be exactly as specified
in the Start-up Guide. Even the line 
[Desktop Entry]
must appear as the first line in the 
ambulantplayer.desktop file.

A complete working example of this file structure 
is available in:
ambulantplayer-ipk.tgz

Now you can generate a .ipk package by executing the script
ipkg-build.sh, e.g.

./ipkg-build.sh ambulantplayer

This generates an .ipk file to be transferred to the Zaurus
preferably using "scp" to the directory
/home/zaurus/Documents/Install_Files
Then you can install the application together with its icons
and multi-lingual help files using the Zaurus installer
by clicking on the icon left-down, select settings
and click Add/Remove Software. This launches the Zaurus
Software Installer. First, select "Uninstall packages"
to remove the previous version of "ambulantplayer".
Then close the  Zaurus Software Installer completely.
Only then is the Uninstallation really effectuated.
Then, re-launch the  Zaurus Software Installer and 
select "Install packages" and click "ambulantplayer".
Again, close the  Zaurus Software Installer completely.

Kees Blom, 10-5-2004. Updated 8-6-2004 for CVS


